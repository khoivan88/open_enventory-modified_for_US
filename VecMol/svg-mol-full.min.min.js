var ab="Sciformation VectorMol (c) 2012-2019 Felix Rudolphi",M=Math,ac=90,ad=120,ae=180,af=M.PI/ae,ag=1/af,ah=2*M.atan(M.SQRT2),ai=ah*ag,aj=360,ak=21600,T=true,F=false,al,S=" ",am="px",an=Number.MAX_VALUE,ao="obj",C="C",H="H",ap="\nM  ",aq="SUP",ar="MUL",as="SRU",at=".menuPopup",au=".menuWithPopup",av=[0,2,1,3],aw="font-size",ax="stroke",ay="stroke-opacity",az="stroke-width",aA="stroke-dasharray",aB="--",aC="text-anchor",aD="fill",aE="<sub>",aF="</sub>",aG="atom",aH="draw",aI="drawChain",aJ="drawHotspot",aK="selRect",aL="selLasso",aM="rotate",aN="3d_rotate",aO="bond_rotate",aP="delete",aQ="insertTemplate",aR="paste",aS="drawPlus",aT="drawArrow",aU="zoomIn",aV,aW,aX,aY,aZ,a0,a1,a2,a3,a4,a5=0,a6=new RegExp("^(\\d*)([A-Z%*][a-z#]{0,2})(H\\d*)?\\s*(\\d*[\\+\\-]+)?\\s*$"),a7={8:0,4:1.5},a8=0,a9=1,a_=2,ba=3,bb=4,bc=$.browser.msie,bd=(bc&&$.browser.version<=8);
be=parseInt;
function bf(a){if(bd){if(!a){a=window.event}a.returnValue=F;
a.cancelBubble=T}else{a.preventDefault();
a.stopPropagation()}return F}function stopPropagation(a){if(bd){if(!a){a=window.event}a.cancelBubble=T}else{a.stopPropagation()}}function bg(a){return a.length}function bh(){for(var c=0,b=0,a=bg(arguments);
b<a;
b++){c+=arguments[b]}return c/a}function bi(b){var e=[],f=[],d,c,a;
for(d in b){f.push(d)}f.sort();
for(c=0,a=bg(f);
c<a;
c++){d=f[c];
e[d]=b[d];
delete b[d]}for(c=0;
c<a;
c++){d=f[c];
b[d]=e[d]}}function bj(a,c){for(var b in a){if(a[b]==c){return b}}}function bk(b){if(!b){return b}var a=/^[\s\n\r\t]*(.*?)[\s\n\r\t]*$/;
if(a.exec(b)){return RegExp.$1}}function bl(e,h,j){if(!$.isArray(h)){return e}var a=[],f=0,b,g,d,c;
for(d=0,c=bg(h);
d<c;
d++){b=h[d];
g=e.substr(f,b);
if(!j){g=bk(g)}a.push(g);
f+=b}if(bg(e)>b){g=e.substr(f);
if(!j){g=bk(g)}a.push(g)}return a}function bm(d){for(var c=[],b,e=0,a=(d?bg(d):0);
e<a;
e++){if(d.charAt(e)==S){continue}b=d.indexOf(S,e+1);
if(b==-1){c.push(d.substr(e));
break}c.push(d.substring(e,b));
e=b}return c}function bn(b,c,a){var d=b.substr(0,bg(c));
if(a!=T){d=d.toLowerCase();
c=c.toLowerCase()}return(d==c)}function bo(c,d,b){var e=bg(c)-bg(d),a;
if(e<0){return F}a=c.substr(e);
if(b!=T){a=a.toLowerCase();
d=d.toLowerCase()}return(a==d)}function bp(b){if(b==al||b==""){return""}b=String(b);
var a="\n";
b=b.replace(/:/g,".");
b=b.replace(/\r\n/g,a);
b=b.replace(/\r/g,a);
b=b.replace(/\|/g,a);
return b}function bq(e,c){c=be(c);
if(isNaN(c)||c<1){return""}e=String(e);
for(var d="",b=0;
b<c;
b++){d+=e}return d}function br(a,b){return bs(a,b,S)}function bs(c,d,b){c=String(c);
if(bg(c)>d){return c.substr(0,d)}var a=bg(c);
while(a<d){a++;
c=b+c}return c}function bt(c,d,b){c=String(c);
if(bg(c)>d){return c.substr(0,d)}var a=bg(c);
while(a<d){a++;
c+=b}return c}function bu(a){a=String(a);
return a.replace(/(["\\])/g,"\\$1")}function bv(a){return'"'+bu(a)+'"'}function bw(a,b){if(a==al||a==null||(isNaN(a)&&typeof a=="number")){return b}return a}function bx(a){return bw(a,0)}function by(a){return bw(a,"")}function bz(b){b=String(b);
var a=b.match(/\-?\d+[\.,]?\d*/);
if(a!=null&&bg(a)>0){return by(a[0])}return""}function bA(c,b,a){return M.max(b,M.min(a,c))}function round(c,e,f){var g=1,d,b,a;
c=parseFloat(c);
e=be(e);
if(isNaN(c)||c==al){return""}if(f!=3){if(c==0){return 0}if(c<0){g=-1;
c*=-1}}b=M.pow(10,e);
switch(f){case 1:d=M.floor(M.log(c)/M.LN10);
break;
case 2:d=M.floor(M.log(c)/3/M.LN10)*3;
break;
case 3:return c.toFixed(bA(e,0,20));
break;
case 4:e-=M.ceil(M.log(c)/M.LN10);
return g*c.toFixed(bA(e,0,20));
break;
default:return(g*M.round(c*b)/b)
}switch(f){case 1:case 2:a=String(g*M.round(c/M.pow(10,d)*b)/b);
if(d==0){return a}return a+"&sdot;10<sup>"+d+"</sup>"}}function bB(c){var b=location.search,d,a;
if(b&&c){d=new RegExp("[&?]"+c+"=([^&$]*)");
if(a=d.exec(b)){return a[1]}}}function bC(){return a5++}function s(a){return by(langDef[a])}function bD(){if($.inArray(lang,bE)>=0){document.write('<script type="text/javascript" src="lang_'+lang+'.js"><\/script>')}}function bF(){$(".button, .wTooltip").attr("title",function(){return s(this.id)}).on("dragstart",bf)}function bG(){this.bH=bC();
this.bI=this.bH;
this.bJ=bJ}function bK(b,a,c){if(b.bL){c.bI=a.bI}b.bM[a.bH]=c}function bJ(a){return a!=al&&this.bI==a.bI}function bN(a){return a!=al&&this.bH==a.bH}function bO(a,b){return bP(a,b)>=0}function bP(b,d){for(var c=0,a=bg(b);
c<a;
c++){if(b[c].bJ(d)){return c}}return -1}function bQ(b,a){b.push.apply(b,a)}function bR(a,b){if(b!=al){a.push(b)}}function bS(a,c){for(var b=bg(a)-1;
b>=0;
b--){if(!bO(c,a[b])){a.splice(b,1)}}}function bT(b,a){for(var c,d=bg(b)-1;
d>=0;
d--){for(c=bg(a)-1;
c>=0;
c--){if(b[d].bJ(a[c])){b.splice(d,1);
break}}}}function bU(b,e,c){for(var d=0,a=bg(b);
d<a;
d++){if(b[d].bJ(e)){b[d]=c;
return T}}return F}function bV(d,b){if(b){for(var c=0,a=bg(b);
c<a;
c++){if(b[c].bJ(d)){b.splice(c,1);
return T}}}return F}function bW(a,b){if(b==al){b=1}if(b!=0){a.unshift.apply(a,a.splice(b,bg(a)))}}function bX(b,d){for(var c=0,a=bg(d);
c<a;
c++){if(!bO(b,d[c])){return F}}return T}function bY(e,d){var b=Array.apply(al,arguments),c=[],f,a;
if(bg(b)>2){e=b.pop();
d=bY.apply(al,b)}for(f=0,a=bg(e);
f<a;
f++){if(bO(d,e[f])){c.push(e[f])}}return c}function bZ(e,b){for(var c=[],d=0,a=bg(e);
d<a;
d++){if(!bO(b,e[d])){c.push(e[d])}}return c}function b0(c,b){for(var d=0,a=bg(b);
d<a;
d++){b1(c,b[d])}}function b1(a,b){if(b!=al&&!bO(a,b)){a.push(b);
return T}return F}function b2(a){if(a==al){return al}return this.bM[a.bH]}function b3(b){if(b==al){return al}var c=this.bM[b.bH],a;
if(!c){for(a in this.bM){if(b.bJ(this.bM[a])){return b}}c=b.b4(this);
this.bM[b.bH]=c}return c}function b5(a){this.bM={};
this.bL=a;
this.b2=b2;
this.b3=b3}function b6(a){return(720+a)%aj}function b7(a){var b=this.b4();
b.x+=a.x;
b.y+=a.y;
b.z+=a.z;
return b}function b8(b,a){var c=this.b4();
c.x-=b.x;
c.y-=b.y;
c.z=(a?0:c.z-b.z);
return c}function b9(b){var c=this,a=c.bg();
return(a>0?c.b_((b||1)/a):new ca())}function cb(b,a,d){var c=this;
if(b instanceof ca){c.x+=b.x;
c.y+=b.y;
c.z+=b.z}else{c.x+=b;
c.y+=a;
c.z+=bx(d)}}function cc(a){return(this.x==a.x&&this.y==a.y&&this.z==a.z)}function cd(g,e,c){var f=this,a,b,d;
if(f.bg()==0||f.ce(g)<0){return F}a=f.cf(g,e);
if(!a){return isNaN(a)}b=f.cf(e,c);
if(!b){return isNaN(b)}return(d=f.cf(c,g)?(a*b>0&&a*d>0):isNaN(d))}function cg(b,a){var d=this.ce(b.ch(a));
if(d==0&&this.ci(a)<b.ci(a)){return NaN}return d}function cj(a){var b=this;
return new ca(b.x*a,b.y*a,b.z*a)}function ck(b,a){if(b!=1){var c=this;
if(a){c.cl(-a.x,-a.y,-a.z)}c.x*=b;
c.y*=b;
c.z*=b;
if(a){c.cl(a)}}}function cm(b,a){var c=this;
if(b&1){c.x=2*a.x-c.x}if(b&2){c.y=2*a.y-c.y}}function cn(c,b){if(b){this.cl(-b.x,-b.y,-b.z)}var f=this,d=M.cos(c),e=M.sin(c),a=f.x*d-f.y*e;
f.y=f.x*e+f.y*d;
f.x=a;
if(b){f.cl(b)}}function co(d,c,a){if(a){this.cl(-a.x,-a.y,-a.z)}var g=this,b=M.cos(c),f=M.sin(c),e=g.z*b-g.x*f;
g.x=g.x*b+g.z*f;
b=M.cos(d);
f=M.sin(d);
g.z=g.y*f+e*b;
g.y=g.y*b-e*f;
if(a){g.cl(a)
}}function cp(i,h,g,f){var e=this,c=e.cq(i),b=e.cq(h),d=cr(c,b),a;
if(f){a=c.ch(b);
a=a.ch(d).cs();
if(a){d.ct(f*af,a)}}if(g){d=d.cs(g)}d.cl(e);
return d}function cu(a){var b=this.cq(a);
return M.abs(b.x)+M.abs(b.y)-M.abs(b.z)}function cv(g,e,d){var f=this,c=g.cq(f),b=e.cq(f),a=c.ch(b);
if(d){a=a.ch(d.cq(f))}return a.cs()}function cw(m,g,a){if(m){if(a){this.cl(-a.x,-a.y,-a.z)}var e=this,i=M.cos(m),h=1-i,f=M.sin(m),l=e.x,k=e.y,j=e.z,d=g.x,c=g.y,b=g.z;
e.x=l*(i+d*d*h)+k*(d*c*h-b*f)+j*(d*b*h+c*f);
e.y=l*(c*d*h+b*f)+k*(i+c*c*h)+j*(c*b*h-d*f);
e.z=l*(b*d*h-c*f)+k*(b*c*h+d*f)+j*(i+b*b*h);
if(a){e.cl(a)}}}function cx(){return M.sqrt(this.ce(this))}function cy(b,a){var c=this.cq(b);
if(a){c.z=0}return c.bg()}function cz(a){var b=this;
return b.x*a.x+b.y*a.y+b.z*a.z}function cA(b,a){var c=this;
if(a){c=c.cq(a);
b=b.cq(a)}return new ca(c.y*b.z-c.z*b.y,c.z*b.x-c.x*b.z,c.x*b.y-c.y*b.x)}function cB(g,d,b){var f=this,e=f.cq(g),c=f.cq(d),a=f.cq(b);
return e.ch(c).ce(a)}function cC(h,f,c){var a=this,i=h.cq(a),g=f.cq(a),d=c.cq(a),e=i.cD(g).cD(d),b=[];
b.push(e.ch(i).cs());
b.push(e.ch(g).cs());
b.push(e.ch(d).cs());
return b}function cE(b,c){if(c){return b6(this.cF(c)-this.cF(b))}else{var a=b.x-this.x,d=b.y-this.y;
if(!a&&!d){return 0}return b6(M.atan2(d,a)*ag)}}function cG(d,c){var e=this,b,a;
if(c){d=d.cq(e);
c=c.cq(e)}else{c=e}if((b=d.bg())&&(a=c.bg())){return b6(M.acos(d.ce(c)/b/a)*ag)}}function cH(b,a){return this.cI(b,a)>0}function cJ(b,a){var c=b.cK(a,T);
if(c>0){return M.abs(this.cI(b,a))/c}}function cL(b,a){return((a.x-b.x)*(this.y-b.y)-(a.y-b.y)*(this.x-b.x))}function cr(b,a){return new ca(0.5*(b.x+a.x),0.5*(b.y+a.y),0.5*(b.z+a.z))}function cM(c,b,a){return this.x>=M.min(c.x,b.x)-a&&this.x<=M.max(c.x,b.x)+a&&this.y>=M.min(c.y,b.y)-a&&this.y<=M.max(c.y,b.y)+a}function cN(f,e,c){for(var b=F,d=1,a=bg(f);
d<a;
d++){if((((f[d].y<=c)&&(c<f[d-1].y))||((f[d-1].y<=c)&&(c<f[d].y)))&&(e<(f[d-1].x-f[d].x)*(c-f[d].y)/(f[d-1].y-f[d].y)+f[d].x)){b=!b}}return b}function cO(c,b){var a=this;
if(b&&(b.x>a.x||b.x2<a.x||b.y>a.y||b.y2<a.y)){return F}return cN(c,a.x,a.y)}function cP(){return this.x+","+this.y}function cQ(b,a){return(this.x+b)+","+(this.y+a)}function cR(){var a=this;
return new ca(a.x,a.y,a.z)}function cS(f,e,b,a){var d=e*af,c=b*af;
return new ca(f.x+a*M.cos(c)*M.cos(d),f.y+a*M.cos(c)*M.sin(d),f.z+a*M.sin(c))}function cT(c,b,a){return cS(c,b,0,a)}function cU(e,d,c){var a=e.cK(d),b;
if(!a){return new ca()}b=c/a;
return new ca(b*(d.y-e.y),b*(d.x-e.x),0.5*(e.z+d.z))}function cV(e,d,a,c){var b,f;
if(c){b=1-c;
e.x=b*e.x+d.x*c;
e.y=b*e.y+d.y*c;
d.x=b*d.x+e.x*c;
d.y=b*d.y+e.y*c}if(a){f=cU(e,d,a);
e.x+=f.x;
d.x+=f.x;
e.y-=f.y;
d.y-=f.y}}function cW(d,c,b){var a=1;
if(d>c){a+=0.3*(d-c)/(b-c)}if(a<1.02){a=1}return a*a}function cX(n,b,q,l,g,o){var r=this,i=r.cY(),c=r.cZ.c0.b4(),a=r.c1.c0.b4(),f=r.c2(),e,k,p,j,h,m,d;
g=(g||1);
if(f){e=M.max(f.c3.z,0.5*c4);
k=bh(e,M.min(f.c5.z,-0.5*c4));
g=M.min(g*cW(a.z,k,e),3.5)*b;
b*=cW(c.z,k,e)}else{g*=b}if(!n[aA]&&(p=(c.cK(a,T)/c6))){l=bx(l)+c7;
cV(c,a,q,l);
j=c8*(a.y-c.y)/p;
h=c8*(a.x-c.x)/p;
d=i.path("M"+c.c9(-j*b,h*b)+"L"+c.c9(j*b,-h*b)+"L"+a.c9(j*g,-h*g)+"L"+a.c9(-j*g,h*g)+"Z");

if(!o){l-=c7+c_;
c=r.cZ.c0.b4();
a=r.c1.c0.b4();
cV(c,a,q,l);
j/=c8;
h/=c8;
n[az]=0;
m=i.path("M"+c.c9(-j*b,h*b)+"L"+c.c9(j*b,-h*b)+"L"+a.c9(j*g,-h*g)+"L"+a.c9(-j*g,h*g)+"Z").attr(aD,n[ax])}}else{cV(c,a,q,l);
d=i.path("M"+c+"L"+a);
n[az]=c6*M.min(b,g);
if(!o){m=i.path("M"+c+"L"+a)}}r.da.push(d.attr({fill:db,stroke:db,"stroke-width":dc*n[az]}));
if(m){r.da.push(m.attr(n))}}function dd(d,c){if(c||st.de||d.df||d.dg||d.dh||d.di!=C||d.dj!=al||!bg(d.dk)){return T}if(bg(d.dk)!=2){return F}for(var b=0,a=bg(d.dk);
b<a;
b++){if(d.dk[b].dl!=2){return F}}return T}function dm(a){var c=this,b;
if(c.da){if(a&&dn(c.da)){a.insertAfter(c.da)}c.da.remove()}else{if(a&&(b=c.getInsertBefore())){a.insertBefore(b)}}c.da=a}function dp(b){for(var e,d,c=0,a=bg(b);
c<a;
c++){d=b[c].da;
if(dn(d)){if(e){d.insertAfter(e)}e=d}}}function dq(b){var a;
if(b){if(!(a=b.node)&&bg(b)){a=b[0].node}}return(a&&a.parentNode)}function dn(a){var b;
if(a){if(!(b=a.node)&&bg(a)){b=a[bg(a)-1].node}}return(b&&b.parentNode)}function getInsertBefore(){for(var g=this,c=st.dr(),e=g.ds(),b=c.dt(F),f,d=0,a=bg(b);
d<a;
d++){f=b[d];
if(f.ds()>=e&&dq(f.da)){return f.da}}}function du(){this.da=al}function dv(){var d=this,c=d.cY(),a=0.5*dw,b=c.path("M-"+a+",0H"+a+"M0,-"+a+"V"+a).attr(ax,d.dx?dy:dz).attr(az,dA).transform("t"+d.c0).data(ao,d).mouseover(dB).mouseout(dC);
d.dm(b)}function dD(){var a=this,b=a.cY(),d,e=0.5*dE,i=0.5*(1-dF),h=a.dG.b4(),g=a.dG.b4(),c=a.dH.b4(),j=a.dH.b4(),f=dz;
if(a.dI){f=dJ}else{if(a.dx){f=dy}}cV(c,h,e,i);
cV(j,g,-e,i);
d=b.path("M"+a.dH+"L"+a.dG+"L"+h+"M"+a.dG+"L,"+g).attr(ax,f).attr(az,dA).data(ao,a).mouseover(dK).mouseout(dL);
a.dm(d);
dM(a)}function dN(a){a.remove()}function dO(b){var a=this;
if(a.da){a.da.forEach(dN);
a.da.clear()}else{a.da=b.set()}return a.da}function dP(){if(!this.dQ&&!this.dR&&!this.dS){var N=this,o=N.c2(),j,u,E,B,k,f,J,g,m,b,D,I,l,t,r,G,z,n,L,A,h,a,w,p,v,q=N.cY(),y={},e=N.cZ.c0,d=N.c1.c0,K=bh(e.z,d.z),x=dz,c=(N.df?1.3:1);
if(o){o.dT();
j=o.c5.z;
u=bh(o.c3.z,j)}if(N.dI){x=dJ}else{if(N.dx){x=dy}}if(N.df){x=tinycolor.mix(x,"#00f",50)}if(K<u&&j<u){x=tinycolor(x);
y[ax]=x.brighten(0.13*(255-x.getBrightness())*(u-K)/(u-j)).toString()}else{y[ax]=x}N.dO(q);
switch(N.dl){case 1.5:case 2:h=0;
a=bg(N.cZ.dk);
w=bg(N.c1.dk);
if((a==1||w==1)&&(a>=3||w>=3||a==w)){}else{p=N.dU();
if(bg(p)){f=0;
for(E=0,B=bg(p);
E<B;
E++){A=bg(p[E].dV);
if(!k||A<f){f=A;
k=p[E]}}J=k.dW()}else{J=new ca();
g=0;
for(E=0,B=bg(N.cZ.dk);
E<B;
E++){m=N.cZ.dk[E];
b=(N.cZ.bJ(m.cZ)?m.c1:m.cZ);
if(b.bJ(N.c1)){continue}J.x+=b.c0.x;
J.y+=b.c0.y;
g++}for(E=0,B=bg(N.c1.dk);
E<B;
E++){m=N.c1.dk[E];
b=(N.c1.bJ(m.cZ)?m.c1:m.cZ);
if(b.bJ(N.cZ)){continue}J.x+=b.c0.x;
J.y+=b.c0.y;
g++}if(g){J.x/=g;
J.y/=g}}h=(e.cF(d)-J.cF(d))*af;
if(M.abs(h)>M.PI){h*=-1}}if((h+2*M.PI)%M.PI>0.01||(a==2&&w==2)||(p&&bg(p))){N.dX(y,c);
if(N.dl==1.5){y[aA]=[aB]}N.dX(y,c,2*(h>0?-1:1),0.15)}else{N.dX(y,c,-1,-0.05);
if(N.dl==1.5){y[aA]=[aB]}N.dX(y,c,1,-0.05)}break;
case 3:N.dX(y,c,-1.5,0.15),N.dX(y,c),N.dX(y,c,1.5,0.15);
break;
default:if(N.dY!=0){J=(N.dY!=1);

N.dX(y,c,0,0,(J?2:4),J)}switch(N.dY){case 1:break;
case 4:y[az]=c6*c;
D=e.cK(d);
l=1.5;
I=2;
if(D){G=0;
I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);
n=0;
v="M"+e;
for(E=0;
E<=D;
E+=l){G++;
n=E/D;
z=(G%2?1:-1);
v+="L"+(e.x*(1-n)+(d.x+t*z)*n)+","+(e.y*(1-n)+(d.y-r*z)*n)}N.da.push(q.path(v).attr(y))}break;
case 6:y[az]=c6*c;
D=e.cK(d);
l=2;
I=2;
if(D){I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);
v="";
for(E=0;
E<=D;
E+=l){n=E/D;
L=1-n;
v+="M"+(e.x*L+n*(d.x+t))+","+(e.y*L+n*(d.y-r))+"L"+(e.x*L+n*(d.x-t))+","+(e.y*L+n*(d.y+r))}N.da.push(q.path(v).attr(y))}break;
default:if(N.dl==0){y[aA]=[aB]}N.dX(y,c)}}}else{this.dm()}dM(this)}function dZ(a,c){var b=this;
a.d0.attr(aw,16*c).attr(az,c6);
a.bbox=a.d0.getBBox(T);
a.d1=b.d2.rect(a.bbox.x-a.d3,a.bbox.y-a.d3,a.bbox.width+2*a.d3,a.bbox.height+2*a.d3,1.5).attr(aD,a.db).attr(az,0).insertBefore(a.d0);
b.d4.push(a.d1,a.d0);
b.d5.push(a)}function d6(b,a){var e=this,d,c;
if(d7){if(b){e.x+=b;
e.d0.node.setAttribute("x",e.x);
e.d1.node.setAttribute("x",e.x-e.d3)}if(a){e.y+=a;
e.d0.node.setAttribute("y",e.y);
e.d1.node.setAttribute("y",e.y-e.d3)}}else{e.x+=bx(b);
e.y+=bx(a);
d=M.round(e.x*ak);
c=M.round(e.y*ak);
e.d0.shape.path=" m"+d+","+c+" l"+(d+1)+","+c+" e"}}function d8(b,h,f,i,e,g,c,d){var a=this;
a.d2=b;
a.x=h;
a.y=f;
a.db=g;
a.d3=bx(c);
a.d0=a.d2.text(h,f,i).attr(ax,e).attr(aD,e).attr(aC,"start");
if(d){a.d0.attr("font-weight","bold")}a.bbox=a.d0.getBBox(T);
a.d9=d6}function d_(){for(var c=this,b=0,a=bg(c.d5);
b<a;
b++){c.d5[b].d0.insertAfter(c.d4)}return this.d4}function ea(c,a){var b=this;
b.d2=c;
b.d4=a;
b.d5=[];
b.eb=dZ;
b.d_=d_}function ec(){if(!this.dR&&!this.dQ&&!this.dS){var I=this,v=I.cY(),x=I.c0,z=I.ed(),l,a,j,J=db,d=I.ee(),t=d.ef,e,b,q,E,f,u,g,r,k,n,y,c,h=0,G=0,D=0,o,w=0.8,B,A,m=I.df;
if(!v){return}if(t&&eg=="tmpl"&&d.bJ(t.eh)){J=ei}if(I.dI){j=dJ}else{j=dz}if(m||d.bJ(ej)){a=(this.ek?el:em)}else{if(I.dx){a=dy}}I.dO(v);
if(!dd(I,z)){if(a||J!=db){l=v.rect(x.x-en*eo,x.y-en*eo,2*en*eo,2*en*eo);
if(a){l.attr(ax,a).attr(az,c6)}else{l.attr(az,0)}if(J!=db){l.attr(aD,(ep?"red":J))}I.da.push(l)}}else{e=new ea(v,I.da);
b=!!(A=bg(I.dk));
for(B=0;
B<A;
B++){q=I.dk[B];
o=eq(q.cZ,q.c1)+90;
if(I.bJ(q.c1)){o+=ae}o%=aj;
if(o>ae){b=F;
break}}E=new d8(v,0,0,I.di+(st.de?I.getIndex()+1:""),j,J,eo,m);
E.d0.attr(aC,"middle");
f=er*es/E.bbox.height;
e.eb(E,f);
u=E.bbox.width*0.5;
G-=u;
h-=u;
D+=u;
g=I.et();
if(g&&!b){r=new d8(v,D,0,H,j,db,eo,m);
e.eb(r,f);
D+=r.bbox.width;
if(g>1){k=new d8(v,D,0.4*E.bbox.height,g,j,db,eo,m);
e.eb(k,f*w)}}if(z||I.dg){n="";
if(z&&M.abs(z)!=1){n+=M.abs(z)}if(z){n+=(z>0?"+":"\u2013")}if(I.dg==1){n+=":"}else{if(I.dg==2){n+="."}else{if(I.dg==3){n+=".."}}}y=new d8(v,D,-0.5*E.bbox.height,n,j,db,eo,m);
e.eb(y,f*w)}if(I.dh){c=new d8(v,0,-0.5*E.bbox.height,M.round(I.dh),j,db,eo,m);
e.eb(c,f*w);
G-=c.bbox.width;
c.d9(G)}if(g&&b){if(g>1){k=new d8(v,0,0.4*E.bbox.height,g,j,db,eo,m);
e.eb(k,f*w);
h=M.min(G,h-k.bbox.width);
k.d9(h)}r=new d8(v,0,0,H,j,db,eo,m);
e.eb(r,f);
h-=r.bbox.width;
r.d9(h)}I.da.transform("t"+x);
if(a){I.da.push(v.rect(x.x+h-eo,x.y-E.bbox.height*0.5,D-h+2*eo,E.bbox.height).attr(ax,a).attr(az,c6))
}}}else{this.dm()}dM(this)}function eu(){if(!this.ev&&!this.dS){var b=this,f,d,e,l,j,k={},c=b.cY(),m=new ea(c,b.dO(c)),a,h,g;
if(b.type==aq){a=b.dW();
h=new d8(c,a.x,a.y,b.di,dz,db,eo,(b.dx?dy:al));
h.d0.attr(aC,"middle");
g=er*es/h.bbox.height;
m.eb(h,g)}else{a=b.ew();
k[ax]=(b.dx?dy:dz);
k[az]=c6;
for(f=0,d=bg(b.ex);
f<d;
f++){e=b.ex[f];
l=e.dH.b4();
j=e.dG.b4();
cV(l,j,es*0.4*(a.ey(l,j)?-1:1));
b.da.push(c.path("M"+l+"L"+e.dH+"L"+e.dG+"L"+j).attr(k))}if(b.di){j=b.ez(3);
h=new d8(c,j.x+es*0.3,j.y+es*0.3,b.di,dz,db,eo);
g=er*es/h.bbox.height;
m.eb(h,g);
b.da.push(m.d_())}}if(c==aV){b.da.click(function(i){b.eA(i);
return bf(i)}).mousedown(bf).mouseup(eB)}}else{this.dm()}dM(this)}function ca(a,d,c){var b=this;
b.x=bx(a);
b.y=bx(d);
b.z=bx(c);
b.cD=b7;
b.cq=b8;
b.cs=b9;
b.cl=cb;
b.eC=ck;
b.eD=cn;
b.eE=co;
b.ct=cw;
b.eF=cv;
b.eG=cp;
b.eH=cu;
b.eI=cm;
b.bJ=cc;
b.bg=cx;
b.cK=cy;
b.b_=cj;
b.ce=cz;
b.ch=cA;
b.eJ=cB;
b.eK=cC;
b.cF=cE;
b.ci=cG;
b.ey=cH;
b.cf=cg;
b.eL=cJ;
b.cI=cL;
b.eM=cd;
b.cM=cM;
b.cO=cO;
b.b4=cR;
b.toString=cP;
b.c9=cQ}function eN(){var a=this;
bG.apply(a);
a.moveBy=a.cl=eO;
a.rotateBy=a.eD=eP;
a.rotate3D=a.eE=eQ;
a.rotateAround=a.eR=eS;
a.rotateAroundUnit=a.ct=eT;
a.flip=a.eI=eU;
a.getCenter=a.dW=eV;
a.eW=eX;
a.dm=eY;
a.du=eZ}function e0(){var a=this;
bG.apply(a);
a.ee=e1;
a.dm=dm;
a.dO=dO;
a.du=du;
a.getInsertBefore=getInsertBefore}function e2(b,a){if(a){bV(b,a)}b.dS=T;
b.dm();
dM(b)}function e3(b){for(var c=0,a=bg(b);
c<a;
c++){e2(b[c])}b.length=0}function e4(d,c){var e=d.ds(),f=c.ds();
if(e<f){return -1}if(e>f){return 1}return 0}function e5(c){for(var d=[],b=0,a=bg(c);
b<a;
b++){b1(d,e6(c[b]))}return d}function e6(a){if(!a||a.e7||a.dS){return}var b=a.cY();
if(b){b1(b.e7,a);
a.e7=T}return b}function dM(a){if(!a||!a.e7){return}var b=a.cY();
if(b){bV(a,b.e7);
a.e7=al}}function e8(){dp(st.dr().dt(F))}function e9(d){var b,a,c;
if($.isArray(d)){for(b=0,a=bg(d);
b<a;
b++){e9(d[b])}}else{while(bg(d.e7)){c=d.e7.pop();
if(c.dS){c.dm()}else{c.e7=al;
c.eW()}}if(c){e8();
d.renderfix()}}}function resetDirty(b){while(bg(b.e7)){var a=b.e7.pop();
a.e7=al}}function e_(){var d=this,c,e,b,a;
if(!d.c5||!d.c3){d.c5=new ca(an,an,an);
d.c3=new ca(-an,-an,-an);
c=d.fa(T);
if(!bg(c)){c=d.fa()}for(b=0,a=bg(c);
b<a;
b++){e=c[b];
fb(d,e)}}}function fb(a,b){fc(a,b.x);
fd(a,b.y);

fe(a,b.z)}function fc(b,a){if(a>b.c3.x){b.c3.x=a}if(a<b.c5.x){b.c5.x=a}}function fd(b,a){if(a>b.c3.y){b.c3.y=a}if(a<b.c5.y){b.c5.y=a}}function fe(b,a){if(a>b.c3.z){b.c3.z=a}if(a<b.c5.z){b.c5.z=a}}function eV(){if(!this.ff){var e=this,b=new ca(),d=e.fa(T),c,a;
if(!bg(d)){d=e.fa()}for(c=0,a=bg(d);
c<a;
c++){b.cl(d[c])}if(a>1){b.x/=a;
b.y/=a;
b.z/=a}e.ff=b}return this.ff}function eY(){if(this.da){dm.apply(this)}for(var c=this.dt(T),b=0,a=bg(c);
b<a;
b++){c[b].dm()}}function eZ(){if(this.da){du.apply(this)}for(var c=this.dt(T),b=0,a=bg(c);
b<a;
b++){c[b].du()}}function eX(){var a=e5(this.dt(F));
e9(a)}function eO(c,b,f){for(var e=this.fa(),d=0,a=bg(e);
d<a;
d++){e[d].cl(c,b,f)}this.fg(a8);
e5(this.dt(F))}function eP(f,b){var e,d,a,c,g=this;
if(!b){b=g.dW().b4();
c=T}e=g.fa();
for(d=0,a=bg(e);
d<a;
d++){e[d].eD(f,b)}g.fg((c?a9:ba));
e5(g.dt(F))}function eQ(e,d,b){var f,c,a,g=this;
if(!b){b=g.dW().b4()}f=g.fa();
for(c=0,a=bg(f);
c<a;
c++){f[c].eE(e,d,b)}g.fg(ba);
e5(g.dt(F))}function eT(f,c,b){for(var g=this,e=g.fa(),d=0,a=bg(e);
d<a;
d++){e[d].ct(f,c,b)}g.fg(ba);
e5(g.dt(F))}function eS(e,b,d){var a,c;
if(a=b.cK(d)){c=d.cq(b);
c.eC(1/a);
this.ct(e,c,b)}}function fh(d,b){var e,c,a,f=this;
if(!b){b=f.dW().b4()}e=f.fa();
for(c=0,a=bg(e);
c<a;
c++){e[c].eC(d,b)}f.fg(ba);
e5(f.dt(F))}function eU(c,b){if(!b){b=this.dW()}for(var e=this.fa(),d=0,a=bg(e);
d<a;
d++){e[d].eI(c,b)}this.fg(a8);
e5(this.dt(F))}function fi(){return 0}function fj(){return an}function fk(){return this.c0.z}function fl(a){bV(a,this.fm)}function fn(){var b=this,a;
if(b.ef){for(a=bg(b.ef.dk)-1;
a>=0;
a--){b.fo(b.ef.dk[a])}for(a=bg(b.ef.dV)-1;
a>=0;
a--){b.fp(b.ef.dV[a])}}else{b.ef=new fq()}b.fr=new fs(aV);
b.fr.ft(b.ef);
b.fu=new b5();
b.fu.fv=T}function fw(){var a=this;
return !a.fr||!a.ef||(!a.fr.fx&&!bg(a.ef.dV)&&!bg(a.ef.dk))}function fy(){for(var c=this.fr.dt(F),b=0,a=bg(c);
b<a;
b++){c[b].eW();
aV.fz.push(c[b].da)}}function fA(c,a){var b=this;
b.fx=new fB(c,a);
b.fx.dI=T;
b.fr.fC(b.fx);
return b.fx}function fD(a){var b=this.fu.b3(a);
fE(b,a);
bQ(b.dk,a.dk);
this.ef.fF(b);
return b}function fG(b){var c=b.dQ,a=b;
if(!c){c=b;
a=b.fH}e2(c,this.ef.dV);
delete c.dQ;
if(a){delete a.e7;
e6(a);
delete a.dQ}}function fI(a){var b=this.fu.b3(a);
fE(b,a);
this.ef.fJ(b);
return b}function fK(c,b){for(var a=bg(c)-1;
a>=0;
a--){c[a].dI=b}}function fE(c,a){c.dI=T;
c.fH=a;
var b;
if((b=c.ef)&&a.ef){b.dI=T;
b.fH=a.ef;
if(b=b.fL){b.dI=T;
b.fH=a.ef.fL}}a.dQ=c}function fM(b){var c=b.dQ,a=b;
if(!c){c=b;
a=b.fH}e2(c,this.ef.dk);

delete c.dQ;
if(a){delete a.e7;
e6(a);
delete a.dQ}}function fN(b){for(var d,c=0,a=bg(b.dV);
c<a;
c++){d=this.fF(b.dV[c]);
d.dk=[]}for(c=0,a=bg(b.dk);
c<a;
c++){this.fJ(b.dk[c])}}function fO(c){for(var b=0,a=bg(c.fP);
b<a;
b++){this.ft(c.fP[b])}}function fQ(){var a=this;
a.fF=fD;
a.fp=fG;
a.fJ=fI;
a.fo=fM;
a.ft=fN;
a.fR=fO;
a.fS=fA;
a.eW=fy;
a.fT=fn;
a.fU=fw;
a.fT()}function e1(){return(this.fH?this.fH:this)}fV={H:{fW:1,m:1.00794,v:1,fX:T,fY:1.007825,fZ:{1:1.007825,2:2.0141018,3:3.0160493}},D:{fW:1,m:2.01402,v:1,fY:2.014102},T:{fW:1,m:3.0160492,v:1,fY:3.0160492},He:{fW:2,m:4.002602,fY:4.002603,fZ:{3:3.0160293,4:4.0026032}},Li:{fW:3,f0:T,m:6.941,f1:7,fY:7.016005,fZ:{5:5.0125378,6:6.0151223,7:7.016004}},Be:{fW:4,f0:T,m:9.012182,f1:6,fY:9.012183,fZ:{7:7.0169292,9:9.0121821,10:10.0135337}},B:{fW:5,m:10.811,v:3,f1:5,fY:11.009305,fZ:{10:10.012937,11:11.0093055}},C:{fW:6,m:12.011,v:4,fX:T,fY:12,fZ:{11:11.0114338,12:12,13:13.0033548,14:14.003242}},N:{fW:7,m:14.00674,v:5,fY:14.003074,fZ:{13:13.0057386,14:14.003074,15:15.0001089,17:17.0084497}},O:{fW:8,m:15.9994,v:6,fY:15.994915,fZ:{14:14.0085953,15:15.0030654,16:15.9949146,17:16.9991315,18:17.9991604,19:19.0035787,20:20.0040761,21:21.0086546}},F:{fW:9,m:18.9984032,v:7,fY:18.998403,fZ:{17:17.0020952,18:18.0009377,19:18.9984032,20:19.9999813,21:20.9999489}},Ne:{fW:10,m:20.1797,fY:19.992439,fZ:{19:19.0018798,20:19.9924402,21:20.9938467,22:21.9913855,23:22.9944673,24:23.9936151}},Na:{fW:11,f0:T,m:22.989768,f1:7,fY:22.98977,fZ:{21:20.9976551,22:21.9944368,23:22.9897697,24:23.9909633,25:24.9899544}},Mg:{fW:12,f0:T,m:24.305,f1:6,fY:23.985045,fZ:{22:21.9995741,23:22.9941248,24:23.9850419,25:24.985837,26:25.982593,27:26.9843407,28:27.9838767}},Al:{fW:13,f0:T,m:26.9811539,f1:5,fY:26.981541,fZ:{25:24.9904286,26:25.9868917,27:26.9815384,28:27.9819102,29:28.9804448}},Si:{fW:14,m:28.0855,v:4,fY:27.976928,fZ:{27:26.9867048,28:27.9769265,29:28.9764947,30:29.9737702,31:30.9753633,32:31.9741481}},P:{fW:15,m:30.973762,v:5,fY:30.973763,fZ:{29:28.9818014,30:29.9783138,31:30.9737615,32:31.9739072,33:32.9717253,34:33.9736364}},S:{fW:16,m:32.066,v:6,fY:31.972072,fZ:{31:30.9795544,32:31.9720707,33:32.9714585,34:33.9678668,35:34.9690321,36:35.9670809,37:36.9711257,38:37.9711634,39:38.9751353}},Cl:{fW:17,m:35.4527,v:7,fY:34.968853,fZ:{33:32.9774518,34:33.973762,35:34.9688527,36:35.9683069,37:36.9659026,38:37.9680106,39:38.9680077,40:39.9704156,41:40.9706502}},Ar:{fW:18,m:39.948,fY:39.962383,fZ:{36:35.9675463,37:36.9667759,38:37.9627322,39:38.9643134,40:39.9623831,41:40.9645008,42:41.9630464,43:42.9656707,44:43.9653653,45:44.968095}},K:{fW:19,f0:T,m:39.0983,f1:17,fY:38.963708,fZ:{38:37.9690801,39:38.9637069,40:39.9639987,41:40.961826,42:41.9624031,43:42.9607157,44:43.9615561,45:44.9606997,46:45.9619762}},Ca:{fW:20,f0:T,m:40.078,f1:16,fY:39.962591,fZ:{40:39.9625912,41:40.9622783,42:41.9586183,43:42.9587668,44:43.9554811,45:44.9561859,46:45.9536928,47:46.9545465,48:47.9525335,49:48.9556733}},Sc:{fW:21,f0:T,m:44.95591,f1:15,fY:44.955914,fZ:{43:42.961151,44:43.959403,45:44.9559102,46:45.9551703,47:46.952408,48:47.952235,49:48.9500241}},Ti:{fW:22,f0:T,m:47.867,f1:14,fY:47.947947,fZ:{44:43.9596902,45:44.9581243,46:45.9526295,47:46.9517638,48:47.9479471,49:48.9478708,50:49.9447921,51:50.946616,52:51.9468982}},V:{fW:23,f0:T,m:50.9415,f1:13,fY:50.943963,fZ:{47:46.9549069,48:47.9522545,49:48.9485169,50:49.9471628,51:50.9439637,52:51.9447797,53:52.9443425}},Cr:{fW:24,f0:T,m:51.9961,f1:12,fY:51.94051,fZ:{48:47.9540359,49:48.9513411,50:49.9460496,51:50.9447718,52:51.9405119,53:52.9406538,54:53.9388849,55:54.9408442,56:55.9406452}},Mn:{fW:25,f0:T,m:54.93805,f1:11,fY:54.938046,fZ:{51:50.9482155,52:51.9455701,53:52.9412947,54:53.9403632,55:54.9380496,56:55.9389094,57:56.9382875}},Fe:{fW:26,f0:T,m:55.845,f1:10,fY:55.934939,fZ:{52:51.9481165,53:52.9453123,54:53.9396148,55:54.938298,56:55.9349421,57:56.9353987,58:57.9332805,59:58.9348805,60:59.9340769,61:60.9367495}},Co:{fW:27,f0:T,m:58.9332,f1:9,fY:58.933198,fZ:{55:54.9420031,56:55.9398439,57:56.9362962,58:57.9357576,59:58.9332002,60:59.9338222,61:60.9324794,62:61.9340542}},Ni:{fW:28,f0:T,m:58.6934,f1:10,fY:57.935347,fZ:{56:55.9421363,57:56.9398005,58:57.9353479,59:58.9343516,60:59.9307906,61:60.9310604,62:61.9283488,63:62.9296729,64:63.9279696,65:64.930088,66:65.9291152}},Cu:{fW:29,f0:T,m:63.546,f1:7,fY:62.929599},Zn:{fW:30,f0:T,m:65.39,f1:6,fY:63.929145},Ga:{fW:31,m:69.723,f1:5,fY:68.925581},Ge:{fW:32,m:72.61,fY:73.921179},As:{fW:33,m:74.92159,fY:74.921596},Se:{fW:34,m:78.96,fY:79.916521},Br:{fW:35,m:79.904,v:7,fY:78.918336},Kr:{fW:36,m:83.8,fY:83.911506},Rb:{fW:37,f0:T,m:85.4678,f1:17,fY:84.9118},Sr:{fW:38,f0:T,m:87.62,f1:16,fY:87.905625},Y:{fW:39,f0:T,m:88.90585,f1:15,fY:88.905856},Zr:{fW:40,f0:T,m:91.224,f1:14,fY:89.904708},Nb:{fW:41,f0:T,m:92.90638,f1:13,fY:92.906378},Mo:{fW:42,f0:T,m:95.94,f1:12,fY:97.905405},Tc:{fW:43,f0:T,m:97.9072,f1:11},Ru:{fW:44,f0:T,m:101.07,f1:10,fY:101.904348},Rh:{fW:45,f0:T,m:102.9055,f1:9,fY:102.905503},Pd:{fW:46,f0:T,m:106.42,f1:8,fY:105.903475},Ag:{fW:47,f0:T,m:107.8682,f1:7,fY:106.905095},Cd:{fW:48,f0:T,m:112.411,f1:6,fY:113.903361},In:{fW:49,f0:T,m:114.818,f1:5,fY:114.903875},Sn:{fW:50,f0:T,m:118.71,fY:119.902199},Sb:{fW:51,m:121.76,fY:120.903824},Te:{fW:52,m:127.6,fY:129.906229},I:{fW:53,m:126.90447,v:7,fY:126.904477},Xe:{fW:54,m:131.29,fY:131.904148},Cs:{fW:55,f0:T,m:132.90543,f1:17,fY:132.905433},Ba:{fW:56,f0:T,m:137.327,f1:16,fY:137.905236},La:{fW:57,f0:T,m:138.9055,f1:15,fY:138.906355},Ce:{fW:58,f0:T,m:140.115,f1:15,fY:139.905442},Pr:{fW:59,f0:T,m:140.90765,f1:15,fY:140.907657},Nd:{fW:60,f0:T,m:144.24,f1:15,fY:141.907731},Pm:{fW:61,f0:T,m:144.9127,f1:15},Sm:{fW:62,f0:T,m:150.36,f1:15,fY:151.919741},Eu:{fW:63,f0:T,m:151.965,f1:15,fY:152.921243},Gd:{fW:64,f0:T,m:157.25,f1:15,fY:157.924111},Tb:{fW:65,f0:T,m:158.92534,f1:15,fY:158.92535},Dy:{fW:66,f0:T,m:162.5,f1:15,fY:163.929183},Ho:{fW:67,f0:T,m:164.93032,f1:15,fY:164.930332},Er:{fW:68,f0:T,m:167.26,f1:15,fY:165.930305},Tm:{fW:69,f0:T,m:168.9342,f1:15,fY:168.934225},Yb:{fW:70,f0:T,m:173.04,f1:15,fY:173.938873},Lu:{fW:71,f0:T,m:174.967,f1:15,fY:174.940785},Hf:{fW:72,f0:T,m:178.49,f1:14,fY:179.946561},Ta:{fW:73,f0:T,m:180.9479,f1:13,fY:180.948014},W:{fW:74,f0:T,m:183.84,f1:12,fY:183.950953},Re:{fW:75,f0:T,m:186.207,f1:11,fY:186.955765},Os:{fW:76,f0:T,m:190.23,f1:10,fY:191.961487},Ir:{fW:77,f0:T,m:192.217,f1:9,fY:192.962942},Pt:{fW:78,f0:T,m:195.08,f1:8,fY:194.964785},Au:{fW:79,f0:T,m:196.96654,f1:7,fY:196.96656},Hg:{fW:80,f0:T,m:200.59,f1:6,fY:201.970632},Tl:{fW:81,f0:T,m:204.3833,f1:5,fY:204.97441},Pb:{fW:82,f0:T,m:207.2,f1:4,fY:207.976641},Bi:{fW:83,f0:T,m:208.98037,f1:3,fY:208.980388},Po:{fW:84,f0:T,m:208.9824},At:{fW:85,m:209.9871},Rn:{fW:86,m:222.0176},Fr:{fW:87,f0:T,m:223.0197},Ra:{fW:88,f0:T,m:226.0254},Ac:{fW:89,f0:T,m:227.0278},Th:{fW:90,f0:T,m:232.0381,fY:232.038054},Pa:{fW:91,f0:T,m:231.03588},U:{fW:92,f0:T,m:238.0289,fY:238.050786},Np:{fW:93,f0:T,m:237.0482},Pu:{fW:94,f0:T,m:244.0642},Am:{fW:95,f0:T,m:243.0614},Cm:{fW:96,f0:T,m:247.0703},Bk:{fW:97,f0:T,m:247.0703},Cf:{fW:98,f0:T,m:251.0796},Es:{fW:99,f0:T,m:252.083},Fm:{fW:100,f0:T,m:257.0915},Md:{fW:101,f0:T,m:256.094},No:{fW:102,f0:T,m:259.1009},Lr:{fW:103,f0:T,m:262.11},Rf:{fW:104,f0:T,m:261.11},Db:{fW:105,f0:T,m:268},Sg:{fW:106,f0:T,m:271},Bh:{fW:107,f0:T,m:270},Hs:{fW:108,f0:T,m:277},Mt:{fW:109,f0:T,m:276},Ds:{fW:110,f0:T,m:281},Rg:{fW:111,f0:T,m:272},Cn:{fW:112,f0:T},"%":{f2:T},M:{f2:T},X:{f2:T},Ln:{f2:T}};

function f3(){if(!this.ef){return -1}return bP(this.ef.dV,this)}function f4(a){return br(round(a/es,4,3),10)}function f5(){var e=0,g=this,d=br("0",3),f=(g.dj!=al?g.dj+1:0),a=g.f6(),b=M.round(bx(g.f7)),c=g.f8;
if(g.dh&&c){e=M.round(g.dh-c.m);
if(e<-3||e>4){e=0}}if(!c||a==c.v){a=0}else{if(a==0){a=15}}if(b!=0&&M.abs(b)<4){b=4-b}else{if(b!=4){b=0}}return"\n"+f4(g.c0.x)+f4(-g.c0.y)+f4(g.c0.z)+S+bt(g.di,3,S)+br(e,2)+br(b,3)+d+br(f,3)+d+br(a,3)+bq(d,6)}function f9(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}this.di=a;
this.f_=al;
this.f8=fV[a]}function ga(b){if(!b){return}var e=0,d,a,g,f;
for(d=0,a=bg(b);
d<a;
d++){g=b.charAt(d);
if(g=="+"){e++}else{if(g=="-"){e--}}}f=bz(b);
if(f===""){return e}return f*e}function gb(b){if(b==H){return 1}if(b){if(b.charAt(0)==H){var a=be(b.substr(1));
if(!isNaN(a)){return a}}}return al}function gc(p,r){var w=this,e,m,b,v,n,f,u,d,g,j,q,o,h=0,a=0,t,k,l=w.ek;
if(l&&l.type==ar){return}if(!r&&(e=gd(p))){if(l){return}m=w.ef;
b=m.fL;
v=w;
n=1;
u=e.ge();
d=u.ef;
if(bg(w.dk)>1){if(bg(u.dk)>1){v=new gf(gg(w.ee(),1));
if(w.dI){v=gh.fF(v)}f=new gi(w,v,1,0);
if(w.dI){f=gh.fJ(f)}else{m.fF(v);
m.fJ(f)}}else{n=2;
f=u.dk[0]}}else{f=w.dk[0]}d.cl(v.c0.cq(u.c0));
if(f){g=eq(f.cZ,f.c1)+((f.c1.bJ(v)||f.c1.bJ(v.fH))?ae:0)-u.gj(1);
d.eD(g*af,v.c0)}if(w.dI){d.eh=al;
gh.ft(d);
u=u.dQ}else{b.gk(m,d);
if(w.dx){st.gl().ft(d)}}if(n==2){m.gm(u,v)}else{if(!w.dI){m.gm(v,u)}}}else{w.dg=0;
j="";
for(q=0,o=bg(p);
q<o;
q++){t=p.charAt(q);
if(t=="."){h++}else{if(t==":"){a++}else{j+=t}}}if(a==1){w.dg=1}else{if(h>0){w.dg=h+1}}if(k=a6.exec(j)){w.dh=bw(be(k[1]),0);
w.gn(k[2]);
w.dj=gb(k[3]);
w.f7=ga(k[4])}w.fg(bb)}}function go(b){var c,f,d,a,e;
if(c=this.f8){if(a=this.dh){if((f=c.fZ)&&(f=f[a])){return f}e=c.fW;
f=a-e;
d=15.67*a-17.23*M.pow(a,2/3)-0.714*e*(e-1)*M.pow(a,-1/3)-23.2875*M.pow(f-e,2)/a;
if(!(a%2)){d+=11.2*M.pow(a,-0.5)*(e%2?-1:1)}return(939.553*f+938.259*e-d)/931.494061}else{return(b?c.fY:c.m)}}}function gp(b,a){this.gq=a;
this.cF=eq(b,a)}function gr(d,c){if(d.cF<c.cF){return -1}if(d.cF>c.cF){return 1}return 0}function gs(l,o){var k=(o?o.concat():[]),m,f=this.ee(),a=bg(f.dk),p,q,c,e,b,d,n,h=0,g;
for(c=0;
c<a;
c++){p=f.dk[c];
q=(p.cZ.bJ(f)?p.c1:p.cZ);
k.push(new gp(f,q))}a=bg(k);
k.sort(gr);
if(l){m=f.c0.cF(l);
for(c=0;
c<a;
c++){b=(c+1)%a;
e=k[c].cF;
d=(k[b].cF+aj)%aj;
if(b==0&&(m<d||e<m)){m=0.5*(e+d+aj);
break}else{if(e<m&&m<d){m=0.5*(e+d);
break}}}}else{for(c=0;
c<a;
c++){b=(c+1)%a;
n=(720+k[b].cF-k[c].cF)%aj;
if(n>h){h=n;
g=c}}m=k[g].cF+0.5*h}return m}function gt(){var c=this.ee(),e,a,b,d=c.c0,f=d.z;
for(b=bg(c.dk)-1;
b>=0;
b--){e=c.dk[b];
a=(e.cZ.bJ(c)?e.c1:e.cZ);
if(M.abs(a.c0.z-f)>0.05*d.cK(a.c0)){return F}}return T}function gu(b){var e=this,d=bg(e.dk),a,c;
if(b){if(d==2){for(c=0;
c<d;
c++){a=e.dk[c].gv(e);
if(!a.bJ(b)){return a}}}}else{if(d==1){return e.dk[0].gv(e)}}return al}function gw(g,e){var f,d=this.ee(),c=bg(d.dk),h,i,b,a;
if(!c){if(e){f=d.c0.cF(e)}else{f=-30}}else{if(c==1){h=d.dk[0];
i=d.gx();
if(g+h.dl==4){f=eq(d,i)+ae}else{if(e){f=eq(d,i);
f+=M.round((d.c0.cF(e)-f+720)/60)*60}else{b=i.gx(d);

if(b){a=(eq(i,d,b)+ae)%aj}f=eq(d,i)+ad*(a<ae?1:-1)}}}else{f=d.gy(e)}}return f}function gz(){for(var b=0,c=0,a=bg(this.dk);
c<a;
c++){b+=this.dk[c].dl}return b}function gA(b){if(b){var c=this,a=c.ed();
c.f7=a+b;
c.fg(bb);
e6(c)}}function gB(){var b=this,a=$.inArray(b.dg,av);
a++;
a%=bg(av);
b.dg=av[a];
b.fg(bb);
e6(b)}function gC(c,a){var b=this;
if(!a){a=[]}else{if(bO(a,b)){return}}a.push(b);
b.z=al;
if(c>ba){b.gD=al;
b.gE=al}a.pop()}function gF(){if(this.f_==al){if(!this.f8){return}return this.f8.v}else{return this.f_}}function gG(a){if(a==al){return an}var d=this,c=d.gz(),b;
if(d.dg==1||d.dg==3){c+=2}else{if(d.dg==2){c++}}b=bx(d.f7);
return(a-b<4?a-c-M.abs(b):8-a-c+b)}function gH(){var d=this,b=d.f6(),c,a;
if(b==al){d.gE=0;
d.gD=0}else{a=d.dj;
if(a==al){a=d.gD=d.gI(b)}if(a<0&&d.f8){d.gD=0;
c=d.f8.fW;
if(c==5){d.gE=a}else{if(c>10){if(a<8-2*b){a=8-2*b-a}else{a%=2}}d.gE=-a}}else{d.gE=0}if(d.gD>4||d.gD>b+1){d.gD=0}}}function gJ(){var a=this;
if(a.dj!=al){return a.dj}if(a.gD==al){a.gK()}return a.gD}function gL(){var a=this;
if(a.f7!=al){return a.f7}if(a.gE==al){a.gK()}return a.gE}function gM(b){if(this.fH){return this.fH.b4(b)}if(!b){b=new b5()}var c=this,a=new gf(c.c0.b4());
bK(b,c,a);
a.gn(c.di);
a.dj=c.dj;
a.dR=c.dR;
a.f7=c.f7;
a.dg=c.dg;
a.dh=c.dh;
a.f_=c.f_;
a.ek=b.b3(c.ek);
a.dx=c.dx;
a.dI=c.dI;
return a}function gN(){var b=this,a=0;
if(b.di!=C){a+=2}if(b.dh){a+=3}if(b.dg){a+=3}if(b.f7){a+=2}return a}function gO(){if(st.gP||st.gQ()){return}var c=this,b,a,d;
gh.fT();
switch(gR){case aG:b=gh.fF(c);
b.gc(gS());
gh.eW();
break;
case aH:case aI:if(!gT&&!gU){d=gg(c,gV);
b=gh.fF(c);
a=gh.fF(new gf(d));
gh.fJ(new gi(b,a,gV,gW));
a.gc(gS());
gh.eW()}break;
case aP:if(gT){c.ef.fp(c)}break}}function gX(){gh.fT()}function cY(){if(this.d2){return this.d2}if(this.ef){return this.ef.cY()}}function gY(d){if(d){for(var e,b=this.ef,c=0,a=bg(this.dk);
c<a;
c++){e=this.dk[c];
if((e.cZ.bJ(d)||e.c1.bJ(d))&&(!b||bO(b.dk,e))){return e}}}}function gZ(){return this.c0}function g0(a){if(!a||!this.dR){return[this.c0]}return[]}function g1(d,c){if(this.bJ(d)){return}if(c){if(bO(c.dV,this)){return c}}else{c=new g2(T)}c.fF(this);
for(var b=0,a=bg(this.dk);
b<a;
b++){this.dk[b].g3(d,c)}return c}function g4(){if(!this.g5){this.g5=[];
var b=this.ef.dU(),c,a;
for(c=0,a=bg(b);
c<a;
c++){if(bO(b[c].dV,this)){this.g5.push(b[c])}}}return this.g5}function g6(){if(this.z==al){for(var d=this,b=d.c0.z,c=0,a=bg(d.dk);
c<a;
c++){b=M.max(d.dk[c].ds(),b)}d.z=b+0.000001}return this.z}function gf(b){var a=this;
e0.apply(a);
a.di=C;
a.dk=[];
a.dR=F;
a.dg=0;
a.dh=0;
a.c0=b;
a.dx=F;
a.dW=gZ;
a.fa=g0;
a.g7=gY;
a.dU=g4;
a.gc=gc;
a.gn=f9;
a.getIndex=f3;
a.gy=gs;

a.g8=gt;
a.gx=gu;
a.gj=gw;
a.f6=gF;
a.gI=gG;
a.gz=gz;
a.g9=gA;
a.g_=gB;
a.fg=gC;
a.gK=gH;
a.et=gJ;
a.ed=gL;
a.ha=go;
a.hb=gN;
a.g3=g1;
a.getMolecule=hc;
a.hd=f5;
a.eW=ec;
a.ds=g6;
a.b4=gM;
a.cY=cY;
a.he=gO;
a.hf=gX}function hg(d){if(!d){d=new b5()}var e=this,b=new e.constructor(),c,a;
bK(d,e,b);
for(c=0,a=bg(e.dk);
c<a;
c++){e.dk[c].b4(d)}for(c=0,a=bg(e.hh);
c<a;
c++){e.hh[c].b4(d)}for(c=0,a=bg(e.dV);
c<a;
c++){b.fF(d.b3(e.dV[c]),T)}for(c=0,a=bg(e.hi);
c<a;
c++){b.hj(d.b3(e.hi[c]),T)}for(c=0,a=bg(e.dk);
c<a;
c++){b.fJ(d.b3(e.dk[c]),T)}for(c=0,a=bg(e.hh);
c<a;
c++){b.hk(d.b3(e.hh[c]),T)}b.di=e.di;
b.hl=e.hl;
if(e.ex){for(c=0,a=bg(e.ex);
c<a;
c++){b.ex.push(e.ex[c].b4())}}b.hm=e.hm;
b.ev=e.ev;
return b}function hn(d){for(var c=this,b=0,a=bg(c.dV);
b<a;
b++){c.dV[b].dR=d}for(b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].dR=d}for(b=0,a=bg(c.hh);
b<a;
b++){c.hh[b].dR=al}c.ev=!d;
e5(c.dV);
e5(c.dk);
e5(c.hh)}function ho(){for(var d=this,c,b=0,a=bg(d.dV);
b<a;
b++){d.dV[b].dR=T}for(b=0,a=bg(d.hi);
b<a;
b++){d.hi[b].dR=al}for(b=0,a=bg(d.dk);
b<a;
b++){c=d.dk[b];
c.dR=(c.cZ.dR||c.c1.dR)&&!d.hp(c)}d.ev=F;
e5(d.dV);
e5(d.dk);
e5(d.hh)}function hq(){for(var c=this,b=0,a=bg(c.dV);
b<a;
b++){c.dV[b].dR=al}for(b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].dR=al}c.ev=al;
e5(c.dV);
e5(c.dk);
e5(c.hh)}function hr(b){var a=b1(this.dV,b);
if(a){b.ek=this}return a}function hs(a){if(this.type!=as){return b1(this.hi,a)}return F}function ht(a){return bO(this.hh,a)}function hu(b){if(bO(this.hh,b)){return F}var a=b1(this.dk,b);
if(a){b.ek=this}return a}function hv(c,b,a,d){if(bO(a,c[b].cZ)){d[2*b]=c[b].cZ;
d[2*b+1]=c[b].c1}else{d[2*b]=c[b].c1;
d[2*b+1]=c[b].cZ}}function createGroup(){var d=st.gl(),b,c,a;
if(!d.hw){return}a=d.dV[0].ef;
hx(T);
if(bg(d.hh)<=1){c=prompt(s("supaQ"),"")}else{c=prompt(s("multQ"),"")}hx(F);
if(c==null){return}hy();
b=a.hz(c,d.dV,d.dk,d.hh);
d.hA(b);
b.eW();
hB(aV);
return b}function hC(c){for(var e,f,g,b,d=0,a=bg(this.ex);
d<a;
d++){g=this.ex[d].dH;
b=g.x+c*g.y;
if(e==al||b>f){e=g;
f=b}g=this.ex[d].dG;
b=g.x+c*g.y;
if(b>f){e=g;
f=b}}return e}function hD(a){var d=a.dW(),h=d.b4(),g=d.b4(),f=a.cZ.c0,e=a.c1.c0,c=hE*(e.x-f.x),b=hE*(e.y-f.y);
h.cl(b,-c);
g.cl(-b,c);
this.ex.push(new hF(h,g))}function hG(){this.ex=[];
for(var b=0,a=bg(this.hh);
b<a;
b++){this.hH(this.hh[b])}}function hI(b){if($.isArray(b)){for(var c=0,a=bg(b);
c<a;
c++){this.hk(b[c])}}else{if(this.type!=ar){if(bO(this.dV,b.cZ)){this.hj(b.cZ)}else{if(bO(this.dV,b.c1)){this.hj(b.c1)}}}bV(b,this.dk);

b1(this.hh,b)}}function hJ(d){var e=this,b=[],c=0,a=bg(e.hi);
if(d&&!e.ev&&a){for(;
c<a;
c++){b.push(e.hi[c].c0)}}else{for(a=bg(e.dV);
c<a;
c++){b.push(e.dV[c].c0)}}if(e.ex){for(c=0,a=bg(e.ex);
c<a;
c++){b.push(e.ex[c].dH,e.ex[c].dG)}}bR(b,e.ff);
return b}function hK(){var a=this;
if(!a.c5||!a.c3){e_.apply(a);
a.c5.x-=hL;
a.c5.y-=hL;
a.c3.x+=hL;
a.c3.y+=hL}}function hM(){if(st.gQ()){return}switch(gR){case aP:if(gT){this.ef.hN(this);
break}default:var a=this,d,c,b=a.cY(),f=[],j,h,g=0,e=(d7?1:1/hO);
a.dT();
a.hP=0;
hQ(b.hR);
j=b.set();
j.push(b.text(2,2,"Ph").attr(aw,2).attr("fill-opacity",0.8),b.path("M2,2L4,2L5,3.5L4,5L2,5L1,3.5Z M2.5,2.5L4,2.5 M4.5,3.5L3.5,4.75 M2.5,4.75L1.5,3.5").attr(ax,"#f00").attr(az,c6).attr(ay,0.85),b.path("M1,0L2,2").attr(ax,hS).attr(az,c6));
f.push(j.transform("t"+(a.c3.x)+","+(a.c5.y+g)).data(ao,a).mousedown(bf).mouseup(eB).click(hT));
h=j.getBBox();
a.hP+=h.width*1.5*e;
g+=h.height*1.3*e;
if(a.type==aq){f.push(b.path(a.ev?"M0,4H4L2,2.5Z M0,0H4L2,1.5Z":"M0,1.5H4L2,0Z M0,2.5H4L2,4Z").transform("t"+(a.c3.x+e)+","+(a.c5.y+g)).attr(ax,hS).attr(az,c6).attr(aD,"silver").data(ao,a).mousedown(bf).mouseup(eB).click(hU))}b.hR.push(b.rect(a.c5.x,a.c5.y,a.c3.x+a.hP-a.c5.x,a.c3.y-a.c5.y).attr(hV).attr(ay,0.85).data(ao,a).mouseout(hW));
for(d=0,c=bg(f);
d<c;
d++){b.hR.push(f[d])}b.hR.insertAfter(b.hX)}}function hU(c,a,d,b){if(!b){b=this.data(ao)}hy();
b.hY(b.ev);
b.ef.fg(ba);
hZ=al;
h0(aV);
h1(T);
b.eW();
hB(aV);
return bf(c)}function h2(h){var c=this,g=c.ef,b=by(c.di),f,i,l,j,d=st.gl(),a,k;
hx(T);
if(c.type==aq){b=prompt(s("supaQ"),b)}else{b=prompt(s("multQ"),b)}hx(F);
if(b==null){return}k=be(b);
hy();
if(c.type==ar||(c.type==as&&k<h3&&k>1)){if(c.type==ar){f=c.hi.concat()}else{f=c.dV.concat()}i=c.dk.concat();
l=c.hh.concat();
if(j=c.dx){d.hN(c)}c.h4(l,i);
a=g.hz(b,f,i,l);
if(j){d.hA(a)}a.eW()}else{c.di=b;
c.hl=k;
c.eW()}hB(aV)}function hT(c,a,d,b){if(!b){b=this.data(ao)}hy();
b.h4();
hB(aV);
return bf(c)}function hW(){}function h5(j,b,g){var e=j[bg(j)-1],d=0,c=bg(e.dk),h,f,a;
for(;
d<c;
d++){h=e.dk[d];
f=(h.cZ.bJ(e)?h.c1:h.cZ);
if(bO(j,f)){continue}if(h.bJ(b)){return h}if(bO(g,f)){j.push(f);
a=h5(j,b,g);
if(a){return a}j.pop()}}}function h6(p,m){var c=this,k=c.ef,o,n,h,f,e,b,g,a,d=st.gl(),l;
if(c.type==ar){o=c.hi;
n=bZ(c.dV,o);
if(!p){p=c.hh.concat()}if((b=bg(p))==2){for(e=0;
e<b;
e++){for(h=0,f=bg(o);
h<f;
h++){a=o[h];
g=h5([a],p[e],n);
if(!g){continue}l=g.dx;
k.fo(g,T);
if(bO(n,g.cZ)){g.cZ=a}else{g.c1=a}a.dk.push(g);
g.ek=al;
k.fJ(g);
if(m){m.push(g)}if(l){d.fJ(g)}}}for(h=0,f=bg(n);
h<f;
h++){k.fp(n[h],T)}}}if(c.bJ(hZ)){hZ=al;
h0(aV)}c.dm();
while(bg(c.dV)){g=c.dV.pop();
g.ek=al;
g.dR=al;
e6(g)}while(bg(c.dk)){g=c.dk.pop();
g.ek=al;
g.dR=al;
e6(g)}c.hi=[];
e2(c,c.h7.h8);
e2(c,k.h8);
d.hN(c);
if(m){bS(m,k.dk);

bT(m,p)}}function h9(){if(!this.ef){return -1}return bP(this.ef.h8,this)}function h_(b){for(var a=bg(b)-1;
a>=0;
a--){b[a]=parseFloat(b[a])}this.ex.push(new hF(new ca(b[0],-b[1]),new ca(b[2],-b[3])))}function ia(){if(!this.ib){var b=new ca(),d,c,a=bg(this.ex);
if(a>1){for(c=0;
c<a;
c++){d=this.ex[c];
b.cl(d.dH);
b.cl(d.dG)}b.x/=a*2;
b.y/=a*2}this.ib=b}return this.ib}function ic(){return new hF(this.dH.b4(),this.dG.b4())}function hF(b,a){this.dH=b;
this.dG=a;
this.b4=ic}function ie(e,b){if(!b){b=[]}else{if(bO(b,this)){return}}b.push(this);
var d=this,c,a;
if(e==ba){d.ff=al;
d.ib=al}if(e>a8&&e<bb){d.c5=al;
d.c3=al;
for(c=0,a=bg(d.hh);
c<a;
c++){d.hh[c].fg(ba,b)}d.ig()}if(e!=a8){e=ba}for(c=0,a=bg(d.dV);
c<a;
c++){d.dV[c].fg(e,b)}for(c=0,a=bg(d.dk);
c<a;
c++){d.dk[c].fg(e,b)}b.pop()}function ih(){var a=this;
e0.apply(a);
a.dV=[];
a.hi=[];
a.dk=[];
a.hh=[];
a.hP=0;
a.getIndex=h9;
a.fg=ie;
a.h4=h6;
a.fF=hr;
a.hj=hs;
a.hp=ht;
a.fJ=hu;
a.hk=hI;
a.dW=eV;
a.dT=hK;
a.fa=hJ;
a.b4=hg;
a.cY=cY;
a.he=hM;
a.hf=hW;
a.eA=h2;
a.eW=eu;
a.ds=fj}function ii(){ih.apply(this);
this.type=aq;
this.ig=ij;
this.hY=hn}function ik(){var a=this;
ih.apply(a);
a.type=ar;
a.ex=[];
a.ez=hC;
a.il=h_;
a.hH=hD;
a.ig=hG;
a.ew=ia;
a.hY=ho}function im(){ik.apply(this);
this.type=as;
this.hY=hq}function io(e){if(this.fH){return this.fH.b4(e)}if(!e){e=new b5()}var f=this,d,c,a,b;
if(e.fv){if(d=f.cZ.dQ){c=d}if(d=f.c1.dQ){a=d}}if(!c){c=e.b3(f.cZ)}if(!a){a=e.b3(f.c1)}b=new gi(c,a,f.dl,f.dY);
bK(e,f,b);
b.dR=f.dR;
b.ek=e.b3(f.ek);
b.dx=f.dx;
return b}function ip(){if(!this.ff){this.ff=cr(this.cZ.c0,this.c1.c0)}return this.ff}function iq(f,c){if(!c){c=[]}else{if(bO(c,this)){return}}c.push(this);
if(f==ba){this.ff=al}if(f<bb){var b=this.ef,d,a,e;
if(b){for(d=0,a=bg(b.h8);
d<a;
d++){e=b.h8[d];
if(bO(e.hh,this)){e.fg(ba,c)}}}}c.pop()}function ir(){var b=this,a=b.dl;
a=(bj(a7,a)||a);
if(!b.cZ||!b.c1||b.cZ.bJ(b.c1)){return""}return"\n"+br(b.cZ.getIndex()+1,3)+br(b.c1.getIndex()+1,3)+br(a,3)+br(b.dY,3)+bq(br("0",3),3)}function it(){if(!this.g5){var d=this,c,b,a;
if(!d.cZ.h7){d.ef.iu(T)}c=d.cZ.h7.dU();
d.g5=[];
for(b=0,a=bg(c);
b<a;
b++){if(bO(c[b].dk,d)){d.g5.push(c[b])}}}return this.g5}function iv(){var a=0;
if(this.dY){a+=4}switch(this.dl){case 2:a+=2;
break;
case 3:a--;
break}return a}function iw(b){for(var d,c=0,a=bg(b.dk);
c<a;
c++){d=b.dk[c];
if(d.dl==1){d.dl=2}else{d.dl=1}e6(d)}}function ix(){if(this.dl>2){return}var k=this.dU(),l,h=[],d,a,g,f,e,c,b;
for(g=0,f=bg(k);
g<f;
g++){d=k[g];
a=bg(d.dk);
if(a%4==2){l=F;
for(e=1;
e<a;
e++){b=d.dk[e].dl;
c=d.dk[e-1].dl;

if(c+b!=3||c<1||c>2||b<1||b>2){l=T;
break}}if(!l){h.push(d)}}}if(!bg(h)){return}d=h[0];
a=bg(d.dk);
for(g=1,f=bg(h);
g<f;
g++){if(bg(h[g].dk)<a){d=h[g];
a=bg(d.dk)}}return d}function iy(e,d){if(d){var a=3*eo,c=e.cK(d.cZ.c0,T),b=e.cK(d.c1.c0,T);
if(c<a&&c<b){return d.cZ}else{if(b<a){return d.c1}}}return al}function iz(b){var c=this,a;
if(c.ek&&c.ek.type==ar){return}if(gW!=0&&gW==c.dY){a=c.cZ;
c.cZ=c.c1;
c.c1=a}else{if(gW!=0||gV!=1){c.dl=gV;
c.dY=gW}else{if(c.dY!=0){c.dY=0}else{c.dl%=3;
c.dl++}}}c.cZ.fg(bb);
c.c1.fg(bb);
if(!b){e6(c);
e6(c.cZ);
e6(c.c1)}}function iA(){if(!this.ef){return -1}return bP(this.ef.dk,this)}function iB(a){if(!a||!this.dR){return[this.cZ.c0,this.c1.c0]}return[]}function iC(b,a){if(a){if(bO(a.dk,this)){return a}}else{a=new g2(T)}a.fJ(this);
this.cZ.g3(b,a);
this.c1.g3(b,a);
return a}function iD(){var b=this,a=b.ef;
if(b.cZ.fH){a=b.cZ.fH.ef}else{if(b.fH){a=b.fH.ef}}return a}function iE(){return bh(this.cZ.c0.z,this.c1.c0.z)}function iF(a){var b=this;
return(b.cZ.bJ(a)?b.c1:b.cZ)}function iG(){return this.c1.c0.cq(this.cZ.c0)}function iH(a){return this.cZ.bJ(a)||this.c1.bJ(a)}function gi(c,b,a,d){var e=this;
e0.apply(e);
e.cZ=c;
e.c1=b;
e.dl=a;
e.dY=d;
e.dx=F;
e.getIndex=iA;
e.fg=iq;
e.iI=iz;
e.dW=ip;
e.fa=iB;
e.dU=it;
e.iJ=ix;
e.iK=iw;
e.iL=iH;
e.hb=iv;
e.g3=iC;
e.getMolecule=hc;
e.hd=ir;
e.eW=dP;
e.ds=iE;
e.b4=io;
e.gv=iF;
e.iM=iG;
e.cY=cY;
e.ee=e1;
e.c2=iD;
e.dX=cX}function iN(g){g.sort(iO);
for(var b=[],d,c=[],e,f=0,a=bg(g);
f<a;
f++){e=g[f];
d=e.dV;
if(!iP(d)&&!bX(c,d)){b.push(e);
b0(c,d)}}return b}function iP(b){for(var d,c=0,a=bg(b);
c<a;
c++){d=b[c];
if(d.f8&&d.f8.f0){return T}}return F}function iO(e,c){var f=(e.dV?bg(e.dV):0),d=(c.dV?bg(c.dV):0);
if(f<d){return -1}if(f>d){return 1}return 0}function iQ(e,c){var d=bg(e.dU()),f=bg(c.dU()),g,h;
if(d<f){return 1}if(d>f){return -1}g=bg(e.dk),h=bg(c.dk);
if(g<h){return 1}if(g>h){return -1}return 0}function iR(c){var e=this.dV,b=[],d,a,f;
if(c){bQ(b,this.dk);
bQ(b,e)}else{for(d=0,a=bg(e);
d<a;
d++){f=e[d];
b.push(f);
b0(b,f.dk);
b1(b,f.ek)}}return b}function iS(){if(!this.iT){for(var e=this,c=e.dW(),d=e.dV,b=bg(d)-1,a=d[0].c0.cq(c).ch(d[b].c0.cq(c));
b>0;
b--){a.cl(d[b].c0.cq(c).ch(d[b-1].c0.cq(c)))}if(c.eJ(a.cD(c),d[0].c0,d[1].c0)>0){a.eC(-1)}e.iU=(e.iT=a.cs()).b4();
e.iU.cl(c)}}function iV(a){var b=this;
b.iW();
return ac-b.ff.ci(a.c0,b.iU)}function iX(){for(var d=0,e=this.dk,b=bg(e),a,c=e[b-1].dl;
d<b;
d++){a=e[d].dl;
if(a==3||(a==2&&c==2)){return T}c=a}}function iY(){for(var b=0,c=this.dk,a=bg(c);
b<a;
b++){if(c[b].dl!=1){return F}}return T}function iZ(){if(!this.ff){var b=new ca(),e=this.dV,d=0,c,a;
for(c=0,a=bg(e);
c<a;
c++){b.cl(e[c].c0);

d++}if(d>1){b.x/=d;
b.y/=d;
b.z/=d}this.ff=b}return this.ff}function i0(e){var c=this,b=[],d=[],h,k,g,f,a;
for(k=0,g=bg(c.dV);
k<g;
k++){h=c.dV[k];
if(!e||!h.dR){b.push(h.c0)}b1(d,h.ek)}for(k=0,g=bg(d);
k<g;
k++){h=d[k];
if(h.ex){for(f=0,a=bg(h.ex);
f<a;
f++){b.push(h.ex[f].dH,h.ex[f].dG)}}if(!e){bR(b,h.ff);
bR(b,h.c5);
bR(b,h.c3)}}if(!e){bR(b,c.ff);
bR(b,c.c5);
bR(b,c.c3)}return b}function i1(f){if(!(f instanceof i2)){return F}var k=this.dV,a=bg(k),g,e,h,d,c,b;
if(a!=bg(f.dV)){return F}g=bP(f.dV,k[0]);
if(g==-1){return F}e=bP(f.dV,k[1]);
if(e==-1){return F}h=e-g;
if(M.abs(h)==a-1){h=-1}if(M.abs(h)!=1){return F}for(d=2,c=a;
d<c;
d++){b=(c+d*h+g)%c;
if(!k[d].bJ(f.dV[b])){return F}}return T}function i3(d,b){if(!b){b=[]}else{if(bO(b,this)){return}}if(d!=a_){b.push(this);
this.iT=al;
if(d==ba){this.ff=al}if(d!=a8){d=ba}for(var c=0,a=bg(this.dV);
c<a;
c++){this.dV[c].fg(d,b)}for(c=0,a=bg(this.dk);
c<a;
c++){this.dk[c].fg(d,b)}b.pop()}}function i4(){var a=this.dV,b=a.concat(),c;
b.sort(iQ);
c=bP(a,b[0]);
bW(a,c);
if(bP(b,a[1])>bP(b,a[bg(b)-1])){a.reverse();
bW(a,-1)}}function i2(a,c){var b=this;
b.bH=bC();
b.dV=a;
b.dk=c;
b.i5=i4;
b.dt=iR;
b.fg=i3;
b.dW=iZ;
b.iW=iS;
b.i6=iV;
b.i7=iX;
b.i8=iY;
b.fa=i0;
b.bJ=i1}function i9(b){var a=b1(this.dV,b);
if(a){b.h7=this}return a}function i_(a){return b1(this.dk,a)}function ja(){for(var b=[],c=0,a=bg(this.dV);
c<a;
c++){b.push(this.dV[c].c0.b4())}return b}function jb(c){var b=0,a=bg(this.dV);
if(bg(c)!=a){alert("Error")}for(;
b<a;
b++){this.dV[b].c0=c[b].b4()}}function jc(g,e,j){var a=bg(e),c=e[a-1],l,f,k,d,b,h;
if(a<=jd){for(d=0,b=bg(c.dk);
d<b;
d++){l=c.dk[d];
f=(c.bJ(l.cZ)?l.c1:l.cZ);
if(a>=2&&f.bJ(e[a-2])){continue}h=-1;
j[a-1]=l;
if(a>=2){h=bP(e,f)}if(h==-1){e[a]=f;
jc(g,e,j);
e.length=a}else{k=new i2(e.slice(h),j.slice(h));
b1(g,k)}}}j.length=a-1;
return g}function je(){var c=this;
if(!c.g5){c.g5=[];
for(var c=this,b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].g5=al}if(bg(c.dV)){jc(c.g5,[c.dV[0]],[])}}return c.g5}function jf(){var a=this;
eN.apply(a);
a.dV=[];
a.h8=[];
a.dk=[];
a.fg=jg;
a.dU=je;
a.dt=jh;
a.fa=ji;
a.eC=jj;
a.dT=e_;
a.jk=jl;
a.cs=jm;
a.jn=jo;
a.fF=i9;
a.fJ=i_;
a.jp=ja;
a.jq=jb}function jr(t,n,b,h,f,k){if(f){n=f.c0}if(k){b=k.c0}if(!n||!b){return F}var a=es*1.4,u=b.cK(n),o=M.min(M.round(u/a/M.cos(js*af)),jt),d,g=js,l=[],j=[],r,q,c,m,p;
if(o<=0){return F}d=n.cF(b);
if(k){if(o>1){g=M.acos(bA(u/o/a,-0.9,0.9))/af}}gh.fT();
if(o==1){if(f&&(c=f.g7(k))){if(!h){c=gh.fJ(c)}c.iI();
gh.eW();
return T}else{d+=g}}else{if(o%2){d+=g/(o-1)}}l[0]=M.cos((d-g)*af);
l[1]=M.cos((d+g)*af);
j[0]=M.sin((d-g)*af);
j[1]=M.sin((d+g)*af);
if(k){o--}if(h){m=st.gl();
if(!t.ctrlKey){m.ju()}if(f){r=f;
h=f.ef}else{r=new gf(n.b4());
h.fF(r);
m.fF(r)}}else{if(f){r=gh.fF(f)}else{r=gh.fF(new gf(n.b4()))}aV.jv.push(aV.text(b.x,b.y+30/hO,o+(f?0:1)).attr(aw,2+20/hO))
}if(!f){r.gc(gS(),T)}for(p=0;
p<o;
p++){q=r.b4();
if(p==0){q.gc(gS(),T)}q.c0.x+=a*l[p%2];
q.c0.y+=a*j[p%2];
if(!h){q=gh.fF(q)}c=new gi(r,q,1,0);
if(h){h.fF(q);
h.fJ(c);
m.fJ(c);
m.fF(q)}else{c=gh.fJ(c)}r=q}if(k){if(h){c=h.fL.jw(r,k,1,0);
m.fJ(c)}else{q=gh.fF(k);
c=gh.fJ(new gi(r,q,1,0))}}gh.eW();
return T}function jx(d){if(!d){d=new b5()}var e=this,b=new fq(),c,a;
bK(d,e,b);
b.jy=2;
for(c=0,a=bg(e.h8);
c<a;
c++){b.hA(d.b3(e.h8[c]),T)}for(c=0,a=bg(e.dk);
c<a;
c++){b.fJ(d.b3(e.dk[c]),T)}for(c=0,a=bg(e.dV);
c<a;
c++){b.fF(d.b3(e.dV[c]),T)}b.eh=d.b3(e.eh);
b.jy=1;
b.iu();
return b}function jg(e,b){if(!b){b=[]}else{if(bO(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a9){d.ff=al;
d.fm=al}if(e>a8&&e<bb){d.c5=al;
d.c3=al}if(e!=a_){if(e!=a8){e=ba}for(c=0,a=bg(d.dV);
c<a;
c++){d.dV[c].fg(e,b)}for(c=0,a=bg(d.dk);
c<a;
c++){d.dk[c].fg(e,b)}if(d.h8){for(c=0,a=bg(d.h8);
c<a;
c++){d.h8[c].fg(e,b)}}if(d.jz){for(c=0,a=bg(d.jz);
c<a;
c++){d.jz[c].fg(e,b)}}if(d.g5){for(c=0,a=bg(d.g5);
c<a;
c++){d.g5[c].fg(e,b)}}}if(d.fL){d.fL.fg(e,b)}else{if(d.ef){d.ef.fg(e,b)}}b.pop()}function jA(f){if(!bg(this.dV)){return}this.dT();
if(f.x>this.c5.x&&f.x<this.c3.x){var e=this,c=new jB(e),d,a,b;
if(!e.jz){e.iu()}if(bg(e.dV)<2){return}for(d=0,a=bg(e.jz);
d<a;
d++){b=e.jz[d];
b.dT();
if(0.5*(b.c5.x+b.c3.x)>f.x){c.jC.push(b)}else{c.jD.push(b)}}return c}}function jj(d,b){if(b){b=this.dW()}for(var e=this.fa(),c=0,a=bg(e);
c<a;
c++){e[c].eC(d,b)}}function jm(){if(bg(this.dV)>1){var h=this,e=0,g=0,d,a,c,f,b;
if(a=bg(h.dk)){for(d=0;
d<a;
d++){f=h.dk[d];
e+=f.cZ.c0.cK(f.c1.c0);
g++}}else{for(d=0,a=bg(h.dV);
d<a;
d++){b=h.dV[d];
for(c=0;
c<d;
c++){e+=b.c0.cK(h.dV[c].c0);
g++}}}if(e>0){h.eC(c4*g/e)}}this.dT()}function jE(c,d){var b=c-this.c5.x,a=bx(d)-0.5*(this.c5.y+this.c3.y);
this.cl(b,a)}function jF(d,b){var e=this,c,a;
if(e.bJ(d)){return}for(c=0,a=bg(d.dV);
c<a;
c++){e.fF(d.dV[c])}for(c=0,a=bg(d.dk);
c<a;
c++){e.fJ(d.dk[c])}for(c=0,a=bg(d.h8);
c<a;
c++){e.hA(d.h8[c])}if(e.g5&&d.g5){bQ(e.g5,d.g5)}else{e.jG()}e.iu();
if(b||eg=="tmpl"){e.eh=d.eh}e.fg(ba)}function jH(c,b){var d=this,a;
if(b1(d.dV,c)){c.ef=d;
c.dS=al;
c.e7=al;
if(!b){e6(c);
a=d.jI();
a.fg(a_);
if(a.fH){a.fH.fg(a_)}}return T}return F}function jJ(h,c,g,m){var u=this,l,p,n,o,t,d,f,e=[],k=[],a=[],q=[],b,r=bg(m);
if(r<=1){l=new ii();
if(r){l.hj(m[0].cZ.dx?m[0].cZ:m[0].c1)}}else{if((n=be(h))<h3&&n>1){l=new ik();
u.fo(m[0],T);
u.fo(m[1],T);
bQ(e,c);
bQ(k,g);
bT(k,m);
hv(m,0,e,a);
hv(m,1,e,a);
for(p=0;
p<n;
p++){if(p>0){b=new b5();
q[p]=b}for(o=0,t=bg(k);
o<t;
o++){d=k[o];
if(p==0){l.fJ(d);
b1(e,d.cZ);
b1(e,d.c1)}else{f=b.b3(d);
l.fJ(f);
u.fJ(f,T)}}for(o=0,t=bg(e);
o<t;
o++){d=e[o];
if(p==0){l.fF(d);
l.hj(d)}else{f=b.b3(d);
l.fF(f);
u.fF(f,T)}}}for(p=0;
p<=n;
p++){if(p==0){f=new gi(a[1],a[0],m[0].dl,m[0].dY);
m[0]=f}else{if(p==n){f=new gi(q[p-1].b3(a[2]),a[3],m[1].dl,m[1].dY);

m[1]=f}else{if(p==1){f=new gi(a[2],q[p].b3(a[0]),m[1].dl,0)}else{f=new gi(q[p-1].b3(a[2]),q[p].b3(a[0]),m[1].dl,0)}}}l.fJ(f);
u.fJ(f,T)}}else{l=new im();
if(n){l.hm=""}else{l.hm="HT"}}}l.hk(m);
if(l.type!=ar){for(o=0,t=bg(g);
o<t;
o++){l.fJ(g[o])}for(o=0,t=bg(c);
o<t;
o++){l.fF(c[o])}}l.di=h;
l.hl=n;
l.ig();
u.hA(l);
l.hY(T);
return l}function jK(c,b){if(b1(this.h8,c)){c.ef=this;
var a;
if(c.dV[0]&&(a=c.dV[0].h7)){c.h7=a;
b1(a.h8,c)}c.dS=al;
c.e7=al;
if(!b){e6(c)}return T}return F}function jL(d,c){if(d.bJ(c)){return}e6(c);
this.fg(bb);
if(bO(this.dV,c)){e2(d,this.dV)}else{bU(this.dV,d,c);
e2(d)}var f=this,a,e,b;
for(a=bg(d.dk)-1;
a>=0;
a--){e=d.dk[a];
e6(e);
if(e.cZ.bJ(d)){e.cZ=c;
e6(e.c1)}else{if(e.c1.bJ(d)){e.c1=c;
e6(e.cZ)}}b1(c.dk,e)}c.fg(bb);
if(!d.dI){b=st.gl();
bU(b.dV,d,c);
c.dx=d.dx}if(d.bJ(f.eh)){f.eh=c}f.jG();
f.iu();
if(d.bJ(ej)||c.bJ(ej)){h1()}}function jM(d,h){var g=this,b,f,c=st.gl(),e,a=d.h7;
g.fg(ba);
e2(d,g.dV);
for(b=bg(d.dk)-1;
b>=0;
b--){f=d.dk[b];
if(f){g.fo(f,h)}}g.jN(d);
bV(d,c.dV);
if(d.bJ(g.eh)){g.eh=al}if(g){if(a){bV(d,a.dV);
if(!bg(a.dV)){e2(a,g.jz)}}if(!bg(g.dV)&&(e=g.fL)){e.jO(g)}}if(d.bJ(ej)){ej=al;
h1()}}function jP(d){var e=this;
e.fg(ba);
d.dm();
e2(d,e.h8);
var a,c,b=st.gl();
for(a=bg(d.dk)-1;
a>=0;
a--){c=d.dk[a];
if(c){e.fo(c)}}for(a=bg(d.dV)-1;
a>=0;
a--){c=d.dV[a];
if(c){e.fp(c)}}e.jN(d);
bV(d,b.h8);
if(d.bJ(hZ)){hZ=al;
h1()}}function jQ(e,d){var f=this,b=e.cZ,a=e.c1,c;
if(!b||!a){return F}if(b1(f.dk,e)){e.ef=f;
e.dS=al;
e.e7=al;
b1(e.cZ.dk,e);
b1(e.c1.dk,e);
if(f.jy==1){c=e.cZ.h7;
if(!c){if(!e.c1.h7){f.iu()}else{c=e.c1.h7;
e.h7=c;
e.cZ.h7=c;
b1(c.dk,e);
b1(c.dV,e.cZ)}}else{if(!e.c1.h7){e.h7=c;
e.c1.h7=c;
b1(c.dk,e);
b1(c.dV,e.c1)}else{if(!c.bJ(e.c1.h7)){f.iu()}else{f.jG();
b1(c.dk,e)}}}}e.cZ.fg(bb);
e.c1.fg(bb);
if(!d){e5(e.cZ.dk);
e5(e.c1.dk);
e6(e.cZ);
e6(e.c1)}return T}return F}function jR(c,b){if(bO(this.dk,b)){e2(c,this.dk)}else{bU(this.dk,c,b);
e2(c)}if(bO(c.cZ.dk,b)){bV(c,c.cZ.dk)}else{bU(c.cZ.dk,c,b)}if(bO(c.c1.dk,b)){bV(c,c.c1.dk)}else{bU(c.c1.dk,c,b)}e6(b);
c.cZ.fg(bb);
c.c1.fg(bb);
e6(c.cZ);
e6(c.c1);
e5(c.cZ.dk);
e5(c.c1.dk);
this.fg(bb);
var a=st.gl();
bU(a.dk,c,b);
b.dx=c.dx;
this.jG();
this.iu()}function jS(){for(var c=this,b=0,a=bg(c.dk);
b<a;
b++){c.dk[b].g5=al}for(b=0,a=bg(c.dV);
b<a;
b++){c.dV[b].g5=al}if(c.jz){for(b=0,a=bg(c.jz);
b<a;
b++){c.jz[b].g5=al}}c.g5=al}function jT(f,h){var g=this,d=st.gl(),c,a,e,b=f.cZ.h7;
if(!b){b=f.c1.h7}e2(f,g.dk);
bV(f,f.cZ.dk);
bV(f,f.c1.dk);
f.cZ.fg(bb);
f.c1.fg(bb);
e6(f.cZ);
e6(f.c1);
e5(f.cZ.dk);
e5(f.c1.dk);
g.fg(ba);
if(h){if(b){bV(f,b.dk)}}else{g.iu();

g.jG()}g.jN(f);
d.fo(f);
for(c=0,a=bg(g.h8);
c<a;
c++){e=g.h8[c];
if(bO(e.hh,f)){if(e.type!=aq){bV(f,e.hh)}else{e.h4()}}}}function jU(e,b){e.h7=b;
b.dV.push(e);
if(b1(b.h8,e.ek)){e.ek.h7=b}var c,a,d;
for(c=0,a=bg(e.dk);
c<a;
c++){d=e.dk[c];
b1(b.dk,d);
if(!d.cZ.h7){jU(d.cZ,b)}else{if(!d.c1.h7){jU(d.c1,b)}}}}function jV(d){if(d||gh.fU()){var e=this;
e.jz=[];
for(var b,c=0,a=bg(e.dV);
c<a;
c++){e.dV[c].h7=al}for(c=0,a=bg(e.dV);
c<a;
c++){if(!e.dV[c].h7){b=new jf();
e.jz.push(b);
b.ef=e;
jU(e.dV[c],b)}}}}function eq(b,a,c){if(c){return b.c0.cF(a.c0,c.c0)}else{return b.c0.cF(a.c0)}}function jW(b,a,c){if(c){return b.c0.ci(a.c0,c.c0)}else{return b.c0.ci(a.c0)}}function gg(l,q,n,m){var o,b=es*1.4,c,d,r,p=[],h,g,f,a=3*jX,k=l.c0;
if(n){n.z=k.z}if(n&&m&&m.ctrlKey){if(m.shiftKey){return n}o=k.cF(n);
c=cT(k,o,b)}else{if(n&&m&&m.shiftKey){b=k.cK(n)}if((f=bg(l.dk))>1&&f<4&&q==1){for(h=0;
h<f;
h++){g=l.dk[h];
if(g.dl>1){h=f+1;
break}r=g.gv(l);
for(g=h+1;
g<f;
g++){if(M.abs(ai-k.ci(r.c0,l.dk[g].gv(l).c0))>6){h=f+1;
break}}}if(h==f){h=l.dk[0].gv(l).c0;
g=l.dk[1].gv(l).c0;
c=k.eG(h,g,b,0.5*ai);
r=k.eG(h,g,b,-0.5*ai);
f=l.ef;
if(n){h=n.cK(c);
g=n.cK(r)}else{h=f.jk(c);
g=f.jk(r)}if(g<h||(g==h&&k.eH(r)>k.eH(c))){c=r}f.jY(l,c)}}if(!c){o=l.gj(q,n);
do{c=cT(k,o,b);
d=l.ef.fL.jZ(c,a,a);
if(!d||!bg(d)){break}for(h=0;
h<bg(d);
h++){p.push(new gp(l,d[h]))}o=l.gy(n,p)}while(bg(p)<10);
if(f>2||!l.g8()){a=0;
for(h=f-1;
h>=0;
h--){d=l.dk[h].gv(l);
a+=(d.c0.z-k.z)/(M.abs(o-eq(l,d))+1)}c=cS(k,o,(a>0?-30:30),b)}}}return c}function j0(c,a,b){if(bx(b)!=0){return ap+c+br("1",3)+S+br(a+1,3)+S+br(M.round(b),3)}else{return""}}function j1(){var c=this,f,e,d,b,k,g,h=[],a=ab+"\n"+Number(new Date())+"\n"+navigator.userAgent+"\n"+br(bg(c.dV),3)+br(bg(c.dk),3);
if(eg=="rxn"){a+="  0  0  0  0  0  0  0  0  0 V2000"}else{a+="  0  0  0  0  0  0  0  0999 V2000"}for(f=0,e=bg(c.dV);
f<e;
f++){a+=c.dV[f].hd()}for(f=0,e=bg(c.dk);
f<e;
f++){a+=c.dk[f].hd()}for(f=0,e=bg(c.dV);
f<e;
f++){a+=j0("CHG",f,c.dV[f].ed());
a+=j0("RAD",f,c.dV[f].dg);
a+=j0("ISO",f,c.dV[f].dh)}if(eg=="tmpl"&&c.eh){a+=ap+"ATT"+br("1",3)+S+br(c.eh.getIndex(),3)+S+aZ.val()+S+a0.val()}for(f=0,e=bg(c.h8);
f<e;
f++){k=c.h8[f];
if(!(b=bg(k.dV))){continue}a+=ap+"STY"+br("1",3)+S+br(f+1,3)+S+k.type;
if(k.type==as){a+=ap+"SCN"+br("1",3)+S+br(f+1,3)+S+k.hm}for(d=0;
d<b;
d++){a+=(d%15?"":ap+"SAL "+br(f+1,3)+br(M.min(b-d,15),3))+br((k.dV[d].getIndex()+1),4)}if(k.type==ar){for(d=0,b=bg(k.hi);
d<b;
d++){a+=(d%15?"":ap+"SPA "+br(f+1,3)+br(M.min(b-d,15),3))+br((k.hi[d].getIndex()+1),4)}}if(k.ex){for(d=0,b=bg(k.ex);
d<b;
d++){g=k.ex[d];
a+=ap+"SDI "+br(f+1,3)+br(4,3)+f4(g.dH.x)+f4(-g.dH.y)+f4(g.dG.x)+f4(-g.dG.y)}}for(d=0,b=bg(k.hh);
d<b;
d++){a+=(d%15?"":ap+"SBL "+br(f+1,3)+br(M.min(b-d,15),3))+br((k.hh[d].getIndex()+1),4)}a+=ap+"SMT "+br(f+1,3)+S+by(k.di);
if(k.ev){h.push(k)}}for(d=0,b=bg(h);
d<b;
d++){a+=(d%15?"":ap+"SDS EXP"+br(M.min(b-d,15),3)+S)+br(h[d].getIndex()+1,3)}for(f=0,e=bg(c.j2);
f<e;
f++){a+="\n"+c.j2[f]}a+=ap+"END\n";
return a}function j3(t){var h=new fq(),a=t.split("\n"),p=0,m=bg(a),o,u,n,y,q={},c,d,b,x,w,f,g,l,v;

h.jy=0;
do{if(p<m){p++}else{return al}}while(a[p]!=al&&!bo(a[p],"V2000"));
c=bl(a[p],[3,3]);
for(o=0,u=be(c[0]);
o<u;
o++){p++;
d=bl(a[p],[10,10,10,1,3,2,3,3,3,3,3,3,3,3,3,3]);
b=new gf(new ca(parseFloat(d[0]),-parseFloat(d[1]),parseFloat(d[2])));
l=be(d[6]);
if(l!=0){b.f7=4-l}b.gn(d[4]);
b.dj=be(d[8])-1;
if(b.dj<0){b.dj=al}b.f_=be(d[10]);
if(b.f_>=15){b.f_=0}else{if(b.f_==0){b.f_=al}}if(d[5]!="0"&&b.f8){b.dh=M.round(b.f8.m)+be(d[5])}h.fF(b)}for(o=0,u=be(c[1]);
o<u;
o++){p++;
d=bl(a[p],[3,3,3,3,3,3,3]);
x=h.dV[be(d[0])-1];
w=h.dV[be(d[1])-1];
if(!x||!w||x.bJ(w)){continue}l=be(d[2]);
if(a7[l]!=al){l=a7[l]}f=new gi(x,w,l,be(d[3]));
h.fJ(f)}while(p<m){p++;
d=bm(a[p]);
switch(d[1]){case"CHG":u=bx(be(d[2]));
try{for(o=0;
o<u;
o++){l=be(d[2*o+4]);
if(!isNaN(l)){b=h.dV[be(d[2*o+3])-1];
b.f7=l}}}catch(r){}break;
case"ISO":u=bx(be(d[2]));
try{for(o=0;
o<u;
o++){l=be(d[2*o+4]);
if(!isNaN(l)){b=h.dV[be(d[2*o+3])-1];
b.dh=l}}}catch(r){}break;
case"RAD":u=bx(be(d[2]));
try{for(o=0;
o<u;
o++){l=be(d[2*o+4]);
if(!isNaN(l)){b=h.dV[be(d[2*o+3])-1];
b.dg=l}}}catch(r){}break;
case"ATT":try{h.eh=h.dV[be(d[3])];
h.aZ=by(d[4]).split(",");
h.a0=by(d[5])}catch(r){}break;
case"STY":u=3+2*bx(be(d[2]));
try{for(o=3;
o<u;
o+=2){l=d[o+1].toUpperCase();
v=be(d[o]);
if(l=="GEN"){l=as}if(l==aq){g=new ii()}else{if(l==ar){g=new ik()}else{if(l==as){g=new im()}else{continue}}}h.hA(g);
q[v]=g}}catch(r){}break;
case"SCN":u=3+2*bx(be(d[2]));
try{for(o=3;
o<u;
o+=2){v=be(d[o]);
g=q[v];
if(g.type==as){g.hm=d[o+1].toUpperCase()}}}catch(r){}break;
case"SDI":v=be(d[2]);
try{g=q[v];
if(g&&g.il){g.il(d.slice(4))}}catch(r){}break;
case"SAL":v=be(d[2]);
try{g=q[v];
if(g){for(o=4,u=bg(d);
o<u;
o++){g.fF(h.dV[be(d[o])-1])}}}catch(r){}break;
case"SPA":v=be(d[2]);
try{g=q[v];
if(g){for(o=4,u=bg(d);
o<u;
o++){g.hj(h.dV[be(d[o])-1])}}}catch(r){}break;
case"SBL":v=be(d[2]);
try{g=q[v];
if(g){for(o=4,u=bg(d);
o<u;
o++){f=h.dk[be(d[o])-1];
g.hk(f)}}}catch(r){}break;
case"SDS":l=a[p].substr(13);
try{for(o=0,u=bg(l);
o<u;
o+=3){v=be(bk(l.substr(o,3)));
g=q[v];
if(g){g.hY(F)}}}catch(r){}break;
case"SMT":v=be(d[2]);
try{g=q[v];
if(g){g.di=d[3].replace(/^[\s\^]+|[\s\^]+$/g,"");
g.hl=be(d[3]);
if(g.hl){g.hm=""}}}catch(r){}break;
case"END":p=m;
break;
default:h.j2.push(a[p])}}for(p=0,m=bg(h.dV);
p<m;
p++){b=h.dV[p];
b.gK();
if(b.f7==b.gE){b.f7=al}}for(p=0,m=bg(h.h8);
p<m;
p++){g=h.h8[p];
for(o=0,u=bg(g.dV);
o<u;
o++){b=g.dV[o];
for(n=0,y=bg(b.dk);
n<y;
n++){g.fJ(b.dk[n])}}if(g.type==aq&&!bg(g.hh)){b0(g.hi,g.dV)}if(g.type!=ar){for(o=0,u=bg(g.hi);
o<u;
o++){b=g.hi[o];
for(n=0,y=bg(b.dk);
n<y;
n++){f=b.dk[n];
if(!bO(g.dV,(f.cZ.bJ(b)?f.c1:f.cZ))){bV(f,g.dk)}}}}if(g.ev==al){g.hY(T)}}h.jy=1;
h.iu();
return h}function j4(){if(!this.g5){if(!this.jz){this.iu()}this.g5=[];
for(var b=0,a=bg(this.jz);
b<a;
b++){bQ(this.g5,this.jz[b].dU())}}return this.g5}function j5(){var a=this;
if(a.d2){return a.d2}if(a.fL){return a.fL.cY()}}function jh(b){var c=this,a;
if(!c.fm){a=[];
bQ(a,c.dk);
bQ(a,c.dV);
bQ(a,c.h8);
c.fm=a}return c.fm}function jl(f,a){for(var d=0,e,b=this.dV,c=bg(b)-1;
c>=0;
c--){e=j6-b[c].c0.cK(f,a);
if(e>0){d+=j7*e*e}}return d}function j8(c,h){var e,b,g,d=h,a=this.jk(h,T),f=0;

if(a>0){e=h.b4();
b=h.b4();
while(f++<10){e.eD(af,c.c0);
if((g=this.jk(e,T))<a){a=g;
d=e.b4()}b.eD(-af,c.c0);
if((g=this.jk(b,T))<a){a=g;
d=b.b4()}if(a==0){break}}f=h.cK(d);
h.x=d.x;
h.y=d.y}return f}function j9(){var d=this,c,b,a,e;
if(!d.c5||!d.c3){e_.apply(d);
for(b=0,a=bg(d.h8);
b<a;
b++){c=d.h8[b];
if(c.type==aq){e=0.4*j_*bg(c.di);
fd(d,c.ff.y-e);
fd(d,c.ff.y+e)}}}}function ji(e){var h=this,b=[],g,d,a,c,f;
for(d=0,a=bg(h.dV);
d<a;
d++){g=h.dV[d];
if(!e||!g.dR){b.push(g.c0)}}if(!e){if(h.jz){for(d=0,a=bg(h.jz);
d<a;
d++){bR(b,h.jz[d].ff)}}if(h.g5){for(d=0,a=bg(h.g5);
d<a;
d++){bR(b,h.g5[d].ff)}}}for(d=0,a=bg(h.h8);
d<a;
d++){g=h.h8[d];
if(g.ex){for(c=0,f=bg(g.ex);
c<f;
c++){b.push(g.ex[c].dH,g.ex[c].dG)}}if(!e){bR(b,g.ff);
bR(b,g.c5);
bR(b,g.c3)}else{if(g.type==aq){bR(b,g.dW())}}}if(!e){bR(b,h.ff);
bR(b,h.c5);
bR(b,h.c3)}return b}function ka(b,a){this.gq=b;
this.kb=a}function kc(){for(var b=[],e,d,f,c=0,a=bg(this.dV);
c<a;
c++){e=this.dV[c];
if((d=e.f8)&&d.f1){f=d.f1+e.ed()-e.gz();
if(f>0){b.push(new ka(e,f))}}}return b}function kd(){if(!this.fL){return -1}return bP(this.fL.fP,this)}function hc(){return this.ef}function ke(){return(this.fL?this.fL:this)}function jB(a){this.ef=a;
this.jD=[];
this.jC=[]}function fq(){var a=this;
eN.apply(a);
a.dV=[];
a.h8=[];
a.dk=[];
a.j2=[];
a.jy=1;
a.iu=jV;
a.dU=j4;
a.fg=jg;
a.jG=jS;
a.j1=j1;
a.kf=kc;
a.eC=jj;
a.dT=j9;
a.jk=jl;
a.jY=j8;
a.cs=jm;
a.jE=jE;
a.fF=jH;
a.hA=jK;
a.hz=jJ;
a.gm=jL;
a.fp=jM;
a.hN=jP;
a.fJ=jQ;
a.kg=jR;
a.fo=jT;
a.ft=jF;
a.kh=jA;
a.jn=ki;
a.dt=jh;
a.jN=fl;
a.fa=ji;
a.getIndex=kd;
a.b4=jx;
a.jI=ke;
a.ee=e1;
a.cY=j5}function kj(d){if(!d){d=new b5()}var e=this,b=new fs(e.d2),c,a;
bK(d,e,b);
for(c=0,a=bg(e.fP);
c<a;
c++){b.ft(e.fP[c].b4(d))}for(c=0,a=bg(e.kk);
c<a;
c++){b.kl(e.kk[c].b4(d),T)}b.km=e.km;
if(e.fx){b.fx=e.fx.b4(d);
b.fx.fL=b}b.kn=e.kn.b4(d);
return b}function ko(b){if(!b){b=new b5()}var c=this,a=new kp(c.c0.x,c.c0.y);
bK(b,c,a);
a.dx=c.dx;
return a}function kq(b){if(!b){b=new b5()}var c=this,a=new fB(c.dH.b4(),c.dG.b4());
bK(b,c,a);
a.dx=c.dx;
a.fL=b.b3(c.fL);
return a}function kr(){return cr(this.dH,this.dG)}function ks(a){a.dm();
return bV(a,this.fP)}function kt(a,c,b){var d=this;
if(eg=="rxn"||!bg(d.fP)){if(b1(d.fP,a)){a.fL=d;
if(c){d.ku()}}}else{d.fP[0].ft(a,b)}}function kv(){this.kw();

this.kx();
this.ky()}function kz(){if(eg!="rxn"){return}var c=this,f,e,g,a=c.fP,b,d,h,k,j;
for(f=bg(a)-1;
f>=0;
f--){b=a[f];
if(!bg(b.dV)){this.jO(b)}}a.sort(kA);
if(c.fx){g=c.fx.dW()}for(f=0,e=bg(a)-1;
f<e;
f++){b=a[f];
k=a[f+1];
d=b.dW();
j=k.dW();
if(g&&g.x>d.x&&g.x<j.x){c.km=f+1}else{h=c.kB(d);
if(!h||h.c0.x>=j.x){b.dT();
k.dT();
c.kC(0.5*(b.c3.x+k.c5.x),0.5*(j.y+d.y))}}}}function kD(l,k,d){if(l&&k){if(d){var c=this,b=l.dW(),j=k.dW(),e=M.min(b.x,j.x),a=M.max(b.x,j.x),g,f,h;
for(g=bg(c.kk)-1;
g>=0;
g--){f=c.kk[g].c0;
if(e<f.x&&f.x<a){c.kE(c.kk[g])}}if(c.fx){h=c.fx.dW();
if(e<h.x&&h.x<a){c.kF()}}}l.ft(k);
bV(k,this.fP);
this.kx()}}function kG(){var a=this,j=a.kk.concat(),e,g,c,f,b={},d={},h;
if(a.fx){j.push(a.fx)}j.sort(kH);
for(e=bg(j)-1;
e>=0;
e--){g=j[e];
f=g.dW();
h=this.kI(f);
if(!(h=this.kI(f))&&g instanceof kp){a.kE(g,T)}else{b[g.bH]=h;
if(!(h=this.kJ(f))&&g instanceof kp){a.kE(g,T)}d[g.bH]=h}}for(e=bg(j)-2;
e>=0;
e--){g=j[e];
c=j[e+1];
h=b[g.bH];
if(h&&h.bJ(b[c.bH])&&d[g.bH]&&d[g.bH].bJ(d[c.bH])){if(c instanceof kp){a.kE(c,T)}else{a.kE(g,T)}}}}function kK(f,j,g){for(var a,h=an,b,c,e=0,d=bg(this.fP);
e<d;
e++){b=this.fP[e].dW();
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cK(b,T);
if(c<h){a=this.fP[e];
h=c}}}return a}function kL(a){return this.kM(a,-1,0)}function kN(a){return this.kM(a,1,0)}function kO(f,j,g){for(var a,h=an,b,c,e=0,d=bg(this.kk);
e<d;
e++){b=this.kk[e].c0;
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cK(b,T);
if(c<h){a=this.kk[e];
h=c}}}return a}function kP(a){return this.kQ(a,-1,0)}function kR(a){return this.kQ(a,1,0)}function kS(c){var k=c.ef,l=new fq(),b,h,m,g,f,e,a,d=st.gl();
this.fP.splice(bP(this.fP,k)+1,0,l);
l.fL=this;
l.jz=[];
this.kx();
for(g=0,f=bg(c.jC);
g<f;
g++){b=c.jC[g];
for(e=0,a=bg(b.dV);
e<a;
e++){h=b.dV[e];
bV(h,k.dV);
if(!bO(l.dV,h)){l.fF(h)}}for(e=0,a=bg(b.dk);
e<a;
e++){m=b.dk[e];
bV(m,k.dk);
if(!bO(l.dk,m)){l.fJ(m)}}bV(b,k.jz);
b1(l.jz,b);
delete k.g5;
k.fg(ba);
d.fg(bb)}}function kT(e,b){var c=this,d,a;
if(!b){d=c.kI(e.c0),a=c.kJ(e.c0);
c.gk(d,a,F)}e.dm();
e2(e,c.kk);
c.jN(e);
if(!b){c.kx()}}function kU(c,a){if(eg!="rxn"){return}var b=this;
b.kk.push(c);
c.fL=b;
if(!a){e6(c);
b.fg(a_)}return T}function kV(b,a,d){var c;
if(b instanceof ca){c=new kp(b.x,b.y)}else{c=new kp(b,a)}this.kl(c,d);
if(!d){this.kW(c.c0)}return c}function dB(b,a,d,c){if(!c){c=this.data(ao)}kX=c;
switch(gR){case aK:case aL:case aG:case aH:c.da.attr("cursor","move");
break;
case aP:if(gT){c.fL.kE(c);
kX=al;
kY=T}break}}function dC(b,a,d,c){kX=al}function dK(c,a,d,b){if(!b){b=this.data(ao)}kZ=b;
switch(gR){case aK:case aL:case aG:case aH:b.da.attr("cursor","move");
break;
case aP:if(gT){b.fL.kF(b);
kZ=al}break}}function dL(c,a,d,b){kZ=al}function k0(h){for(var f=this,e,b,g=an,d,c=0,a=bg(f.fP);
c<a;
c++){b=f.fP[c].kh(h);

if(b){d=h.cK(f.fP[c].dW(),T);
if(d<g){e=b;
g=d}}}if(e){f.k1(e)}f.kx()}function k2(b){var c=this,a=c.fx;
if(!a){return F}if(b){c.kC(cr(a.dH,a.dG))}c.jN(a);
a.dm();
delete c.fx}function k3(b,a,c){if(eg!="rxn"){return}if(!(b instanceof ca)){b=new ca(b,0)}if(!a){a=b.b4();
a.x+=k4}this.fC(new fB(b,a));
if(!c){this.kW(cr(b,a))}}function k5(a){if(eg!="rxn"){return}var b=this;
if(b.fx){b.kF(T)}b.fx=a;
b.fx.fL=this;
b.fg(a_)}function k6(d,c,b,e){if(b==al){b=gV}if(e==al){e=gW}var a=d.ef,f;
if(!this.bJ(a.fL)){return}if(!a.bJ(c.ef)){this.gk(a,c.ef,T)}f=new gi(d,c,b,e);
a.fJ(f);
return f}function k7(m,g){var e=m.k8,a=m.k9,h=e.ef,b=m.k_,d,c,f,k,j,l,i;
if(!this.bJ(h.fL)){return}d=(m.eI?a.c1:a.cZ);
c=(m.eI?a.cZ:a.c1);
if(e.dl!=2||a.dl!=2){k=e.iJ();
if(k||e.dl!=a.dl){j=a.iJ();
if(e.dl!=2&&k){e.iK(k)}if(a.dl!=2&&j){a.iK(j)}}}if(!e.cZ.h7.bJ(a.cZ.h7)){b.eD((eq(e.cZ,e.c1)-eq(d,c))*af,a.dW());
b.cl(e.cZ.c0.cq(d.c0));
l=e.cZ.c0.cK(e.c1.c0);
i=d.c0.cK(c.c0);
if(l>0&&i>0&&l!=i){b.eC(l/i,e.cZ.c0)}}if(!h.bJ(a.ef)){if(b){bV(a.ef,b.fP)}this.gk(h,a.ef,T)}f=(g[e.cZ]||g[e.c1]||g[d]||g[c]);
if(f==2||(!f&&e.hb()+e.cZ.hb()+e.c1.hb()>a.hb()+d.hb()+c.hb())){h.gm(d,e.cZ);
g[e.cZ]=2;
h.gm(c,e.c1);
g[e.c1]=2;
h.kg(a,e)}else{h.gm(e.cZ,d);
g[d]=1;
h.gm(e.c1,c);
g[c]=1;
h.kg(e,a)}if(b){b.fo(a);
b.fp(d);
b.fp(c)}}function la(d,a,h){var i=d.k8,e=d.k9,j=i.ef,f=d.k_,c,l;
if(!this.bJ(j.fL)){return}if(a){if(!i.h7){j.iu()}if(!i.h7.bJ(e.h7)){f.cl(i.c0.cq(e.c0));
var b=i.gI(i.f6()),g=i.gz(),m=e.gI(e.f6()),k=e.gz();
if(b<k&&m<g&&(g>1||k>1)){fK(f.dV,T);
c=new gf(gg(i,1));
l=new gi(i,c,1,0);
j.fF(c);
j.fJ(l);
h=1;
i=c;
fK(f.dV,F);
f.cl(c.c0.cq(e.c0))}else{if(m<g){h=2}else{if(b<k){h=1}}}}}if(!j.bJ(e.ef)){if(f){bV(e.ef,f.fP)}this.gk(j,e.ef,T)}if(h==2||(!h&&i.hb()>e.hb())){j.gm(e,i)}else{j.gm(i,e)}if(f){f.fp(e)}}function kA(d,c){d.dT();
c.dT();
if(d.c5.x<c.c5.x){return -1}if(d.c5.x>c.c5.x){return 1}if(d.c5.y<c.c5.y){return -1}if(d.c5.y>c.c5.y){return 1}return 0}function kH(d,c){var e=d.dW(),f=c.dW();
if(e.x<f.x){return -1}if(e.x>f.x){return 1}if(e.y<f.y){return -1}if(e.y>f.y){return 1}return 0}function lb(){if(eg!="rxn"){return}this.km=0;
var d=this,c,b,a;
if(d.fx){c=d.fx.dW()}for(b=0,a=bg(d.fP);
b<a;
b++){if(c&&d.fP[b].dW().x>=c.x){break}d.km++}}function lc(){if(!this.fP||bg(this.fP)==0){return""}if(eg=="rxn"){for(var d=this,a,b,c=bg(d.fP)-1;
c>=0;
c--){if(!bg(d.fP[c].dV)){d.fP.splice(c,1)}}d.fP.sort(kA);
d.kx();
b="$RXN\n\n"+ab+S+Number(new Date())+"\n\n"+br(d.km,3)+br(bg(d.fP)-d.km,3)+"\n";
for(c=0,a=bg(d.fP);
c<a;
c++){b+="$MOL\n";
b+=d.fP[c].j1()}return b}else{return this.fP[0].j1()}}function ld(a){this.le(a);
this.eW()}function lf(m){m=bp(m);

if(bn(m,"$RXN")){var c=this,k=m.split("$MOL\n"),h=k.shift(),g,f,o,d,a,l,n,j,b=0,e=0;
for(g=0,f=bg(k);
g<f;
g++){k[g]=unescape(k[g])}o=h.split("\n");
d=unescape(o[bg(o)-2]);
c.km=be(d.substr(0,3));
a=be(d.substr(3,3));
l=be(d.substr(6,3));
if(l>0){n=k.splice(c.km+a);
k.splice(c.km,0,n);
c.km+=l}for(g=0,f=bg(k);
g<f;
g++){j=j3(k[g]);
if(!bg(j.dV)){if(e<c.km){c.km--}continue}if(e==c.km){c.lg(b,al,T);
b+=k4+d3}else{if(e>0){c.kC(b,0,T);
b+=dw+d3}}j.cs();
j.jE(b);
c.ft(j);
b+=(j.c3.x-j.c5.x)+d3;
e++}if(g==c.km){c.lg(b)}}else{this.km=1;
j=j3(m);
j.cs();
this.ft(j);
if(eg=="tmpl"&&this.d2==aV){if($.isArray(j.aZ)){aZ.val(j.aZ.join(","))}if(j.a0!=al){a0.val(j.a0)}}}}function lh(){var d=this;
if(!d.c5||!d.c3){d.c5=new ca(an,an);
d.c3=new ca(-an,-an);
for(var c=0,b=bg(d.fP);
c<b;
c++){var a=d.fP[c];
a.dT();
fb(d,a.c3);
fb(d,a.c5)}}}function li(d,a){if(!a){a=[]}else{if(bO(a,this)){return}}a.push(this);
if(d>a8&&d<bb&&d!=a_){var c=this,b;
if(c.dH.x>c.dG.x){b=c.dH;
c.dH=c.dG;
c.dG=b}}a.pop()}function lj(e,b){if(!b){b=[]}else{if(bO(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a9){delete d.fm}if(e>a8&&e<bb){d.lk()}d.fP.sort(kA);
if(e!=a8&&e!=a_){e=ba}for(c=0,a=bg(d.fP);
c<a;
c++){d.fP[c].fg(e,b)}d.kx();
b.pop()}function ll(){delete this.c5;
delete this.c3}function lm(){return this.d2}function ln(a){this.d2=a;
this.du()}function lo(c){var e=this,b,d,a;
if(!e.fm){b=[];
for(d=0,a=bg(e.fP);
d<a;
d++){bQ(b,e.fP[d].dt(c))}bQ(b,e.kk);
if(e.fx){b.push(e.fx)}b.sort(e4);
e.fm=b}return e.fm}function lp(d){for(var e=this,b=[],c=0,a=bg(e.fP);
c<a;
c++){bQ(b,e.fP[c].fa(d))}for(c=0,a=bg(e.kk);
c<a;
c++){b.push(e.kk[c].c0)}if(e.fx){b.push(e.fx.dH);
b.push(e.fx.dG)}return b}function lq(){for(var b=[],c=0,a=bg(this.fP);
c<a;
c++){bQ(b,this.fP[c].dV)}return b}function lr(){for(var b=[],c=0,a=bg(this.fP);
c<a;
c++){bQ(b,this.fP[c].dk)}return b}function ls(r,q,b){if(!r){return}if(q==al){q=jX}var h=r.x-q,c=r.x+q,g=r.y-q,a=r.y+q,f=r.z-b,t=r.z+b,e=[],m,l,k,d,p,o,n;
for(k=0,d=bg(this.fP);
k<d;
k++){p=this.fP[k];
for(m=0,l=bg(p.dV);
m<l;
m++){o=p.dV[m];
n=o.dW();
if(!o.dI&&!o.dR&&h<n.x&&n.x<c&&g<n.y&&n.y<a&&(b==al||(f<n.z&&n.z<t))){e.push(o)}}}return e}function lt(o,n){if(!o){return}if(n==al){n=lu}var f=o.x-n,b=o.x+n,e=o.y-n,a=o.y+n,d,k,h,g,c,l,p,m;
for(g=0,c=bg(this.fP);
g<c;
g++){l=this.fP[g];
for(k=0,h=bg(l.dk);
k<h;
k++){p=l.dk[k];
if(!p.dI&&!p.dR&&f<M.max(p.cZ.c0.x,p.c1.c0.x)&&M.min(p.cZ.c0.x,p.c1.c0.x)<b&&e<M.max(p.cZ.c0.y,p.c1.c0.y)&&M.min(p.cZ.c0.y,p.c1.c0.y)<a){m=o.eL(p.cZ.c0,p.c1.c0);
if(m<n){d=p;
n=m}}}}return d}function lv(n,m){if(!n){return}if(m==al){m=jX}var f=n.x-m,b=n.x+m,e=n.y-m,a=n.y+m,d=[],k,h,g,c,l,o;
for(g=0,c=bg(this.fP);
g<c;
g++){l=this.fP[g];
for(k=0,h=bg(l.h8);
k<h;
k++){o=l.h8[k];
o.dT();
if(f<o.c3.x+o.hP&&o.c5.x<b&&e<o.c3.y&&o.c5.y<a){d.push(o)}}}return d}function lw(b,a){return lx(b,this.jZ(b,a))
}function ly(b,a){return lx(b,this.lz(b,a))}function lx(g,b){if(!b||!bg(b)){return}var d=b[0],f=d.dW().cK(g,T),e,c,a;
for(c=1,a=bg(b);
c<a;
c++){e=b[c].dW().cK(g,T);
if(e<f){d=b[c];
f=e}}return d}function lA(){return this.c0}function lB(a){return[this.c0]}function lC(a){return[this.dH,this.dG]}function fs(b,c){var a=this;
eN.apply(a);
a.d2=b;
a.fP=[];
a.kk=[];
a.km=0;
a.kn=new g2();
a.lD=lq;
a.lE=lw;
a.lF=lt;
a.lG=ly;
a.jZ=ls;
a.lz=lv;
a.lH=lr;
a.fg=lj;
a.dT=lh;
a.lk=ll;
a.lI=kv;
a.kw=kz;
a.kx=lb;
a.ky=kG;
a.lJ=lc;
a.lK=ld;
a.le=lf;
a.jw=k6;
a.lL=la;
a.lM=k7;
a.kl=kU;
a.kC=kV;
a.kE=kT;
a.fC=k5;
a.lg=k3;
a.kF=k2;
a.ft=kt;
a.jO=ks;
a.gk=kD;
a.kW=k0;
a.k1=kS;
a.kM=kK;
a.kI=kL;
a.kJ=kN;
a.kQ=kO;
a.lN=kP;
a.kB=kR;
a.jn=lO;
a.dt=lo;
a.jN=fl;
a.fa=lp;
a.cl=eO;
a.b4=kj;
a.ee=e1;
a.cY=lm;
a.lP=ln;
if(c){a.le(c)}}function fB(c,a){var b=this;
e0.apply(b);
if(c.x>a.x){b.dH=a;
b.dG=c}else{b.dH=c;
b.dG=a}b.dx=F;
b.fg=li;
b.dW=kr;
b.fa=lC;
b.eW=dD;
b.ds=fi;
b.b4=kq;
b.cY=j5}function kp(a,c){var b=this;
e0.apply(b);
b.c0=new ca(a,c);
b.dx=F;
b.fg=ij;
b.dW=lA;
b.fa=lB;
b.eW=dv;
b.ds=fi;
b.b4=ko;
b.cY=j5}function lQ(){var c=this,h=st.dr(),a=h.fP,g,d,b,f,e,k;
for(d=0,b=bg(a);
d<b;
d++){g=a[d];
for(f=0,e=bg(g.dV);
f<e;
f++){c.fF(g.dV[f])}for(f=0,e=bg(g.dk);
f<e;
f++){c.fJ(g.dk[f])}for(f=0,e=bg(g.h8);
f<e;
f++){c.hA(g.h8[f])}}k=h.fx;
if(k){c.fC(k)}for(d=0,b=bg(h.kk);
d<b;
d++){c.kl(h.kk[d])}}function lR(d){for(var c,b=0,a=bg(this.dV);
b<a;
b++){c=this.dV[b];
c.gc(d);
e6(c)}}function lS(){for(var c,b=0,a=bg(this.h8);
b<a;
b++){c=this.h8[b];
c.h4();
this.hN(c)}}function lT(){var c=this,a=st.dr(),b;
while(bg(c.h8)){b=c.h8.pop();
b.ef.hN(b)}while(bg(c.dk)){b=c.dk.pop();
b.ef.fo(b)}while(bg(c.dV)){b=c.dV.pop();
b.ef.fp(b)}if(c.fx){a.kF();
c.kF()}while(bg(c.kk)){a.kE(c.kk.pop())}}function lU(){var a=this;
return !bg(a.dV)&&!bg(a.h8)&&!bg(a.dk)&&!bg(a.kk)&&!a.fx}function lV(){var a=this;
while(bg(a.h8)){a.hN(a.h8[0])}while(bg(a.dk)){a.fo(a.dk[0])}while(bg(a.dV)){a.fp(a.dV[0])}a.kF();
while(bg(a.kk)){a.kE(a.kk[0])
}}function lW(){var c=this,l=new b5(),g,f,d,b,e,m,k,h=[],a=[];
lX=c.b4(l,T);
for(g=0,f=bg(c.dk);
g<f;
g++){b=c.dk[g];
b1(h,b.cZ);
b1(h,b.c1)}for(g=0,f=bg(c.hh);
g<f;
g++){b=c.hh[g];
b1(h,b.cZ);
b1(h,b.c1)}for(g=0,f=bg(h);
g<f;
g++){b=h[g];
e=l.b3(b);
lX.fF(e,T);
m=b.ef;
k=l.bM[m.bH];
if(!k){k=new fq();
l.bM[m.bH]=k;
a.push(k)}k.fF(e,T)}if(lX.fP){bQ(lX.fP,a)}else{lX.fP=a}for(g=0,f=bg(c.dV);
g<f;
g++){b=c.dV[g];
e=l.b3(b);
for(d=bg(b.dk)-1;
d>=0;
d--){if(!bO(c.dk,b.dk[d])){e=l.b3(b);
bV(l.b3(b.dk[d]),e.dk);
e.fg(ba)}}}for(g=0,f=bg(lX.dV);
g<f;
g++){lX.dV[g].dx=al}for(g=0,f=bg(lX.dk);
g<f;
g++){lX.dk[g].dx=al}for(g=0,f=bg(lX.hh);
g<f;
g++){lX.hh[g].dx=al}for(g=0,f=bg(lX.h8);
g<f;
g++){lX.h8[g].dx=al}lX.du()}function lY(){var d=this.lZ(),b,c,a;
for(c=0,a=bg(d);
c<a;
c++){if(b=d[c].eh){return b}}}function l0(){var c=this,b,a;
if(!c.fP){c.fP=[];
for(b=0,a=bg(c.dk);
b<a;
b++){b1(c.fP,c.dk[b].ef)}for(b=0,a=bg(c.dV);
b<a;
b++){b1(c.fP,c.dV[b].ef)}for(b=0,a=bg(c.h8);
b<a;
b++){b1(c.fP,c.h8[b].ef)}}return c.fP}function l1(){var c=this,b,a;
if(!c.jz){c.jz=[];
for(b=0,a=bg(c.dk);
b<a;
b++){b1(c.jz,c.dk[b].cZ.h7);
b1(c.jz,c.dk[b].c1.h7)}for(b=0,a=bg(c.dV);
b<a;
b++){b1(c.jz,c.dV[b].h7)}for(b=0,a=bg(c.h8);
b<a;
b++){b1(c.jz,c.h8[b].h7)}}return c.jz}function l2(){this.copy();
this.l3()}function l4(b,a){var d=this,c=b.ek;
if(c&&!bO(d.h8,c)){return d.hA(c,a)}else{b1(d.dV,b);
if(!d.l5){d.fg(ba);
b.dx=T;
if(!a){e6(b)}}return T}}function l6(a){var b=this;
if(bV(a,b.dV)&&!b.l5){b.fg(ba);
a.dx=F;
b.jN(a);
e6(a)}}function l7(d,c){b1(this.h8,d);
for(var e=this,b=0,a=bg(d.dV);
b<a;
b++){e.fF(d.dV[b],c)}for(b=0,a=bg(d.dk);
b<a;
b++){e.fJ(d.dk[b],c)}for(b=0,a=bg(d.hh);
b<a;
b++){e.fJ(d.hh[b],c)}if(!e.l5){e.fg(ba);
d.dx=T;
if(!c){e6(d)}}return T}function l8(c){var d=this,b,a;
if(bV(c,d.h8)&&!d.l5){d.fg(ba);
c.dx=F;
d.jN(c);
e6(c)}for(b=0,a=bg(c.dV);
b<a;
b++){d.fp(c.dV[b])}for(b=0,a=bg(c.dk);
b<a;
b++){d.fo(c.dk[b])}for(b=0,a=bg(c.hh);
b<a;
b++){d.fo(c.hh[b])}}function l9(c,a){var d=this,b=c.ek;
if(b&&!bO(d.h8,b)){return d.hA(b)}else{if(b1(d.dk,c)){if(!d.l5){d.fg(ba);
c.dx=T;
if(!a){e6(c)}}return T}return F}}function l_(a){var b=this;
if(bV(a,b.dk)&&!b.l5){b.fg(ba);
a.dx=F;
b.jN(a);
e6(a)}}function ma(b){for(var c=0,a=bg(b.dV);
c<a;
c++){this.fF(b.dV[c])}for(c=0,a=bg(b.dk);
c<a;
c++){this.fJ(b.dk[c])}}function mb(b,a){this.fx=b;
if(!this.l5){this.fg(ba);
b.dx=T;
if(!a){e6(b)}}return T}function mc(){var a=this;
if(a.fx){if(!a.l5){a.fg(ba);
a.fx.dx=F;
e6(a.fx)}a.fx=al}}function md(b,a){if(b1(this.kk,b)){if(!this.l5){this.fg(ba);
b.dx=T;
if(!a){e6(b)}}return T}return F}function me(a){if(bV(a,this.kk)&&!this.l5){this.fg(ba);

a.dx=F;
e6(a)}}function mf(o,n,l){l=bx(l);
var c=this,k=st.dr(),a=k.fP,h,e,b,g,d,m,f;
for(e=0,b=bg(a);
e<b;
e++){h=a[e];
for(g=0,d=bg(h.dV);
g<d;
g++){f=h.dV[g];
if(!f.dR&&f.c0.cM(o,n,l)){c.fF(f)}}for(g=0,d=bg(h.dk);
g<d;
g++){f=h.dk[g];
if(!f.dR&&f.dW().cM(o,n,l)){c.fJ(f)}}for(g=0,d=bg(h.h8);
g<d;
g++){f=h.h8[g];
if(!f.ev&&f.dW().cM(o,n,l)){c.hA(f)}}}m=k.fx;
if(m){if(m.dH.cM(o,n,l)||m.dG.cM(o,n,l)){c.fC(m)}}for(e=0,b=bg(k.kk);
e<b;
e++){f=k.kk[e];
if(f.c0.cM(o,n,l)){c.kl(f)}}}function mg(n,m){var c=this,k=st.dr(),a=k.fP,h,e,b,g,d,l,f;
for(e=0,b=bg(a);
e<b;
e++){h=a[e];
for(g=0,d=bg(h.dV);
g<d;
g++){f=h.dV[g];
if(!f.dR&&f.c0.cO(n,m)){c.fF(f)}}for(g=0,d=bg(h.dk);
g<d;
g++){f=h.dk[g];
if(!f.dR&&f.dW().cO(n,m)){c.fJ(f)}}for(g=0,d=bg(h.h8);
g<d;
g++){f=h.h8[g];
if(!f.ev&&f.dW().cO(n,m)){c.hA(f)}}}l=k.fx;
if(l){if(l.dH.cO(n,m)||l.dG.cO(n,m)){c.fC(l)}}for(e=0,b=bg(k.kk);
e<b;
e++){f=k.kk[e];
if(f.c0.cO(n,m)){c.kl(f)}}}function mh(c){var f=this,b,e,d,a;
if(!f.fm){b=[];
for(d=0,a=bg(f.dV);
d<a;
d++){e=f.dV[d];
b.push(e);
if(!c){b0(b,e.dk)}}for(d=0,a=bg(f.dk);
d<a;
d++){e=f.dk[d];
b1(b,e);
if(!c){if(b1(b,e.cZ)){b0(b,e.cZ.dk)}if(b1(b,e.c1)){b0(b,e.c1.dk)}}}for(d=0,a=bg(f.h8);
d<a;
d++){e=f.h8[d];
b.push(e)}bR(b,f.fx);
bQ(b,f.kk);
f.fm=b}return f.fm}function mi(d){var c=this,b=[],k=[],g,l,m,h,f,e,a;
for(h=0,f=bg(c.dV);
h<f;
h++){g=c.dV[h];
if(!d||!g.dR){k.push(g);
b.push(g.c0)}}for(h=0,f=bg(c.dk);
h<f;
h++){g=c.dk[h];
if((!d||!g.dR)&&!bO(c.dV,g.cZ)&&!bO(c.dV,g.c1)){k.push(g.cZ);
k.push(g.c1);
b.push(g.cZ.c0,g.c1.c0)}}for(h=0,f=bg(c.h8);
h<f;
h++){g=c.h8[h];
if(g.ex){for(e=0,a=bg(g.ex);
e<a;
e++){b.push(g.ex[e].dH,g.ex[e].dG)}}if(!d){bR(b,g.ff);
bR(b,g.c5);
bR(b,g.c3)}if(d&&!g.ev&&bg(g.hi)){for(e=0,a=bg(g.hi);
e<a;
e++){l=g.hi[e];
if(!bO(k,l)){b.push(l.c0)}}}else{for(e=0,a=bg(g.dV);
e<a;
e++){l=g.dV[e];
if(!bO(k,l)){b.push(l.c0)}}}}m=c.fx;
if(m){b.push(m.dH,m.dG)}for(h=0,f=bg(c.kk);
h<f;
h++){b.push(c.kk[h].c0)}if(!d){bR(b,c.ff)}return b}function mj(k,h){if(!k){k=new b5()}h=(h==al?this.l5:h);
var d=this,c=new g2(h),b,f,a=[],g,e,l,j;
bK(k,d,c);
for(g=0,e=bg(d.h8);
g<e;
g++){b=d.h8[g];
f=k.b3(b);
c.hA(f,T);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fq();
k.bM[l.bH]=j;
a.push(j)}j.hA(f,T)}for(g=0,e=bg(d.dk);
g<e;
g++){b=d.dk[g];
f=k.b3(b);
c.fJ(f,T);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fq();
k.bM[l.bH]=j;
a.push(j)}j.fJ(f,T)}for(g=0,e=bg(d.hh);
g<e;
g++){b=d.hh[g];
f=k.b3(b);
b1(c.hh,f);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fq();
k.bM[l.bH]=j;
a.push(j)}j.fJ(f,T)}for(g=0,e=bg(d.dV);
g<e;
g++){b=d.dV[g];
f=k.b3(b);
c.fF(f,T);
l=b.ef;
j=k.bM[l.bH];
if(!j){j=new fq();
k.bM[l.bH]=j;
a.push(j)}j.fF(f,T)}if(d.fx){c.fC(k.b3(d.fx),T)}for(g=0,e=bg(d.kk);
g<e;
g++){c.kl(k.b3(d.kk[g]),T)}if(c.fP){bQ(c.fP,a)}else{c.fP=a}for(g=0,e=bg(c.fP);
g<e;
g++){j=c.fP[g];
j.g5=al;
j.iu()}if(d.ff){c.ff=d.ff.b4()}c.hw=d.hw;
c.du();
return c}function mk(h,b){var g=this,f,e=st.dr(),d,c,a;

if(!b){b=[]}else{if(bO(b,g)){return}}b.push(g);
if(h>a9){if(h!=a_){g.fP=al;
g.jz=al}g.ff=al;
g.fm=al}if(h!=a_){f=g.lZ();
for(c=0,a=bg(f);
c<a;
c++){f[c].fg(ba,b)}if(d=g.fx){d.fg(h,b)}}e.fg(h,b);
b.pop()}function ml(d,a,b,c){this.k_=b;
this.k8=d;
this.k9=a;
this.cK=c}function mm(h,k){var b=[],l=h.lD(),m,g,f,d,e,a,c;
bT(l,this.dV);
for(e=0,a=bg(l);
e<a;
e++){c=l[e];
if(!c.ek){for(g=0,f=bg(this.dV);
g<f;
g++){d=this.dV[g];
if(!d.ek){m=c.c0.cK(d.c0,T);
if(m<=k){b.push(new ml(c,d,this,m));
break}}}}}return b}function mn(m,n){var e=this,d=[],p=m.lH(),b,a,o,l,k,g,h,c,f;
bT(p,e.dk);
for(h=0,c=bg(p);
h<c;
h++){f=p[h];
if(f.cZ.ek||f.c1.ek){continue}for(l=0,k=bg(e.dk);
l<k;
l++){g=e.dk[l];
if(g.cZ.ek||g.c1.ek){continue}if((b=f.cZ.c0.cK(g.cZ.c0,T))<=n&&(a=f.c1.c0.cK(g.c1.c0,T))<=n){d.push(new ml(f,g,e,0.5*(b+a)));
break}if((b=f.cZ.c0.cK(g.c1.c0,T))<=n&&(a=f.c1.c0.cK(g.cZ.c0,T))<=n){o=new ml(f,g,e,0.5*(b+a));
o.eI=T;
d.push(o);
break}}}return d}function mo(b,a){if(!a){a=this.dW().b4()}fh.apply(this,arguments)}function g2(a){var b=this;
eN.apply(b);
b.l5=a;
b.dV=[];
b.h8=[];
b.dk=[];
b.hh=[];
b.kk=[];
b.fg=mk;
b.fU=lU;
b.l3=lT;
b.ju=lV;
b.cut=l2;
b.copy=lW;
b.lZ=l0;
b.mp=l1;
b.mq=lY;
b.mr=lR;
b.ungroupGroups=lS;
b.dt=mh;
b.jN=fl;
b.fa=mi;
b.eC=mo;
b.ms=mm;
b.mt=mn;
b.addAll=b.bQ=lQ;
b.addRectSelection=mf;
b.mu=mg;
b.fF=l4;
b.fp=l6;
b.hA=l7;
b.hN=l8;
b.fJ=l9;
b.fo=l_;
b.kl=md;
b.kE=me;
b.fC=mb;
b.kF=mc;
b.ft=ma;
b.b4=mj}function mv(){var b="",A=fV[H].m,f=fV[H].fY,n=st.gl(),a=bg(n.dV),c={},o="",l=0,r=0,y={},u="",k=0,v=0,z,m,w,h,t,p,q,x,e=st.dr().lD(),d,g;
n.hh=[];
n.hw=T;
for(t=0,p=bg(e);
t<p;
t++){d=e[t];
if(!d.dx){z=d.ek;
m=(z&&z.type==as&&z.hl)||1;
if(y){k+=m*d.ha(F);
v+=m*d.ha(T);
y[d.di]=bx(y[d.di])+m;
h=d.et();
y[H]=bx(y[H])+(m*h);
k+=m*A*h;
v+=m*f*h}if(z){if(z.type==as&&!z.hl){k=al;
v=al;
y=al;
u=s("poly");
break}}}}for(t=0,p=a;
t<p;
t++){d=n.dV[t];
z=d.ek;
m=(z&&z.type==as&&z.hl)||1;
if(c){l+=m*d.ha(F);
r+=m*d.ha(T);
c[d.di]=bx(c[d.di])+m;
h=d.et();
c[H]=bx(c[H])+(m*h);
l+=m*A*h;
r+=m*f*h}if(w){if(!w.bJ(d.h7)){n.hw=F}}else{w=d.h7}if(z){n.hw=F;
if(z.type==as&&!z.hl){l=al;
r=al;
c=al;
o=s("poly")}}for(q=0,x=bg(d.dk);
q<x;
q++){if(!d.dk[q].dx){n.hh.push(d.dk[q])}}}for(t=0,p=bg(n.dk);
t<p;
t++){g=n.dk[t];
if(w){if(!w.bJ(g.cZ.h7)){n.hw=F}}else{w=g.cZ.h7}if(g.ek){n.hw=F}if(!g.cZ.dx||!g.c1.dx){n.hh.push(g)}}n.hw=(n.hw&&a>0&&bg(n.hh)<=2);
if(c){o=mw(c)}if(y){u=mw(y)}mx($("#bondRotate"),bg(n.hh)==1);
mx($("#groupSelection"),n.hw);
mx($("#ungroupSelection"),bg(n.h8));
if(a){b+=s("sele")+":&nbsp;"+o+my(l,r);
if(u){b+=S+s("rem")+":&nbsp;"+u+my(k,v)}}$("#info").html(b)}function my(b,a){if(b>0){return"&nbsp;("+round(b,2,3)+"/"+round(a,4,3)+")"
}return""}function mw(h){var f,b,a=[C,H],d,e,g,c="";
bi(h);
for(f=0,b=bg(a);
f<b;
f++){d=a[f];
e=h[d];
if(e>0){c+=d;
if(e>1){c+=aE+e+aF}}}for(d in h){e=h[d];
g=fV[d];
if((!g||!g.fX)&&e>0){c+=d;
if(e>1){c+=aE+e+aF}}}return c}function dr(){var a=this;
if(a.mz){return a.mz}a.mA=bA(a.mA,0,bg(a.mB)-1);
return a.mB[a.mA]}function gl(){return this.dr().kn}function gQ(){return this.mC}function mD(a){this.mC=a}function mE(){if(this.mC){this.mC.mF=al;
this.mC.mG=al;
this.mC=al}}function mH(){if(this.mI()){this.mJ(-1)}}function mK(){return this.mA>0}function mL(){if(this.mM()){this.mJ(1)}}function mJ(a){this.mN();
resetDirty(aV);
this.mA+=a;
mO(aV);
mP(this.dr()).eW();
mv()}function mP(a){a.dT();
$("#threed").fadeTo(500,(a.c3.z-a.c5.z)>0?1:0);
return a}function mQ(){return this.mA<bg(this.mB)-1}function mR(){var a=bg(this.mB)-mS;
if(a>0){this.mB.splice(0,a);
this.mA-=a}}function mT(){var a=this;
a.mR();
a.mB.splice(a.mA,0,st.dr().b4(new b5(T)));
a.mA++;
a.mB.length=a.mA+1}function mU(a){var b=this;
b.mR();
b.mA++;
b.mB[b.mA]=mP(a);
b.mB.length=b.mA+1}function mV(){var b=this,a=b.mB[b.mA];
b.mB[b.mA]=a.b4(new b5(T));
b.mz=a}function mW(){return !!this.mz}function mN(){var a=this;
if(a.mz){a.mz.dm();
a.mz=al;
a.mE();
a.dr().eW()}}function mX(){var a=this;
if(a.mz){a.mU(a.mz);
a.mz=al;
a.mE();
mv()}}function mY(){var a=this;
a.mB=[];
a.mB[0]=new fs(aV);
a.mA=0;
a.gP=F;
a.mV=mV;
a.mW=mW;
a.mN=mN;
a.mX=mX;
a.dr=dr;
a.gl=gl;
a.gQ=gQ;
a.mD=mD;
a.mE=mE;
a.mR=mR;
a.mT=mT;
a.mU=mU;
a.undo=mH;
a.mI=mK;
a.redo=mL;
a.mM=mQ;
a.mJ=mJ}function mZ(a){$("#"+a).click()}function activateTool(d,b){m0();
m1(gR,b);
if(gR!=b){m2=F;
var a=F;
switch(b){case aQ:case aR:m3();
a=T;
break;
case aT:case aU:a=T;
break;
case aL:m2=T;
break}if(!a){$(m4).css({border:"",d3:""});
$(d).css({border:"1.5px solid black",d3:"0.5px"});
m4=d}gR=b}else{if(gU&&b==aP){var c=st.gl();
if(!c.fU()){m5()}}}h1()}function useAtom(a){m6(a);
$("#atom").click()}function m1(b,a){switch(b){case aQ:case aR:gT=F;
st.mN();
break}}function m7(){m8(m4)}function m8(a){if(a){$(a).trigger("click",{m9:T})}}function m_(a){na=a.ctrlKey;
return bf(a)}function nb(c){if(!st.gP){var a=new FileReader(),b;
a.onload=function(e){var d=e.target.result;
if(na){activateTool(al,aQ);
nc(new fs(aV,d))}else{lK(d)}};
if(c.dataTransfer){b=c.dataTransfer.files
}else{if(c.target){b=c.target.files}}if(b){a.readAsText(b[0]);
return bf(c)}}}function nd(b,a){if(b&&(!a||!a.m9)){ne=b.target}}function nf(a){ne=al}function ng(d){if(!d||!d.data||!d.data.m9){nd(d);
var c=$(ne).parent().children(at),a=aV.height,b=c.height();
c.fadeIn(50).css("z-index",10000);
c.css(c.offset().top+b>a?{position:"absolute",top:(a-b-25)+"px"}:{position:al,top:al})}}function nh(a){setTimeout(function(){if(!a){nf()}var b=$(at).filter(":visible");
if(bg(b)){if(ne){b=b.not($(ne).parent().children())}if(bg(b)){if(ni){b.hide()}else{b.fadeOut(100)}}}if(gU&&!bg(b)){ng()}},100)}function nj(a){if(a.target.tagName.toLowerCase()=="img"){a3.prop("src",a.target.src);
a4=T;
nk()}}function m3(){a4=F;
nl()}function nk(){if(a4){a3.show()}}function nl(){if(a4){a3.hide()}}function nm(){var b=navigator.userAgent.toLowerCase(),a="";
if(/android|blackberry|kindle|mobile|phone/.test(b)){a="mobile"}else{if(/windows|macintosh|linux/.test(b)){a="desktop"}else{if(/Pad|Tablet/.test(navigator.userAgent)){a="mobile"}else{if(/CrOS|Mac/.test(navigator.userAgent)){a="desktop"}else{a=(nn()?"mobile":"desktop")}}}}return a}function nn(){return"ontouchstart" in document.documentElement}function setBond(a,b){gV=a;
gW=b}function hy(){h0(aV);
st.mT()}function hB(a){h1(T);
e9(a);
mv()}function no(h){for(var b=aY.val(),g,d,c="",f=0,a=bg(b);
f<a;
f++){g=b.charCodeAt(f);
if((!d&&g>96&&g<123)||(g==104&&b!="Ph"&&b!="Rh"&&b!="Th")){g-=32}d|=(g>64&&g<91);
c+=String.fromCharCode(g)}if(b!=c){m6(c)}}function np(d){if(nq){hx(F);
return}if(nr(d)){return T}ns=T;
var c=d.which,b,a;
if(nt(aY,d)&&c!=13){if(!d.shiftKey&&((((a=aY.val())==""||!isNaN(be(a)))&&c>64&&c<91)||(c==72&&a!="P"&&a!="R"&&a!="T"))){m6(a+String.fromCharCode(c));
return F}return T}b=(d.altKey?0.2:1);
switch(c){case 37:nu(-b,0);
break;
case 38:nu(0,-b);
break;
case 39:nu(b,0);
break;
case 40:nu(0,b);
break;
case 74:case 36:nu(0,0,b);
break;
case 75:case 35:nu(0,0,-b);
break;
case 33:nv();
nx();
break;
case 34:ny();
nx();
break}nh();
return bf(d)}function nt(a,b){return a&&b&&a.is(b.target)}function nr(a){return nt(aZ,a)||nt(a0,a)||getSelection().toString()}function nz(a){return(nt(aY,a)||nr(a)?T:bf(a))}function hx(a){if(a){nq=T}else{clearTimeout(nA);
nA=setTimeout(function(){nq=F},500)}}function nB(h){if(st.gP||nq){nq=F;
return}if(nr(h)){return T}if(nt(aY,h)){if(h.which==27||h.which==113){aY.blur()}if(h.which!=13){return T}}var f=h.which,a,d=h.ctrlKey,b=h.altKey,g=(!d&&!h.shiftKey&&!b),c=st.gl();
switch(f){case 13:if(ej){hy();
ej.gc(gS());
e6(ej);
hB(aV)}else{if(!c.fU()){hy();
c.mr(gS());
hB(aV)}}break;
case 27:ej=al;
hZ=al;
if(gT){nC=T;
gT=F;
st.mN();
h0(aV)}else{st.mE();
clearSelection()}m7();
break;
case 46:if(c.fU()){mZ("deleteButton")}else{m5()}break;
case 49:case 97:mZ("single");
break;
case 50:case 98:mZ(d?"clean2D":"double");
break;
case 51:case 99:mZ(d?"clean3D":"triple");

break;
case 65:if(d){hy();
c.bQ();
hB(aV)}else{mZ(aG)}break;
case 67:if(d){copy()}else{if(g){a=T}}break;
case 68:mZ("singleDown");
break;
case 69:mZ(aK);
break;
case 71:if(d){if(h.shiftKey){doUngroup()}else{createGroup()}}break;
case 76:if(g){a="Cl"}break;
case 77:mZ("singleEither");
break;
case 66:case 70:case 72:case 73:case 78:case 80:if(g){a=T}break;
case 79:if(d&&b){$("#fileUpload").click()}else{if(g){a=T}}break;
case 81:mZ(aL);
break;
case 82:if(g){a="Br"}break;
case 83:if(d&&b){saveFile()}else{if(g){a=T}}break;
case 84:mZ("3d_rotate");
break;
case 85:if(d){doUngroup()}else{mZ("singleUp")}break;
case 86:if(d){paste()}else{mZ(aM)}break;
case 87:mZ(aI);
break;
case 88:if(d){cut()}break;
case 89:if(d){st.redo()}break;
case 90:if(d){st.undo()}break;
case 107:case 171:case 187:if(ej){hy();
ej.g9(1);
e6(ej);
hB(aV)}break;
case 109:case 173:case 189:if(ej){hy();
ej.g9(-1);
e6(ej);
hB(aV)}break;
case 110:case 190:if(ej){hy();
ej.g_();
e6(ej);
hB(aV)}break;
case 113:aY.focus().select();
break}if(a){if(a===T){a=String.fromCharCode(f)}m6(a);
if(ej){hy();
ej.gc(gS());
e6(ej);
hB(aV)}}return bf(h)}function nD(b){var a=1/hO;
return new ca((b.x-0.5*nE.x)*a+nF.x,(b.y-0.5*nE.y)*a+nF.y)}function nG(a){var b=aW.offset();
return nD(new ca(a.pageX-b.left,a.pageY-b.top))}function nH(b,a){if(a){nI=[];
nJ="M"+b;
nK={x:b.x,y:b.y,x2:b.x,y2:b.y}}else{nJ+="L"+b;
nK.x=M.min(nK.x,b.x);
nK.x2=M.max(nK.x2,b.x);
nK.y=M.min(nK.y,b.y);
nK.y2=M.max(nK.y2,b.y)}nI.push(b)}function nL(){return(ej?ej.ef:(nM?nM.ef:(hZ?hZ.ef:al)))}function m0(){ej=nM=hZ=kX=kZ=al}function nN(b){if(parent){parent.postMessage("focused","*")}if(gT||b.which!=1||st.gQ()){return}nh();
nO(b);
gT=T;
nC=F;
nP=ej;
nQ=nM;
nR=hZ;
nS=kZ;
nT=kX;
nU=F;
var d=nG(b),a,c;
nH(d,T);
if(!st.gP){switch(gR){case aK:case aL:case aT:case aI:case aG:case aH:case aP:case aJ:st.mV();
break;
case aM:case aN:case aO:a=st.gl();
st.mV();
if(a.fU()){a=new g2(T);
if(c=nL()){a.ft(c)}else{a.bQ()}}m0();
st.mD(a);
break}}if(!st.gP){return bf(b)}}function nV(c,d,b,a){if(d7){nW(c,d,b,a)}else{nX+=b;
nY+=a;
if(nZ){clearTimeout(nZ)}nZ=setTimeout(function(){nW(c,d,nX,nY);
nX=0;
nY=0},500)}return bf(c)}function nW(d,h,c,a){var g=nG(d),f,j,k,b,i;
if(st.gP||d.ctrlKey){if(a<0){zoomOut()}else{zoomIn(cr(g,nF))}}else{if(d.shiftKey){f=(d.altKey?0.5:2.5);
if(d.ctrlKey){nu(-a*f,c*f)}else{nu(c*f,-a*f)}}else{if(!(j=st.gQ())){hy();
j=st.gl();
if(j.fU()){j=new g2(T);
j.bQ()}}f=-M.PI*a/(d.altKey?ae:12);
if(gR==aO){i=j.hh[0];
k=(i.cZ.dx?i.cZ:i.c1);
b=(i.cZ.dx?i.c1:i.cZ);
j.eR(f,k.c0.b4(),b.c0)}else{k=j.mq();

j.eD(f,(k?k.c0.b4():al))}}}m0();
h0(aV);
h1();
n0()}function n1(y){nh();
if(st.gP&&y.which!=1){n2()}else{if(y.which==1&&!nC){nO(y);
var f=n3,q=nI[0],b=st.dr(),z,n,t,c,w,u,l,o,x,d,j,r,h,k,g,p,m,v={},a=(st.gP?aU:gR);
if((nU||!y.ctrlKey)&&(z=st.gQ())){t=z.mt(b,n4);
for(w=0,u=bg(t);
w<u;
w++){b.lM(t[w],v)}c=z.ms(b,n4);
for(w=0,u=bg(c);
w<u;
w++){b.lL(c[w],u==1)}n=z.lZ();
n5(n);
for(w=0,u=bg(n);
w<u;
w++){b.ft(n[w])}b.lI();
z.fg(a8);
st.mX()}else{if(!nU&&y.ctrlKey&&(l=(ej||nM))){switch(a){case aP:b.jO(l.ef);
st.mX();
break;
default:o=st.gl();
if(!y.shiftKey){o.ju()}o.ft(l.ef);
st.mX()}}else{switch(a){case aU:if(nU){zoomBox(q,f)}else{zoomIn(f)}break;
case aM:case aN:case aO:st.mX();
break;
case aK:case aL:if(!z){o=st.gl();
if(!y.shiftKey){o.ju()}x=0;
if(!nU){x=3;
if(nM){o.fJ(nM)}if(kZ){o.fC(kZ)}if(kX){o.kl(kX)}}if(a==aK){o.addRectSelection(q,f,x)}else{nH(f);
nH(q);
o.mu(nI,nK)}}st.mX();
break;
case aS:if(!hZ){hy();
d=b.kC(f);
e6(d);
hB(aV)}break;
case aT:if(hZ){st.mN()}else{if(!nU){f.x+=k4}b.lg(q,f);
e6(b);
st.mX();
m7()}break;
case aI:if(nM&&!ej&&!nU){nM.iI();
st.mX()}else{r=F;
if(nP){j=nP.ef;
if(!nP.ek&&nP.bJ(ej)){k=new gf(gg(nP,1));
g=new gi(nP,k,1,0);
j.fF(k);
j.fJ(g);
k.gc(gS());
e6(nP);
h0(aV);
st.mX();
break}}else{if(eg=="rxn"||!bg(b.fP)){j=new fq();
b.ft(j);
r=T}else{j=b.fP[0]}}if((!nP||!nP.ek)&&(!ej||!ej.ek)&&jr(y,q,f,j,nP,ej)){if(r){b.kw();
b.kx()}st.mX()}else{st.mN()}}break;
case aG:if(ej){ej.gc(gS());
e6(ej);
st.mX();
break}case aH:if(nM&&!ej&&!nU){nM.iI();
st.mX()}else{if(hZ){st.mN()}else{if((nQ&&!nP)||(nP&&nP.ek)||(ej&&ej.ek)){st.mN()}else{p=gS();
gh.fT();
h=nP;
k=ej;
if(h&&k&&!k.bJ(h)){if(g=h.g7(k)){g.iI()}else{h.ef.fL.jw(h,k)}}else{if(k&&k.bJ(h)){nU=F;
k=al}if(!nU){f=al}r=F;
m=[];
if(eg!="rxn"){j=b.fP[0]}else{if(h){j=h.ef}else{if(k){j=k.ef}}}if(!j){j=new fq();
b.ft(j);
r=T}if(!h){h=new gf(q.b4());
j.fF(h);
m.push(h)}if(!k&&(nU||nP||(a==aH&&p==C))){k=new gf(gg(h,gV,f,y));
j.fF(k);
m.push(k)}j.fJ(new gi(h,k,gV,gW));
for(w=0,u=bg(m);
w<u;
w++){m[w].gc(p)}if(r){b.kw();
b.kx()}}st.mX();
gT=F;
h0(aV);
h1(T)}}}break;
case aP:if(hZ){hZ.ef.hN(hZ);
hZ=al}else{if(ej){ej.ef.fp(ej);
ej=al}if(nM){nM.ef.fo(nM);
nM=al}if(kZ){kZ.fL.kF(kZ);
kZ=al}if(kX){kX.fL.kE(kX);
kX=al}}st.mX();
break;
case aJ:if(ej){j=ej.ef;
if(j&&!ej.bJ(j.eh)){e6(j.eh);

j.eh=ej;
e6(ej);
st.mX()}else{st.mN()}}break}}}gT=F;
if(a==aQ){if(n6){n7(y,y.pageX,y.pageY)}else{m7()}}n0()}}}function n8(g,i){var a={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},d=g.originalEvent,f=d.changedTouches,b=a[d.type],h,c;
if(b){if(i||bg(f)==1){h=f[0];
c=document.createEvent("MouseEvent");
c.initMouseEvent(b,true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c);
d.preventDefault();
if(b=="mouseup"&&!nU){c=document.createEvent("MouseEvent");
c.initMouseEvent("click",true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c)}return T}return F}}function hQ(a){if(a){a.remove();
a.clear()}}function h0(a){if(!a){return}hQ(a.jv);
if(!hZ){hQ(a.hR)}if(!ej){hQ(a.fz)}}function h1(e){var d=st.dr(),a=d.lE(n3),c=d.lG(n3),b;
if(ej&&(e||!ej.bJ(a))){ej.hf();
e6(ej);
n9("outAtom",ej)}if(hZ&&(e||!hZ.bJ(c))){hZ.hf()}if(!a){ej=al;
b=d.lF(n3);
if(nM&&(e||!nM.bJ(b))){n9("outBond",nM)}if(b&&(e||!b.bJ(nM))){n9("overBond",b)}nM=b;
if(b){e6(b)}}else{if(e||!a.bJ(ej)){ej=a;
if(nM){e6(nM);
n9("outBond",nM);
nM=al}ej.he();
e6(ej);
n9("overAtom",ej)}}if(!c){hZ=al}else{if(e||!c.bJ(hZ)){hZ=c;
hZ.he()}}}function n9(a,b){$(window).trigger(a,{obj:b})}function nO(b){na=b.ctrlKey;
var a=b.clientX,c=b.clientY;
if(gU){a2.css({left:a-4,top:c-4})}a3.css({left:a+30,top:c+30});
n3=nG(b);
h0(aV);
if(!ej){gh.fT()}h1()}function n_(b,a,c){if(d7){oa(b,a,c)}else{clearTimeout(ob);
ob=setTimeout(function(){oa(b,a,c)},250)}}function oa(h,p,n){nO(h);
aW.css("cursor","");
var o,c,j,l,b,q,t,m,d,a,r,g,f,k=(st.gP?aU:gR);
if(gT){o=n3;
c=nI[0];
j=st.dr();
if(m2){nH(o)}if(!nU){nU=(o.cK(c)>oc);
if(nU){switch(k){case aK:case aL:if((nP&&nP.dx)||(nQ&&nQ.dx)||(nS&&nS.dx)||(nT&&nT.dx)){l=st.gl()}else{l=new g2(T);
if(nP){l.fF(nP)}else{if(nQ){l.fJ(nQ)}else{if(nR){l.hA(nR);
hZ=al;
h0(aV)}else{if(nS){l.fC(nS)}else{if(nT){l.kl(nT)}}}}}}if(!l.fU()){st.mD(l)}break}}}if(l=st.gQ()){switch(k){case aM:case aO:if(nU){b=bx(l.mG);
q=M.atan2(o.y-c.y,o.x-c.x);
if(k==aO){r=l.hh[0];
t=(r.cZ.dx?r.cZ:r.c1);
m=(r.cZ.dx?r.c1:r.cZ);
l.eR(q-b,t.c0.b4(),m.c0)}else{l.eD(q-b,c)}l.mG=q;
l.eW();
aV.jv.push(aV.path("M"+c+"L"+o).attr(ax,"#f00").attr(az,c6),aV.text(o.x,o.y+30/hO,round(q*ag,1)+"").attr(aw,2+20/hO))}break;
case aN:if(nU){b=(l.mF||c);
l.mF=o;
q=(h.altKey?0.01:0.1);
l.eE(q*(b.y-o.y),q*(o.x-b.x),l.dW())}break;
default:od(c,o,j,aV)}}else{switch(k){case aU:case aK:oe(aV,c,o);
break;
case aL:aV.jv.push(aV.path(nJ+"Z").attr(of));
break;
case aI:if((!nP||!nP.ek)&&(!ej||(!ej.ek&&!ej.bJ(nP)))){jr(h,c,o,al,nP,ej)
}break;
case aG:case aH:if(nU&&!nQ&&(!nP||!nP.ek)&&(!ej||(!ej.ek&&!ej.bJ(nP)))){gh.fT();
t=nP;
m=ej;
d=[];
if(t&&(r=t.g7(m))){r=gh.fJ(r);
r.iI()}else{a=gS();
if(!t){t=gh.fF(new gf(c.b4()));
d.push(t)}if(!m){m=gh.fF(new gf(gg(t,gV,o,h)));
d.push(m)}gh.fJ(new gi(t,m,gV,gW));
for(g=0,f=bg(d);
g<f;
g++){d[g].gc(a)}}gh.eW()}break;
case aT:if(nU){gh.fS(c,o);
gh.eW()}break;
case aP:if(ej){ej.ef.fp(ej);
ej=al}if(nM){nM.ef.fo(nM);
nM=al}break}}}else{if(nM){switch(k){case aG:aW.css("cursor","move");
break;
case aH:e6(nM);
var r=gh.fJ(nM);
r.iI();
gh.eW();
break}}}switch(k){case aK:case aL:if(ej||nM){aW.css("cursor","move")}break}n0()}function oe(d,c,e){var b=M.min(c.x,e.x),a=M.min(c.y,e.y);
d.jv.push(d.rect(b,a,M.abs(e.x-c.x),M.abs(e.y-c.y)).attr(of))}function od(b,j,g,c){var h=st.gQ(),m,l,d,a,n,k,f,e;
if(!h||st.gP){return}m=(h.mF||b);
l=j.cq(m);
h.cl(l.x,l.y);
h.mF=j;
if(g){d=h.ms(g,1.5*n4);
for(f=0,e=bg(d);
f<e;
f++){a=d[f];
n=a.k9.c0;
k=a.k8.c0;
c.jv.push(c.ellipse(n.x,n.y,n4,n4).attr(og).attr(aD,a.cK<n4?oh:oi));
c.jv.push(c.ellipse(k.x,k.y,n4,n4).attr(og).attr(aD,a.cK<n4?oh:oi))}}}function oj(c,d,b){var a="templates/"+b+".mol";
jQuery.get(a,{},function(e){d.push(new ok(a,e,c));
oj(c,d,b+1)},"text")}function ol(){var a=$("#builtinTemplates").remove(".template");
if(!bB("noTemplates")){oj(a[0],om.server,0)}}function addTemplate(b,e){var d,a,c=$(e?"#tmpl"+e:"#serverTemplates"),f=om.server;
if(!c.length){$("<tr>").append($("<td>").addClass("menuWithPopup").mouseleave(nh).click(nh).append(c=$("<div id="+bv("tmpl"+e)+' class="menuPopup templatesMenu">'+getImgSt("del")+' class="button" style="float:right" onClick="hideMenu();"/></div>').css({opacity:0.85}).mouseleave({obj:this},oo).click(nf)).append($(getImgSt(e)+' class="button"/>').mouseenter(ng).click(nd))).insertBefore("#groupSelection")}if($.isArray(b)){for(d=0,a=bg(b);
d<a;
d++){f.push(op(b[d],c))}}else{f.push(d=op(b,c));
return d}}function op(a,b){try{a=pako.ungzip(atob(a),{to:"string"})}catch(c){}return new ok(al,a,b)}function gd(b){if(!b){return}b=b.charAt(0).toUpperCase()+b.substr(1);
for(var d,c=0,a=bg(om.server);
c<a;
c++){d=om.server[c];
if(d.eh&&$.inArray(b,d.oq)!=-1){return d}}}function or(){if(this.url){jQuery.get(this.url,{},function(a){this.fL=new fs(this.da,a);
this.eW()},"text")}}function os(){var a=this,f=a.fL,c,b,e,g,j=j_,h=j_,d=a.ot.parent(".templatesMenu");
for(c=0,b=bg(f.fP);
c<b;
c++){e=f.fP[c];
if(!a.eh){a.eh=e.eh}if(!a.tooltip){a.tooltip=e.a0}if(!$.isArray(a.oq)){a.oq=e.aZ}}g=by(a.tooltip);
if(a.oq&&bg(a.oq)){g+=" ("+a.oq.join(",")+")"}a.ot.attr("title",g);
f.dT();
j+=M.max(ou-f.c3.x+f.c5.x,0);
h+=M.max(ou-f.c3.y+f.c5.y,0);
a.da.setViewBox(f.c5.x-j,f.c5.y-h,f.c3.x-f.c5.x+2*j,f.c3.y-f.c5.y+2*h);
d.show();
f.eW();
d.hide()}function n5(c){for(var b=0,a=bg(c);

b<a;
b++){e6(c[b].eh);
c[b].eh=al}}function ov(b,a,c){n6=F;
ow=b.data.obj;
n7(b,a,c);
oo();
setTimeout(nh,700)}function ox(b,a,c){n6=T}function n7(b,a,c){oy();
n_(b,a,c)}function oy(){activateTool(al,aQ);
nc(ow.fL.b4(),ow.eh)}function nc(c,b){st.mV();
var e=c.fP,g=st.dr(),d,a,f=new g2(T);
c.lP(aV);
for(d=0,a=bg(e);
d<a;
d++){g.ft(e[d],F,T);
f.ft(e[d])}gT=T;
nI[0]=(b?b.c0:f.dW());
st.mD(f)}function oz(c){var b=c.data.obj,a=$(b.ot[0].firstChild).clone().attr("width",oA).attr("height",oA);
$("#overlay").empty().append(a).show().mouseenter(function(){$(".templatesMenu").hide()})}function oo(){var a=$("#overlay");
if(bd){a.hide()}else{a.fadeOut()}}function ge(){var a=new b5();
this.fL.b4(a);
return a.b3(this.eh)}function ok(b,a,c){var f=this,e,d=(gU?33:50);
f.url=b;
f.ot=$("<div>").css({display:"inline-block"}).addClass("button template").appendTo(c).click({obj:f},ov).dblclick({obj:f},ox).mouseenter({obj:f},oz);
f.da=new Raphael(f.ot[0],oB,oC);
bG.apply(f.da);
mO(f.da);
f.fL=new fs(f.da,a);
if(e=f.fL.fP[0]){e=by(e.a0).substr(0,12);
f.ot.append($("<div>").css({position:"absolute",top:0,height:"100%",padding:"25% 3px","background-color":"white",opacity:0.3,"font-size":(bg(e)>6?d:d*2)+"%"}).text(e))}f.ge=ge;
f.reload=or;
f.eW=os;
f.eW()}var isReady=F,lang=bw(bB("lang"),"en"),bE=["en","de"],langDef={},oD=(typeof nw!="undefined"),oE=!!bB("embedded"),d7=Raphael.svg,gU=(nm()=="mobile"),iconSize=(gU?35:20),ni=(bd||$.browser.opera),nF=new ca(),hO,oF=1000,oG=0.001,oH=0.25,h3=16,nE,st,lX,gh,gR,gV=1,gW=0,eg=bw(bB("mode"),"mol"),ep=!!bB("debug"),nC=F,na,n3,ne,ej,hZ,nM,kX,kZ,gT=F,nq=F,nA,ob,nZ,nX=0,nY=0,nU,m2=F,nI=[],nJ="",nK={},nP,nR,nQ,nT,nS,oI=4,oc=3,m4,ow,n6=F;
bD();
var mS=30,jd=12,jt=30,oB=50,oC=50,es=10,c4=es*1.4,dc=2,c8=1.5,c7=0.06,c_=0.01,d3=1.5*es,dw=7,k4=55,dE=7,dF=0.2,hE=0.5,n4=0.25*es,oJ=0.1,er=0.38,c6=(d7?0.333333333:1),dA=1,eo=0.02*es,en=6,hL=es*0.5,jX=es*0.25,lu=2,js=30,oA,hS="#000",dz=hS,db=(ep?"gray":"#fff"),ei="#f00",dy="#0f0",dJ="#666",em="#00f",el="#f00",oh="#0f0",oi="#f00",og={"stroke-width":0,"fill-opacity":0.4},of={stroke:dy,fill:dy,"fill-opacity":0.2},hV={stroke:"deepskyblue",fill:"deepskyblue","fill-opacity":0.2,"stroke-width":c6},om={server:[]},j_=0.45*es,ou=3.5*j_,oK=c4/720,oL=0.2,j7=0.3,j6=0.6*c4,oM=0.3*c4,oN=400,oO=80,oP=0.6,oQ=0.1;

function gS(){var a=aY.val();
if(!a){a=C}return a}function m6(a){aY.val(a)}function nx(){var a=1/hO;
if(aV){aV.setViewBox(nF.x-0.5*a*nE.x,nF.y-0.5*a*nE.y,nE.x*a,nE.y*a)}if(!d7){st.dr().eW()}}function oR(a){nF=a;
nx()}function oS(a){if(!a){return oI}return M.max(M.min(a,oF),oG)}function n2(f){var c=st.dr(),b,e,a,d;
if(bg(c.lD())>0){c.dT();
b=c.c5.x-d3;
e=c.c5.y-d3;
a=c.c3.x+d3;
d=c.c3.y+d3;
hO=oS(M.min(nE.x/(a-b),nE.y/(d-e)));
if(f&&hO>f){hO=f}}else{hO=oI}oR(new ca(0.5*(b+a),0.5*(e+d)))}function zoomBox(a,b){hO=M.min(oF,nE.x/M.abs(b.x-a.x),nE.y/M.abs(b.y-a.y));
oR(cr(a,b))}function zoomIn(a){nv();
if(a){oR(a)}else{nx()}if(!st.gP){m7()}}function nv(){if(hO<oF){hO/=1-oH}}function zoomOut(){if(gR==aU){m7()}ny();
nx()}function ny(){if(hO>oG){hO*=1-oH}}function nu(b,a,f){var e=b*es/hO,d=a*es/hO,c=st.gl();
if(st.gP||c.fU()){nF.x+=e;
nF.y+=d;
if(f&&!st.gP){hy();
st.dr().cl(0,0,f);
hB(aV)}nx()}else{hy();
c.cl(e,d,f);
hB(aV)}h1()}function eB(a){if(!gT){return bf(a)}}function ij(){}function oT(){if(!aW){aW=$("#svgParent")}if(aV){aV.canvas.style.display="none"}nE=new ca(aW.width(),aW.height());
if(aV){aV.canvas.style.display="";
aV.setSize((d7?"100%":nE.x),nE.y)}else{aV=new Raphael("svgParent",(d7?"100%":nE.x),nE.y);
bG.apply(aV);
aV.oU=T;
st=new mY();
mO(aV);
gh=new fQ();
aV.canvas.onselectstart=bf;
aW.mousedown(nN).mousemove(n_).mouseup(n1).mousewheel(nV).mouseover(nk).mouseout(nl).bind("touchstart",n8).bind("touchmove",n8).bind("touchend",n8)}nx()}function clearSelection(){hy();
st.gl().ju();
hB(aV)}function m5(){hy();
st.gl().l3();
hB(aV)}function cut(){hy();
st.gl().cut();
hB(aV)}function copy(){st.gl().copy()}function paste(){activateTool(al,aR);
st.mV();
var d=lX.b4(al,T),c,a,b=d.lZ(),e=st.dr();
for(c=0,a=bg(d.kk);
c<a;
c++){e.kl(d.kk[c])}for(c=0,a=bg(b);
c<a;
c++){e.ft(b[c])}gT=T;
nI[0]=d.dW();
st.mD(d);
h1()}function flip(a){hy();
var b=st.gl();
if(b.fU()){b.bQ();
b.eI(a,nF);
b.ju()}else{b.eI(a)}hB(aV)}function doUngroup(){var a=st.gl();
if(hZ){hy();
hZ.h4();
hB(aV)}else{if(!a.fU()){hy();
a.ungroupGroups();
hB(aV)}}}function clearReaction(){lK("")}function mO(a){a.clear();
a.jv=a.set();
a.hR=a.set();
a.fz=a.set();
a.hX=a.path("M0,0");
a.e7=[]}function saveFile(){oV(open("data:chemical/x-mdl-molfile;fileName="+(eg=="rxn"?"reaction.rxn":"molecule.mol")+";content-disposition=attachment,"+encodeURIComponent(lJ()),"Download"))}function saveSVG(){if(aV&&aV.canvas){var c=st.dr(),b,a;

c.dT();
b=c.c3.x-c.c5.x+2*d3;
a=c.c3.y-c.c5.y+2*d3;
aV.setSize(b,a);
aV.setViewBox(c.c5.x-d3,c.c5.y-d3,b,a);
oV(open("data:application/octet-stream;fileName=structure.svg;content-disposition=attachment,"+encodeURIComponent(aV.canvas.outerHTML),"Download"));
oT()}}function oV(a){setTimeout(function(){a.close()},500)}function n0(){e9(aV)}function lJ(){st.mN();
return st.dr().lJ()}function lK(b){if(!aV){oT()}mO(aV);
var a=new fs(aV,b);
st.mU(a);
if(d7){a.eW()}hB(aV);
n2(3)}function getReadOnly(){return st.gP}function setReadOnly(b){if(st.gP!=b){st.gP=b;
var a=$("#leftCol");
if(b){a.attr("data-width",a.attr("width"));
a.attr("width",1);
$(".toolbar").hide();
gh.fT();
st.mN();
m0();
h0(aV);
n0();
m3()}else{a.attr("width",a.attr("data-width"));
$(".toolbar").show();
a4=T}}}function getDisplayAtomNumbers(){return st.de}function setDisplayAtomNumbers(a){if(st.de!=a){st.de=a;
st.dr().eW()}}function highlightAtom(e,b,a){if(a==al){a=T}var d=st.dr().fP[bx(b)],c;
if(d){c=d.dV[e];
if(c){c.df=a;
c.eW()}}}function unhighlightAtoms(b){var a=st.dr(),e,d,c;
if(b!=al){e=a.fP[bx(b)];
for(c=bg(e.dV)-1;
c>=0;
c--){d=e.dV[c];
if(d.df){d.df=F;
d.eW()}}}else{for(c=bg(a.fP)-1;
c>=0;
c--){unhighlightAtoms(c)}}}function highlightBond(c,b,a){if(a==al){a=T}var d=st.dr().fP[bx(b)],e;
if(d){e=d.dk[c];
if(e){e.df=a;
e.eW()}}}function unhighlightBonds(b){var a=st.dr(),d,e,c;
if(b!=al){d=a.fP[bx(b)];
for(c=bg(d.dk)-1;
c>=0;
c--){e=d.dk[c];
if(e.df){e.df=F;
e.eW()}}}else{for(c=bg(a.fP)-1;
c>=0;
c--){unhighlightBonds(c)}}}function unhighlightAll(a){unhighlightAtoms(a);
unhighlightBonds(a)}function showURL(a){var c=$("#infoArea"),b=(gU?1.8:1);
if(!a){c.hide();
oT()}else{if(c.firstChild||(nE.x>600*b&&nE.y>400*b)||!open(a)){c.show().height("50%");
$("#infoContent").html("<iframe src="+bv(a)+' width="99%" height="'+(bd?0.5*nE.y:"95%")+'"/>');
oT()}}}function getMode(){return eg}function getParams(){return"?lang="+lang+"&mode="+eg+"&embedded="+(oE||"")}function mx(b,a){bd?(a?b.show():b.hide()):(a?b.slideDown():b.slideUp())}function getImgSt(a){return'<img src="icons/'+a+(d7?'.svg" width="'+iconSize+'" height="'+iconSize+'"':'.png"')}$(window).load(function(){aX=$("html");
aY=$("#newAtomSym");
aZ=$("#templateShortcuts");
a0=$("#templateName");
a1=$(".templatesMenu").css({opacity:0.85}).mouseleave({obj:this},oo);
a3=$("#editIcon");
$("#fileUpload").change(nb);
$.event.props.push("dataTransfer");
aX.bind("drop",nb).bind("dragover",m_).bind("dragend",bf).keydown(np).keyup(nB);
$("#info").bind("contextmenu",stopPropagation);
if(oD){aX.bind("contextmenu",bf)}if(!ep){$("body").bind("contextmenu",bf)}aX.onscroll=bf;
if(gU){aX.bind("input",no)}window.onresize=oT;
var a=M.min(aX.width(),aX.height());
hO=oS(0.01*a);
oA=M.min(600,a)+am;
oT();
var b=aW.offset();
$("#overlay").css({left:b.left+am,top:b.top+am});
if(eg=="rxn"){$(".modeRxn").show()}else{if(eg=="tmpl"){$(".modeTmpl").show()}else{$(".modeMol").show()}}if(!bd&&!oE){$(".modeFile").show()}if(oE){$("#copyright").hide();
$("#info").css("font-size","7pt")
}if(bB("readonly")){setReadOnly(T)}else{$(au+" > img").mouseenter(ng).click(nd);
$(au).mouseleave(nh).click(nh);
$(at).click(nf);
$(".tool").click(nj);
$("td.separator + td").addClass("afterSeparator");
setTimeout(function(){ol()},50);
bF();
m8(".defaultTool");
if(!bB("nofocus")){aY.focus().blur()}}$.rule(at).css("left",(iconSize+6)+"px");
if(gU){a2=$("#touchCursor").show();
$.rule("input,.button").css("font-size","20pt");
aY.click(function(){this.select()})}isReady=T});
function cleanStructure(d){st.mN();
var e,c=st.gl(),f=[],b,a;
hy();
if(c.fU()){f.push(st.dr())}else{f=c.mp()}for(b=0,a=bg(f);
b<a;
b++){e=f[b];
e.jn(d);
e.eW()}hB(aV);
n2(3);
if(ow&&gR==aQ){oy()}}function lO(e){var g=this,f=g.fP,b,d,a,c=0,h;
g.kF(F);
for(d=bg(g.kk)-1;
d>=0;
d--){g.kE(g.kk[d],T)}for(d=bg(f)-1;
d>=0;
d--){b=f[d];
if(!bg(b.dV)){bV(b,g.fP);
if(d<g.km){g.km--}}}h=g.km;
for(d=0,a=bg(f);
d<a;
d++){b=f[d];
b.jn(e);
if(d==h){g.lg(c,al,T);
c+=k4+d3}else{if(d>0){g.kC(c,0,T);
c+=dw+d3}}b.dT();
b.jE(c);
c+=(b.c3.x-b.c5.x)+d3}if(d==h){g.lg(c)}g.km=h;
n2(3);
m0()}function ki(d){if(!this.jz){this.iu()}for(var e=this,c=e.kf(),b=0,a=bg(e.jz);
b<a;
b++){e.jz[b].jn(d,c)}}function jo(c,b){var d=this,a=d.dW().b4();
new oW(d,c,b);
d.cl(a.cq(d.dW()))}function oX(){var e=this,c=e.h7,g,h,f=e.oY(),l=e.oZ(),b=e.o0(),j,d,a,i=oP,k=c.jp();
while((e.o1=f+l+b)>oQ){if(g==1||(!g&&b>f)){e.o2(i);
h=1}else{e.o3(i);
h=2}j=e.oY();
d=e.oZ();
a=e.o0();
if(j+d+a<e.o1){f=j;
l=d;
b=a;
k=c.jp();
i*=0.98}else{c.jq(k);
if(M.abs(i)<0.05){break}if(g){i*=0.5;
g=0}else{i*=-0.8;
if(h==1){g=2}else{g=1}}}}}function o4(){var d=this,b=!d.o5,c=d.h7,l,g,f,k,e,a,n,m,h,o=0;
d.o6=[];
for(l=0,g=bg(c.dV);
l<g;
l++){k=c.dV[l];
for(f=0;
f<l;
f++){e=c.dV[f];
a=k.c0.cK(e.c0,b);
if((n=j6*(b?1:2)-a)>0){m=j7*n*n;
d.o6.push(new o7(k,e,a,n,m));
o+=m}}if(b){o+=M.abs(k.c0.z)}}for(l=0,g=bg(c.dk);
l<g;
l++){k=c.dk[l];
h=c4;
if(k.dl==0){h*=1.3}a=k.cZ.c0.cK(k.c1.c0,b);
if(a!=h){d.o6.push(k)}k.o8=h;
k.bg=a;
n=M.abs(h-a);
m=(a>oM?n:n*oN);
k.o9=m;
o+=m}return o}function o_(){var r=this,f=!r.o5,k=r.h7,n,l,m,p,b,c,u,t,a,v,e,h,g,q,o=0;
for(n=0,l=bg(k.dk);
n<l;
n++){c=k.dk[n];
u=c.cZ;
t=c.c1;
a=t.c0.cq(u.c0,f);
if(!a.x&&!a.y&&!a.z){o+=oO;
continue}e=a.cs();
g=al;
for(m=0,p=bg(k.dV);
m<p;
m++){b=k.dV[m];
if(!b.bJ(u)&&!b.bJ(t)){v=b.c0.cq(u.c0,f);
if((q=oM-e.ch(v).bg())>0){if((h=a.ce(v))>=0&&h<=(g||(g=a.ce(a)))){o+=oO*q*q}}}}}return o}function pa(){var e=this,b,a,d,f,c=0;
for(b=0,a=bg(e.pb);
b<a;
b++){d=e.pb[b];
d.pc();
f=oK*(oL*d.cK*d.cK+M.abs(d.cK));
d.o9=f;
c+=f}return c}function pd(){for(var f=this,d=0,c,a,e=[],b;
d<3;
d++){f.pe[d].pc()}f.cK=0;
if(a=f.pf){for(d=0;
d<3;
d++){e[d]=[];
for(c=0;
c<3;
c++){e[d][c]=(f.pe[d].pg?M.abs(a[c]-f.pe[d].pf):0)}}b=ph(e);
for(d=0;
d<3;
d++){for(c=0;
c<3;
c++){if(f.pe[d].pg){if(c!=b[d]){e[d][c]=an}}else{e[d][c]=M.abs(a[c]-f.pe[d].pf)}}}b=ph(e);

for(d=0;
d<3;
d++){f.cK+=(f.pe[d].pf=e[d][b[d]])}}}function ph(e){for(var g=0,b=bg(e),j=[],h=[],f,a,l,d;
g<b;
g++){h[g]=0;
j[g]=g}d=pi(e,j);
l=j.slice();
g=1;
while(d>0&&g<b){if(h[g]<g){f=g%2&&h[g];
a=j[g];
j[g]=j[f];
j[f]=a;
++h[g];
g=1;
if(pi(e,j)<d){l=j.slice()}}else{h[g]=0;
++g}}return l}function pi(e,d){for(var b=0,c=0,a=bg(d);
b<a;
b++){c+=e[b][d[b]]}return c}function pj(){var d=this,b=d.pk,c=d.pl,a=d.gq;
d.pm=(d.pn.o5?jW(a,c,b):eq(a,c,b));
d.cK=d.pm-d.pf}function po(){var c=this,b=c.gq,a=bg(b.dk);
if(a>3||a==b.gz()){if(a<5){c.pf=[ai,ai,ai]}else{if(a==5){c.pf=[ac,ac,ad]}else{if(a==6){c.pf=[ac,ac,ac]}else{if(a==7){c.pf=[72,ac,ac]}else{if(a==8){c.pf=[0.5*ai,ac,ac]}}}}}}else{c.pf=[ad,ad,ad]}}function pp(b){var h=this,a=h.pn,f=h.gq,d=bg(f.dk),e=f.gz(),c=f.di,g;
if(e==4&&d==2){h.pf=ae}else{if((a.o5?d==e:d==4)&&(c=="P"||c=="S")){h.pf=ac}else{if(a.o5&&(c=="P"||c=="S"||d==e)){h.pf=ai}else{if(d==6||(d>3&&h.pm<90)){h.pf=60}else{if((g=a.pq)&&bg(g)&&d==3&&(c=="N"||c=="P")){h.pf=(b?210:(a.o5?90:75))}else{if(d==2&&h.pm>ae){h.pf=240}else{h.pf=ad}}}}}}}function pr(d,c){if(d.o9==c.o9){return 0}if(d.o9==undefined||d.o9<c.o9){return 1}return -1}function ps(l){var n=this.o6,k=this.o5,j,g,h,f,e,a,c,b,r,q,p=0,d,o,m;
if(g=bg(n)){l=M.abs(l);
n.sort(pr);
for(j=0;
j<g;
j++){h=n[j];
if(h.o9<0.1){break}if(j/g<M.random()){a=h.bg;
c=h.cZ;
b=h.c1;
r=l*(b.c0.x-c.c0.x)*(h.o8-a)/a;
q=l*(b.c0.y-c.c0.y)*(h.o8-a)/a;
if(k){p=l*(b.c0.z-c.c0.z)*(h.o8-a)/a}o=bg(c.dk);
m=bg(b.dk);
d=o+m;
o/=d;
m/=d;
if(!(h instanceof gi)||bg(h.dU())==0){f=c.g3(b);
f.fo(h);
e=b.g3(c);
e.fo(h)}else{f=c.c0;
e=b.c0}f.cl(-r*m,-q*m,-p*m);
e.cl(r*o,q*o,p*o)}}if(!k){l=0.9-l;
for(n=this.h7.fa(),j=g-1;
j>=0;
j--){n[j].z*=l}}this.h7.cs()}}function pt(b,a){return(M.abs(b.cK)<31-M.abs(a)*50?0:(b.cK>0?-1:1))}function pu(w){var A=this.pb,x=this.pv,E,z,D,K,B,r,a,b,l,J,g=[],G,v,e,o,n,h,f,m=[],q=(w>0?1:0),t,I,u,L,d,p,y,N,c;
x.sort(pr);
for(E=0,z=bg(x);
E<z;
E++){f=F;
r=x[E];
b=r.gq;
a=b.c0;
u=d=p=0;
L=a.eJ(r.pw[0].c0,r.pw[1].c0,r.pw[2].c0);
for(D=0;
D<3;
D++){l=r.dk[D];
L/=l.cZ.c0.cK(l.c1.c0)+Number.px}if(t=(M.abs(L)<0.0001)){e=0;
for(D=0;
D<3;
D++){N=r.pe[D].pm;
e+=N;
if(N>u){u=r.pe[D].pm;
L=D}}e=(e<358);
u=pt(r.pe[L],w)}for(D=0;
D<3;
D++){d+=(J=pt(r.pe[D],w));
if(J==0){p++;
if(!t){L=D}}}if(p<3){y=[];
for(D=0;
D<3;
D++){l=r.dk[D];
if(bg(l.dU())){N=new g2(T);
N.fJ(l);
N.fF(l.gv(b));
f=T}else{N=l.g3(b)}y.push(N)}if(t){c=r.pe[L];
if(M.abs(d)>1&&e){o=a.eF(c.pl.c0,c.pk.c0);
n=a.cD(o);
l=0;
for(D=0;
D<3;
D++){l+=(D==L?1:-1)*r.pe[D].cK;
g[D]=0}for(D=0;
D<3;
D++){if(D!=L){I=r.pe[D].cK+0.3*l;
for(B=0;
B<3;
B++){if(D!=B){g[B]+=(a.eJ(r.dk[B].gv(b).c0,r.dk[D].gv(b).c0,n)>0?1:-1)*I}}}}for(D=0;
D<3;
D++){y[D].ct(g[D]*af,o,a)}}if(d<0||(e&&u<d-u)||(r.pe[L].pm>175&&r.pe[L].cK>0)){I=0;
for(B=0;
B<3;
B++){if(!e||L!=B){I-=r.pe[B].cK}}c=a.eF(c.pl.c0,c.pk.c0,r.pw[L].c0);
for(B=0;
B<3;
B++){y[B].ct(bA((B==L?0.5:-0.25)*I*w,-30,30)*af,c,a)}}}if(M.abs(d)>(t?2:1)){I=0;
c=a.eK(r.pw[0].c0,r.pw[1].c0,r.pw[2].c0);
for(D=0;
D<3;
D++){for(B=0;

B<3;
B++){if(D!=B){I-=r.pe[B].cK}}y[D].ct(bA(I*M.abs(w),-30,30)*af,c[D],a)}}else{if(p==1&&(!t||u==0)){for(B=0;
B<3;
B++){if(L!=B){if((h=r.pe[B].cK)>0){o=B}else{n=B}I+=M.abs(h)}}if(o+n){c=a.eF(r.pw[n].c0,r.pw[o].c0);
y[L].ct(bA(0.5*I*M.abs(w),-30,30)*af,c,a)}}}}if(f){for(B=0;
B<3;
B++){c=this.py[r.pw[B].bH];
for(D=0,K=bg(c);
D<K;
D++){c[D].pc()}}}else{for(B=0;
B<3;
B++){r.pe[B].pc()}}}if(bg(A)){A.sort(pr);
w=M.abs(w);
m=[];
for(E=0,z=bg(A);
E<z;
E++){r=A[E];
if(r.o9<1){break}if(E/z<M.random()&&(E+q)%2){b=r.gq;
a=b.c0;
o=r.pl;
n=r.pk;
h=bg(o.dk);
f=bg(n.dk);
e=h+f;
c=a.eF(n.c0,o.c0);
if(K=bg(r.pz)){for(D=0;
D<K;
D++){G=r.pz[D];
v=G.g3(b);
v.ct(w/oP/K*r.cK*af*(G.iL(n)?1:-1),c,a)}}else{if(!bO(m,b)&&!bO(m,o)&&!bO(m,n)){m.push(b,o,n);
o.c0.ct(r.cK*w*f/e*af,c,a);
n.c0.ct(r.cK*-w*h/e*af,c,a)}}}this.h7.cs()}}}function pA(p){var o=this.pb,h,f,e,c,g,k,b,t,d,r,q,m,l,a=[],n=(p>0?1:0);
p=M.abs(p);
if(f=bg(o)){o.sort(pr);
for(h=0;
h<f;
h++){g=o[h];
if(g.o9<1){break}if(h/f<M.random()&&(h+n)%2){k=g.gq.c0;
m=g.pl;
l=g.pk;
r=bg(m.dk);
q=bg(l.dk);
d=r+q;
if(c=bg(g.pz)){for(e=0;
e<c;
e++){b=g.pz[e];
t=b.g3(g.gq);
t.eD(p/oP/c*g.cK*af*(b.bJ(g.dk[0])?1:-1),k)}}else{if(!bO(a,g.gq)&&!bO(a,m)&&!bO(a,l)){a.push(g.gq,m,l);
m.c0.eD(g.cK*p*q/d*af,k);
l.c0.eD(g.cK*-p*r/d*af,k)}}}}this.h7.cs()}}function o7(b,a,c,e,d){this.cZ=b;
this.c1=a;
this.o8=j6;
this.bg=c;
this.cK=e;
this.o9=d}function pB(a,d,c,b){var e=this;
bG.apply(e);
e.pn=a;
e.gq=d;
e.pl=c;
e.pk=b;
e.dk=[d.g7(c),d.g7(b)];
e.pC=pD;
e.pc=pj;
e.pE=pp;
e.pc()}function pF(a,e,d,c,b){var f=this;
bG.apply(f);
f.gq=e;
f.pw=[d,c,b];
f.dk=[e.g7(d),e.g7(c),e.g7(b)];
f.pe=[a.pG(e,c,b),a.pG(e,d,b),a.pG(e,d,c)];
f.pC=pH;
f.pc=pd;
f.pE=po}function pI(g,f,d){for(var h=this,c=h.py[g.bH],b,e=0,a=bg(c);
e<a;
e++){b=c[e];
if((f.bJ(b.pl)&&d.bJ(b.pk))||(f.bJ(b.pk)&&d.bJ(b.pl))){break}}if(e==a){b=new pB(h,g,f,d)}return b}function pJ(h,b,a,j){var e=this,c=e.pK[h.bH],g,f,d;
if(c){for(g=0,f=bg(c);
g<f;
g++){d=c[g];
if(bO(d.pw,b)&&bO(d.pw,a)&&bO(d.pw,j)){break}}}else{c=[];
e.pK[h.bH]=c}if(g==f){d=new pF(e,h,b,a,j);
c.push(d);
e.pv.push(d);
d.pC()}return d}function pH(){for(var a=0;
a<3;
a++){this.pe[a].pC()}this.pE()}function pD(k){var b=this,f=b.pn,g=b.dk,e=bg(g)-1,d,c,h,j,a=(b.pm<ae||bg(b.gq.dk)>2);
if(!b.pz){if(a){b.pz=[];
for(;
e>=0;
e--){if(!bg(g[e].dU())){b.pz.push(g[e])}}f.py[b.gq.bH].push(b)}j=bY(f.g5,g[0].dU(),g[1].dU());
if(d=bg(j)){for(e=0;
e<d;
e++){c=j[e];
h=f.pL[c.bH];
if(!h){h=[];
f.pL[c.bH]=h}if(a){h.push(b)}if(!c.pf){k=bg(c.dV);
c.pf=(f.o5&&!c.i7()&&(k==8||(k==6&&c.i8()))?ai:pM(k))}}b.pf=(a?j[0].pf:aj-j[0].pf);
b.pg=T}else{b.pE(k)}}return !!d}function pM(a){return ae-aj/a
}function pN(d,c){if(d.pm<c.pm){return 1}if(d.pm>c.pm){return -1}return 0}function pO(){var p,l,h,b,g,f,d,e=this,c=e.h7,t,u,r,q,o,a,w,v;
for(p=0,l=bg(c.dV);
p<l;
p++){t=c.dV[p];
u=t.dk;
a=[];
e.py[t.bH]=[];
b=bg(u);
if(e.o5&&b>2){for(h=0;
h<b;
h++){r=u[h];
for(g=h+1;
g<b;
g++){q=u[g];
for(f=g+1;
f<b;
f++){o=u[f];
for(d=f+1;
d<b;
d++){if(u[d].iM().eM(r.iM(),q.iM(),o.iM())){d=-1;
break}}if(d>0){e.pP(t,r.gv(t),q.gv(t),o.gv(t))}}}}}else{if(b>1){for(h=0;
h<b;
h++){a.push(new gp(t,u[h].gv(t)))}a.sort(gr);
v=T;
for(h=0;
h<b;
h++){g=(h+1)%b;
w=e.pG(t,a[h].gq,a[g].gq);
if(!w.pC(v)){v=F}}}}b0(e.pb,e.py[t.bH])}}function pQ(){for(var d,a,g=this.h7.dV,h,f,n,k,m,b,l,e=0,c=bg(g);
e<c;
e++){h=g[e];
n=this.py[h.bH];
if((a=bg(n))>2){m=0;
k=0;
if(!this.o5||a<4){b=aj}else{if(a<7){b=ai}else{if(a<11){b=96}else{if(a<16||a>21){b=ac}else{b=82.29}}}b*=a}for(d=0;
d<a;
d++){f=n[d];
if(f.pg){m+=f.pf}else{k+=f.pf}}k+=m;
if(this.o5?k>b:k!=b){if(m<b){l=(b-m)/(k-m);
for(d=0;
d<a;
d++){f=n[d];
if(!f.pg){f.pf*=l}}}else{l=b/k;
for(d=0;
d<a;
d++){f=n[d];
f.pf*=l}}}}}}function pR(){for(var d=this.h7.dk,c,b=0,a=bg(d);
b<a;
b++){c=d[b];
c.o8=al;
c.bg=al;
c.o9=al}d=this.g5;
a=bg(d);
for(b=0;
b<a;
b++){d[b].pf=al}}function pS(d){if(bg(d.dV)<10){var b=this,h=d.dV,k,f,a=d.pf,m=b.pL[d.bH],g,e=bg(m),p,n=0,o=0,j,c,l;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.pf-a)<oJ){n++}else{o+=a-p.pf}}if(o){j=o/n;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.pf-a)<oJ){p.pf+=j}}}d.i5();
e=bg(h);
if(b.o5){d.iW();
if(a==ai){a=pM(e);
if(e==8){k=[[p=15,p,-p,-p,p,p,-p,-p,3]]}else{k=[[p=(ai-ac)*0.5,p,-p,p,p,-p,2],[p,-p,p,-p,p,-p,1]]}}if(k){f=an;
while(j=k.pop()){o=j.pop();
for(;
o>=0;
o--){c=0;
for(g=0;
g<e;
g++){c+=M.abs(d.i6(h[g])-j[g])}if(c<f){f=c;
n=j.slice()}if(f==0){break}if(o>0){bW(j)}}}j=n}a=ae-a;
k=h[0];
n=k.c0;
n.cl(d.iT.b_(-d.iT.ce(n.cq(d.ff))));
n.eC(0.5*c4/M.sin(0.5*a*af)/n.cK(d.ff),d.ff);
for(g=1;
g<e;
g++){k=h[g];
k.c0=n.b4();
k.c0.ct(a*g*af,d.iT,d.ff)}if(j){for(g=0;
g<e;
g++){k=h[g].c0;
k.ct(-j[g]*af,d.iT.ch(k.cq(d.ff)).cs(),d.ff)}}}else{for(g=1;
g<e;
g++){k=h[g];
f=h[g-1];
if(g==1){c=eq(f,k);
k.c0=cT(f.c0,c,c4)}else{p=bY(m,b.py[k.bH]);
if(bg(p)==1){p=p[0];
if(!l){l=(h[2].c0.ey(h[0].c0,h[1].c0)?1:-1)}c+=(ae-p.pf)*l;
k.c0=cT(f.c0,c,c4)}}}}}}function pT(){for(var c=this,b=0,a=bg(c.g5);
b<a;
b++){c.pU(c.g5[b])}}function oW(a,j,e){var b=this,g=[],f,h,l,d,c,k=1;
b.h7=a;
b.o5=j;
b.pb=[];
b.pv=[];
b.py={};
b.pK={};
b.pL={};
b.pq=e;
b.pV=pO;
b.oY=o4;
b.oZ=o_;
b.o0=pa;
b.o3=ps;
b.o2=(j?pu:pA);
b.pW=pT;
b.pU=pS;
b.pX=pQ;
b.jn=oX;
b.pY=pR;
b.pG=pI;
b.pP=pJ;
for(d=bg(a.h8)-1;
d>=0;
d--){c=a.h8[d];
if(c.type==ar){f=c.hi.slice();
h=c.dk.slice();
l=c.hh.slice();
c.h4(l,h);
g.push({di:c.di,dV:f,dk:h,hh:l})
}}b.g5=iN(a.dU());
b.pV();
do{b.pW();
b.pX();
b.jn();
k--}while(k>0&&b.o1>oQ);
b.pY();
for(d=bg(g)-1;
d>=0;
d--){c=g[d];
a.ef.hz(c.di,c.dV,c.dk,c.hh)}a.fg(ba)}hideMenu=nh;
getMolRxnfile=lJ;
setMolRxnfile=lK;
centerView=oR;
zoomFit=n2;
redrawChanged=n0;
delSelection=m5;
Point3D=ca;
pZ=fs;
Molecule=fq;
Atom=gf;
Bond=gi;
Selection=g2;
