var ab="Sciformation VectorMol (c) 2012-2020 Felix Rudolphi",M=Math,ac=unescape,ad=90,ae=120,af=180,ag=M.PI/af,ah=1/ag,ai=2*M.atan(M.SQRT2),aj=ai*ah,ak=360,al=21600,T=true,F=false,am,S=" ",an="px",ao=Number.MAX_VALUE,ap="obj",C="C",H="H",aq="\nM  ",ar="SUP",as="MUL",at="SRU",au=".menuPopup",av=".menuWithPopup",aw=[0,2,1,3],ax="font-size",ay="stroke",az="stroke-opacity",aA="stroke-width",aB="stroke-dasharray",aC="--",aD="text-anchor",aE="fill",aF="<sub>",aG="</sub>",aH="atom",aI="draw",aJ="drawChain",aK="drawHotspot",aL="selRect",aM="selLasso",aN="rotate",aO="3d_rotate",aP="bond_rotate",aQ="delete",aR="insertTemplate",aS="paste",aT="drawPlus",aU="drawArrow",aV="zoomIn",aW,aX,aY,aZ,a0,a1,a2,a3,a4,a5,a6=0,a7=new RegExp("^(\\d*)([A-Z%*][a-z#]{0,2})(H\\d*)?\\s*(\\d*[\\+\\-]+)?\\s*$"),a8={8:0,4:1.5},a9=0,a_=1,ba=2,bb=3,bc=4,bd=$.browser.msie,be=(bd&&$.browser.version<=8);
bf=parseInt;
function bg(a){if(be){if(!a){a=window.event}a.returnValue=F;
a.cancelBubble=T}else{a.preventDefault();
a.stopPropagation()}return F}function stopPropagation(a){if(be){if(!a){a=window.event}a.cancelBubble=T}else{a.stopPropagation()}}function bh(a){return a.length}function bi(){for(var c=0,b=0,a=bh(arguments);
b<a;
b++){c+=arguments[b]}return c/a}function bj(b){var e=[],f=[],d,c,a;
for(d in b){f.push(d)}f.sort();
for(c=0,a=bh(f);
c<a;
c++){d=f[c];
e[d]=b[d];
delete b[d]}for(c=0;
c<a;
c++){d=f[c];
b[d]=e[d]}}function bk(a,c){for(var b in a){if(a[b]==c){return b}}}function bl(b){if(!b){return b}var a=/^[\s\n\r\t]*(.*?)[\s\n\r\t]*$/;
if(a.exec(b)){return RegExp.$1}}function bm(e,h,j){if(!$.isArray(h)){return e}var a=[],f=0,b,g,d,c;
for(d=0,c=bh(h);
d<c;
d++){b=h[d];
g=e.substr(f,b);
if(!j){g=bl(g)}a.push(g);
f+=b}if(bh(e)>b){g=e.substr(f);
if(!j){g=bl(g)}a.push(g)}return a}function bn(d){for(var c=[],b,e=0,a=(d?bh(d):0);
e<a;
e++){if(d.charAt(e)==S){continue}b=d.indexOf(S,e+1);
if(b==-1){c.push(d.substr(e));
break}c.push(d.substring(e,b));
e=b}return c}function bo(b,c,a){var d=b.substr(0,bh(c));
if(a!=T){d=d.toLowerCase();
c=c.toLowerCase()}return(d==c)}function bp(c,d,b){var e=bh(c)-bh(d),a;
if(e<0){return F}a=c.substr(e);
if(b!=T){a=a.toLowerCase();
d=d.toLowerCase()}return(a==d)}function bq(b){if(b==am||b==""){return""}b=String(b);
var a="\n";
b=b.replace(/:/g,".");
b=b.replace(/\r\n/g,a);
b=b.replace(/\r/g,a);
b=b.replace(/\|/g,a);
return b}function br(e,c){c=bf(c);
if(isNaN(c)||c<1){return""}e=String(e);
for(var d="",b=0;
b<c;
b++){d+=e}return d}function bs(a,b){return bt(a,b,S)}function bt(c,d,b){c=String(c);
if(bh(c)>d){return c.substr(0,d)}var a=bh(c);
while(a<d){a++;
c=b+c}return c}function bu(c,d,b){c=String(c);
if(bh(c)>d){return c.substr(0,d)}var a=bh(c);
while(a<d){a++;
c+=b}return c}function bv(a){a=String(a);
return a.replace(/(["\\])/g,"\\$1")}function bw(a){return'"'+bv(a)+'"'}function bx(a,b){if(a==am||a==null||(isNaN(a)&&typeof a=="number")){return b}return a}function by(a){return bx(a,0)}function bz(a){return bx(a,"")}function bA(b){b=String(b);
var a=b.match(/\-?\d+[\.,]?\d*/);
if(a!=null&&bh(a)>0){return bz(a[0])}return""}function bB(c,b,a){return M.max(b,M.min(a,c))}function round(c,e,f){var g=1,d,b,a;
c=parseFloat(c);
e=bf(e);
if(isNaN(c)||c==am){return""}if(f!=3){if(c==0){return 0}if(c<0){g=-1;
c*=-1}}b=M.pow(10,e);
switch(f){case 1:d=M.floor(M.log(c)/M.LN10);
break;
case 2:d=M.floor(M.log(c)/3/M.LN10)*3;
break;
case 3:return c.toFixed(bB(e,0,20));
break;
case 4:e-=M.ceil(M.log(c)/M.LN10);
return g*c.toFixed(bB(e,0,20));
break;
default:return(g*M.round(c*b)/b)
}switch(f){case 1:case 2:a=String(g*M.round(c/M.pow(10,d)*b)/b);
if(d==0){return a}return a+"&sdot;10<sup>"+d+"</sup>"}}function bC(c){var b=location.search,d,a;
if(b&&c){d=new RegExp("[&?]"+c+"=([^&$]*)");
if(a=d.exec(b)){return a[1]}}}function bD(){return a6++}function s(a){return bz(langDef[a])}function bE(){if($.inArray(lang,bF)>=0){document.write('<script type="text/javascript" src="lang_'+lang+'.js"><\/script>')}}function bG(){$(".button, .wTooltip").attr("title",function(){return s(this.id)}).on("dragstart",bg)}function bH(){this.bI=bD();
this.bJ=this.bI;
this.bK=bK}function bL(b,a,c){if(b.bM){c.bJ=a.bJ}b.bN[a.bI]=c}function bK(a){return a!=am&&this.bJ==a.bJ}function bO(a){return a!=am&&this.bI==a.bI}function bP(a,b){return bQ(a,b)>=0}function bQ(b,d){for(var c=0,a=bh(b);
c<a;
c++){if(b[c].bK(d)){return c}}return -1}function bR(b,a){b.push.apply(b,a)}function bS(a,b){if(b!=am){a.push(b)}}function bT(a,c){for(var b=bh(a)-1;
b>=0;
b--){if(!bP(c,a[b])){a.splice(b,1)}}}function bU(b,a){for(var c,d=bh(b)-1;
d>=0;
d--){for(c=bh(a)-1;
c>=0;
c--){if(b[d].bK(a[c])){b.splice(d,1);
break}}}}function bV(b,e,c){for(var d=0,a=bh(b);
d<a;
d++){if(b[d].bK(e)){b[d]=c;
return T}}return F}function bW(d,b){if(b){for(var c=0,a=bh(b);
c<a;
c++){if(b[c].bK(d)){b.splice(c,1);
return T}}}return F}function bX(a,b){if(b==am){b=1}if(b!=0){a.unshift.apply(a,a.splice(b,bh(a)))}}function bY(b,d){for(var c=0,a=bh(d);
c<a;
c++){if(!bP(b,d[c])){return F}}return T}function bZ(e,d){var b=Array.apply(am,arguments),c=[],f,a;
if(bh(b)>2){e=b.pop();
d=bZ.apply(am,b)}for(f=0,a=bh(e);
f<a;
f++){if(bP(d,e[f])){c.push(e[f])}}return c}function b0(e,b){for(var c=[],d=0,a=bh(e);
d<a;
d++){if(!bP(b,e[d])){c.push(e[d])}}return c}function b1(c,b){for(var d=0,a=bh(b);
d<a;
d++){b2(c,b[d])}}function b2(a,b){if(b!=am&&!bP(a,b)){a.push(b);
return T}return F}function b3(a){if(a==am){return am}return this.bN[a.bI]}function b4(b){if(b==am){return am}var c=this.bN[b.bI],a;
if(!c){for(a in this.bN){if(b.bK(this.bN[a])){return b}}c=b.b5(this);
this.bN[b.bI]=c}return c}function b6(a){this.bN={};
this.bM=a;
this.b3=b3;
this.b4=b4}function b7(a){return(720+a)%ak}function b8(a){var b=this.b5();
b.x+=a.x;
b.y+=a.y;
b.z+=a.z;
return b}function b9(b,a){var c=this.b5();
c.x-=b.x;
c.y-=b.y;
c.z=(a?0:c.z-b.z);
return c}function b_(b){var c=this,a=c.bh();
return(a>0?c.ca((b||1)/a):new cb())}function cc(b,a,d){var c=this;
if(b instanceof cb){c.x+=b.x;
c.y+=b.y;
c.z+=b.z}else{c.x+=b;
c.y+=a;
c.z+=by(d)}}function cd(a){return(this.x==a.x&&this.y==a.y&&this.z==a.z)}function ce(g,e,c){var f=this,a,b,d;
if(f.bh()==0||f.cf(g)<0){return F}a=f.cg(g,e);
if(!a){return isNaN(a)}b=f.cg(e,c);
if(!b){return isNaN(b)}return(d=f.cg(c,g)?(a*b>0&&a*d>0):isNaN(d))}function ch(b,a){var d=this.cf(b.ci(a));
if(d==0&&this.cj(a)<b.cj(a)){return NaN}return d}function ck(a){var b=this;
return new cb(b.x*a,b.y*a,b.z*a)}function cl(b,a){if(b!=1){var c=this;
if(a){c.cm(-a.x,-a.y,-a.z)}c.x*=b;
c.y*=b;
c.z*=b;
if(a){c.cm(a)}}}function cn(b,a){var c=this;
if(b&1){c.x=2*a.x-c.x}if(b&2){c.y=2*a.y-c.y}}function co(c,b){if(b){this.cm(-b.x,-b.y,-b.z)}var f=this,d=M.cos(c),e=M.sin(c),a=f.x*d-f.y*e;
f.y=f.x*e+f.y*d;
f.x=a;
if(b){f.cm(b)}}function cp(d,c,a){if(a){this.cm(-a.x,-a.y,-a.z)}var g=this,b=M.cos(c),f=M.sin(c),e=g.z*b-g.x*f;
g.x=g.x*b+g.z*f;
b=M.cos(d);
f=M.sin(d);
g.z=g.y*f+e*b;
g.y=g.y*b-e*f;
if(a){g.cm(a)
}}function cq(i,h,g,f){var e=this,c=e.cr(i),b=e.cr(h),d=cs(c,b),a;
if(f){a=c.ci(b);
a=a.ci(d).ct();
if(a){d.cu(f*ag,a)}}if(g){d=d.ct(g)}d.cm(e);
return d}function cv(a){var b=this.cr(a);
return M.abs(b.x)+M.abs(b.y)-M.abs(b.z)}function cw(g,e,d){var f=this,c=g.cr(f),b=e.cr(f),a=c.ci(b);
if(d){a=a.ci(d.cr(f))}return a.ct()}function cx(m,g,a){if(m){if(a){this.cm(-a.x,-a.y,-a.z)}var e=this,i=M.cos(m),h=1-i,f=M.sin(m),l=e.x,k=e.y,j=e.z,d=g.x,c=g.y,b=g.z;
e.x=l*(i+d*d*h)+k*(d*c*h-b*f)+j*(d*b*h+c*f);
e.y=l*(c*d*h+b*f)+k*(i+c*c*h)+j*(c*b*h-d*f);
e.z=l*(b*d*h-c*f)+k*(b*c*h+d*f)+j*(i+b*b*h);
if(a){e.cm(a)}}}function cy(){return M.sqrt(this.cf(this))}function cz(b,a){var c=this.cr(b);
if(a){c.z=0}return c.bh()}function cA(a){var b=this;
return b.x*a.x+b.y*a.y+b.z*a.z}function cB(b,a){var c=this;
if(a){c=c.cr(a);
b=b.cr(a)}return new cb(c.y*b.z-c.z*b.y,c.z*b.x-c.x*b.z,c.x*b.y-c.y*b.x)}function cC(g,d,b){var f=this,e=f.cr(g),c=f.cr(d),a=f.cr(b);
return e.ci(c).cf(a)}function cD(h,f,c){var a=this,i=h.cr(a),g=f.cr(a),d=c.cr(a),e=i.cE(g).cE(d),b=[];
b.push(e.ci(i).ct());
b.push(e.ci(g).ct());
b.push(e.ci(d).ct());
return b}function cF(b,c){if(c){return b7(this.cG(c)-this.cG(b))}else{var a=b.x-this.x,d=b.y-this.y;
if(!a&&!d){return 0}return b7(M.atan2(d,a)*ah)}}function cH(d,c){var e=this,b,a;
if(c){d=d.cr(e);
c=c.cr(e)}else{c=e}if((b=d.bh())&&(a=c.bh())){return b7(M.acos(d.cf(c)/b/a)*ah)}}function cI(b,a){return this.cJ(b,a)>0}function cK(b,a){var c=b.cL(a,T);
if(c>0){return M.abs(this.cJ(b,a))/c}}function cM(b,a){return((a.x-b.x)*(this.y-b.y)-(a.y-b.y)*(this.x-b.x))}function cs(b,a){return new cb(0.5*(b.x+a.x),0.5*(b.y+a.y),0.5*(b.z+a.z))}function cN(c,b,a){return this.x>=M.min(c.x,b.x)-a&&this.x<=M.max(c.x,b.x)+a&&this.y>=M.min(c.y,b.y)-a&&this.y<=M.max(c.y,b.y)+a}function cO(f,e,c){for(var b=F,d=1,a=bh(f);
d<a;
d++){if((((f[d].y<=c)&&(c<f[d-1].y))||((f[d-1].y<=c)&&(c<f[d].y)))&&(e<(f[d-1].x-f[d].x)*(c-f[d].y)/(f[d-1].y-f[d].y)+f[d].x)){b=!b}}return b}function cP(c,b){var a=this;
if(b&&(b.x>a.x||b.x2<a.x||b.y>a.y||b.y2<a.y)){return F}return cO(c,a.x,a.y)}function cQ(){return this.x+","+this.y}function cR(b,a){return(this.x+b)+","+(this.y+a)}function cS(){var a=this;
return new cb(a.x,a.y,a.z)}function cT(f,e,b,a){var d=e*ag,c=b*ag;
return new cb(f.x+a*M.cos(c)*M.cos(d),f.y+a*M.cos(c)*M.sin(d),f.z+a*M.sin(c))}function cU(c,b,a){return cT(c,b,0,a)}function cV(e,d,c){var a=e.cL(d),b;
if(!a){return new cb()}b=c/a;
return new cb(b*(d.y-e.y),b*(d.x-e.x),0.5*(e.z+d.z))}function cW(e,d,a,c){var b,f;
if(c){b=1-c;
e.x=b*e.x+d.x*c;
e.y=b*e.y+d.y*c;
d.x=b*d.x+e.x*c;
d.y=b*d.y+e.y*c}if(a){f=cV(e,d,a);
e.x+=f.x;
d.x+=f.x;
e.y-=f.y;
d.y-=f.y}}function cX(d,c,b){var a=1;
if(d>c){a+=0.3*(d-c)/(b-c)}if(a<1.02){a=1}return a*a}function cY(n,b,q,l,g,o){var r=this,i=r.cZ(),c=r.c0.c1.b5(),a=r.c2.c1.b5(),f=r.c3(),e,k,p,j,h,m,d;
g=(g||1);
if(f){e=M.max(f.c4.z,0.5*c5);
k=bi(e,M.min(f.c6.z,-0.5*c5));
g=M.min(g*cX(a.z,k,e),3.5)*b;
b*=cX(c.z,k,e)}else{g*=b}if(!n[aB]&&(p=(c.cL(a,T)/c7))){l=by(l)+c8;
cW(c,a,q,l);
j=c9*(a.y-c.y)/p;
h=c9*(a.x-c.x)/p;
d=i.path("M"+c.c_(-j*b,h*b)+"L"+c.c_(j*b,-h*b)+"L"+a.c_(j*g,-h*g)+"L"+a.c_(-j*g,h*g)+"Z");

if(!o){l-=c8+da;
c=r.c0.c1.b5();
a=r.c2.c1.b5();
cW(c,a,q,l);
j/=c9;
h/=c9;
n[aA]=0;
m=i.path("M"+c.c_(-j*b,h*b)+"L"+c.c_(j*b,-h*b)+"L"+a.c_(j*g,-h*g)+"L"+a.c_(-j*g,h*g)+"Z").attr(aE,n[ay])}}else{cW(c,a,q,l);
d=i.path("M"+c+"L"+a);
n[aA]=c7*M.min(b,g);
if(!o){m=i.path("M"+c+"L"+a)}}r.db.push(d.attr({fill:dc,stroke:dc,"stroke-width":dd*n[aA]}));
if(m){r.db.push(m.attr(n))}}function de(d,c){if(c||st.df||d.dg||d.dh||d.di||d.dj!=C||d.dk!=am||!bh(d.dl)){return T}if(bh(d.dl)!=2){return F}for(var b=0,a=bh(d.dl);
b<a;
b++){if(d.dl[b].dm!=2){return F}}return T}function dn(a){var c=this,b;
if(c.db){if(a&&dp(c.db)){a.insertAfter(c.db)}c.db.remove()}else{if(a&&(b=c.getInsertBefore())){a.insertBefore(b)}}c.db=a}function dq(b){for(var e,d,c=0,a=bh(b);
c<a;
c++){d=b[c].db;
if(dp(d)){if(e){d.insertAfter(e)}e=d}}}function dr(b){var a;
if(b){if(!(a=b.node)&&bh(b)){a=b[0].node}}return(a&&a.parentNode)}function dp(a){var b;
if(a){if(!(b=a.node)&&bh(a)){b=a[bh(a)-1].node}}return(b&&b.parentNode)}function getInsertBefore(){for(var g=this,c=st.ds(),e=g.dt(),b=c.du(F),f,d=0,a=bh(b);
d<a;
d++){f=b[d];
if(f.dt()>=e&&dr(f.db)){return f.db}}}function dv(){this.db=am}function dw(){var d=this,c=d.cZ(),a=0.5*dx,b=c.path("M-"+a+",0H"+a+"M0,-"+a+"V"+a).attr(ay,d.dy?dz:dA).attr(aA,dB).transform("t"+d.c1).data(ap,d).mouseover(dC).mouseout(dD);
d.dn(b)}function dE(){var a=this,b=a.cZ(),d,e=0.5*dF,i=0.5*(1-dG),h=a.dH.b5(),g=a.dH.b5(),c=a.dI.b5(),j=a.dI.b5(),f=dA;
if(a.dJ){f=dK}else{if(a.dy){f=dz}}cW(c,h,e,i);
cW(j,g,-e,i);
d=b.path("M"+a.dI+"L"+a.dH+"L"+h+"M"+a.dH+"L,"+g).attr(ay,f).attr(aA,dB).data(ap,a).mouseover(dL).mouseout(dM);
a.dn(d);
dN(a)}function dO(a){a.remove()}function dP(b){var a=this;
if(a.db){a.db.forEach(dO);
a.db.clear()}else{a.db=b.set()}return a.db}function dQ(){if(!this.dR&&!this.dS&&!this.dT){var N=this,o=N.c3(),j,u,E,B,k,f,J,g,m,b,D,I,l,t,r,G,z,n,L,A,h,a,w,p,v,q=N.cZ(),y={},e=N.c0.c1,d=N.c2.c1,K=bi(e.z,d.z),x=dA,c=(N.dg?1.3:1);
if(o){o.dU();
j=o.c6.z;
u=bi(o.c4.z,j)}if(N.dJ){x=dK}else{if(N.dy){x=dz}}if(N.dg){x=tinycolor.mix(x,"#00f",50)}if(K<u&&j<u){x=tinycolor(x);
y[ay]=x.brighten(0.13*(255-x.getBrightness())*(u-K)/(u-j)).toString()}else{y[ay]=x}N.dP(q);
switch(N.dm){case 1.5:case 2:h=0;
a=bh(N.c0.dl);
w=bh(N.c2.dl);
if((a==1||w==1)&&(a>=3||w>=3||a==w)){}else{p=N.dV();
if(bh(p)){f=0;
for(E=0,B=bh(p);
E<B;
E++){A=bh(p[E].dW);
if(!k||A<f){f=A;
k=p[E]}}J=k.dX()}else{J=new cb();
g=0;
for(E=0,B=bh(N.c0.dl);
E<B;
E++){m=N.c0.dl[E];
b=(N.c0.bK(m.c0)?m.c2:m.c0);
if(b.bK(N.c2)){continue}J.x+=b.c1.x;
J.y+=b.c1.y;
g++}for(E=0,B=bh(N.c2.dl);
E<B;
E++){m=N.c2.dl[E];
b=(N.c2.bK(m.c0)?m.c2:m.c0);
if(b.bK(N.c0)){continue}J.x+=b.c1.x;
J.y+=b.c1.y;
g++}if(g){J.x/=g;
J.y/=g}}h=(e.cG(d)-J.cG(d))*ag;
if(M.abs(h)>M.PI){h*=-1}}if((h+2*M.PI)%M.PI>0.01||(a==2&&w==2)||(p&&bh(p))){N.dY(y,c);
if(N.dm==1.5){y[aB]=[aC]}N.dY(y,c,2*(h>0?-1:1),0.15)}else{N.dY(y,c,-1,-0.05);
if(N.dm==1.5){y[aB]=[aC]}N.dY(y,c,1,-0.05)}break;
case 3:N.dY(y,c,-1.5,0.15),N.dY(y,c),N.dY(y,c,1.5,0.15);
break;
default:if(N.dZ!=0){J=(N.dZ!=1);

N.dY(y,c,0,0,(J?2:4),J)}switch(N.dZ){case 1:break;
case 4:y[aA]=c7*c;
D=e.cL(d);
l=1.5;
I=2;
if(D){G=0;
I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);
n=0;
v="M"+e;
for(E=0;
E<=D;
E+=l){G++;
n=E/D;
z=(G%2?1:-1);
v+="L"+(e.x*(1-n)+(d.x+t*z)*n)+","+(e.y*(1-n)+(d.y-r*z)*n)}N.db.push(q.path(v).attr(y))}break;
case 6:y[aA]=c7*c;
D=e.cL(d);
l=2;
I=2;
if(D){I/=D;
t=I*(d.y-e.y);
r=I*(d.x-e.x);
v="";
for(E=0;
E<=D;
E+=l){n=E/D;
L=1-n;
v+="M"+(e.x*L+n*(d.x+t))+","+(e.y*L+n*(d.y-r))+"L"+(e.x*L+n*(d.x-t))+","+(e.y*L+n*(d.y+r))}N.db.push(q.path(v).attr(y))}break;
default:if(N.dm==0){y[aB]=[aC]}N.dY(y,c)}}}else{this.dn()}dN(this)}function d0(a,c){var b=this;
a.d1.attr(ax,16*c).attr(aA,c7);
a.bbox=a.d1.getBBox(T);
a.d2=b.d3.rect(a.bbox.x-a.d4,a.bbox.y-a.d4,a.bbox.width+2*a.d4,a.bbox.height+2*a.d4,1.5).attr(aE,a.dc).attr(aA,0).insertBefore(a.d1);
b.d5.push(a.d2,a.d1);
b.d6.push(a)}function d7(b,a){var e=this,d,c;
if(d8){if(b){e.x+=b;
e.d1.node.setAttribute("x",e.x);
e.d2.node.setAttribute("x",e.x-e.d4)}if(a){e.y+=a;
e.d1.node.setAttribute("y",e.y);
e.d2.node.setAttribute("y",e.y-e.d4)}}else{e.x+=by(b);
e.y+=by(a);
d=M.round(e.x*al);
c=M.round(e.y*al);
e.d1.shape.path=" m"+d+","+c+" l"+(d+1)+","+c+" e"}}function d9(b,h,f,i,e,g,c,d){var a=this;
a.d3=b;
a.x=h;
a.y=f;
a.dc=g;
a.d4=by(c);
a.d1=a.d3.text(h,f,i).attr(ay,e).attr(aE,e).attr(aD,"start");
if(d){a.d1.attr("font-weight","bold")}a.bbox=a.d1.getBBox(T);
a.d_=d7}function ea(){for(var c=this,b=0,a=bh(c.d6);
b<a;
b++){c.d6[b].d1.insertAfter(c.d5)}return this.d5}function eb(c,a){var b=this;
b.d3=c;
b.d5=a;
b.d6=[];
b.ec=d0;
b.ea=ea}function ed(){if(!this.dS&&!this.dR&&!this.dT){var I=this,v=I.cZ(),x=I.c1,z=I.ee(),l,a,j,J=dc,d=I.ef(),t=d.eg,e,b,q,E,f,u,g,r,k,n,y,c,h=0,G=0,D=0,o,w=0.8,B,A,m=I.dg;
if(!v){return}if(t&&eh=="tmpl"&&d.bK(t.ei)){J=ej}if(I.dJ){j=dK}else{j=dA}if(m||d.bK(ek)){a=(this.el?em:en)}else{if(I.dy){a=dz}}I.dP(v);
if(!de(I,z)){if(a||J!=dc){l=v.rect(x.x-eo*ep,x.y-eo*ep,2*eo*ep,2*eo*ep);
if(a){l.attr(ay,a).attr(aA,c7)}else{l.attr(aA,0)}if(J!=dc){l.attr(aE,(eq?"red":J))}I.db.push(l)}}else{e=new eb(v,I.db);
b=!!(A=bh(I.dl));
for(B=0;
B<A;
B++){q=I.dl[B];
o=er(q.c0,q.c2)+90;
if(I.bK(q.c2)){o+=af}o%=ak;
if(o>af){b=F;
break}}E=new d9(v,0,0,I.dj+(st.df&&!I.dJ?I.getIndex()+1:""),j,J,ep,m);
E.d1.attr(aD,"middle");
f=es*et/E.bbox.height;
e.ec(E,f);
u=E.bbox.width*0.5;
G-=u;
h-=u;
D+=u;
g=I.eu();
if(g&&!b){r=new d9(v,D,0,H,j,dc,ep,m);
e.ec(r,f);
D+=r.bbox.width;
if(g>1){k=new d9(v,D,0.4*E.bbox.height,g,j,dc,ep,m);
e.ec(k,f*w)}}if(z||I.dh){n="";
if(z&&M.abs(z)!=1){n+=M.abs(z)}if(z){n+=(z>0?"+":"\u2013")}if(I.dh==1){n+=":"}else{if(I.dh==2){n+="."}else{if(I.dh==3){n+=".."}}}y=new d9(v,D,-0.5*E.bbox.height,n,j,dc,ep,m);
e.ec(y,f*w)}if(I.di){c=new d9(v,0,-0.5*E.bbox.height,M.round(I.di),j,dc,ep,m);
e.ec(c,f*w);
G-=c.bbox.width;
c.d_(G)}if(g&&b){if(g>1){k=new d9(v,0,0.4*E.bbox.height,g,j,dc,ep,m);
e.ec(k,f*w);
h=M.min(G,h-k.bbox.width);
k.d_(h)}r=new d9(v,0,0,H,j,dc,ep,m);
e.ec(r,f);
h-=r.bbox.width;
r.d_(h)}I.db.transform("t"+x);
if(a){I.db.push(v.rect(x.x+h-ep,x.y-E.bbox.height*0.5,D-h+2*ep,E.bbox.height).attr(ay,a).attr(aA,c7))
}}}else{this.dn()}dN(this)}function ev(){if(!this.ew&&!this.dT){var b=this,f,d,e,l,j,k={},c=b.cZ(),m=new eb(c,b.dP(c)),a,h,g;
if(b.type==ar){a=b.dX();
h=new d9(c,a.x,a.y,b.dj,dA,dc,ep,(b.dy?dz:am));
h.d1.attr(aD,"middle");
g=es*et/h.bbox.height;
m.ec(h,g)}else{a=b.ex();
k[ay]=(b.dy?dz:dA);
k[aA]=c7;
for(f=0,d=bh(b.ey);
f<d;
f++){e=b.ey[f];
l=e.dI.b5();
j=e.dH.b5();
cW(l,j,et*0.4*(a.ez(l,j)?-1:1));
b.db.push(c.path("M"+l+"L"+e.dI+"L"+e.dH+"L"+j).attr(k))}if(b.dj){j=b.eA(3);
h=new d9(c,j.x+et*0.3,j.y+et*0.3,b.dj,dA,dc,ep);
g=es*et/h.bbox.height;
m.ec(h,g);
b.db=m.ea()}}if(c==aW){b.db.click(function(i){b.eB(i);
return bg(i)}).mousedown(bg).mouseup(eC)}}else{this.dn()}dN(this)}function cb(a,d,c){var b=this;
b.x=by(a);
b.y=by(d);
b.z=by(c);
b.cE=b8;
b.cr=b9;
b.ct=b_;
b.cm=cc;
b.eD=cl;
b.eE=co;
b.eF=cp;
b.cu=cx;
b.eG=cw;
b.eH=cq;
b.eI=cv;
b.eJ=cn;
b.bK=cd;
b.bh=cy;
b.cL=cz;
b.ca=ck;
b.cf=cA;
b.ci=cB;
b.eK=cC;
b.eL=cD;
b.cG=cF;
b.cj=cH;
b.ez=cI;
b.cg=ch;
b.eM=cK;
b.cJ=cM;
b.eN=ce;
b.cN=cN;
b.cP=cP;
b.b5=cS;
b.toString=cQ;
b.c_=cR}function eO(){var a=this;
bH.apply(a);
a.moveBy=a.cm=eP;
a.rotateBy=a.eE=eQ;
a.rotate3D=a.eF=eR;
a.rotateAround=a.eS=eT;
a.rotateAroundUnit=a.cu=eU;
a.flip=a.eJ=eV;
a.getCenter=a.dX=eW;
a.eX=eY;
a.dn=eZ;
a.dv=e0}function e1(){var a=this;
bH.apply(a);
a.ef=e2;
a.dn=dn;
a.dP=dP;
a.dv=dv;
a.getInsertBefore=getInsertBefore}function e3(b,a){if(a){bW(b,a)}b.dT=T;
b.dn();
dN(b)}function e4(b){for(var c=0,a=bh(b);
c<a;
c++){e3(b[c])}b.length=0}function e5(d,c){var e=d.dt(),f=c.dt();
if(e<f){return -1}if(e>f){return 1}return 0}function e6(c){for(var d=[],b=0,a=bh(c);
b<a;
b++){b2(d,e7(c[b]))}return d}function e7(a){if(!a||a.e8||a.dT){return}var b=a.cZ();
if(b){b2(b.e8,a);
a.e8=T}return b}function dN(a){if(!a||!a.e8){return}var b=a.cZ();
if(b){bW(a,b.e8);
a.e8=am}}function e9(){dq(st.ds().du(F))}function e_(d){var b,a,c;
if($.isArray(d)){for(b=0,a=bh(d);
b<a;
b++){e_(d[b])}}else{while(bh(d.e8)){c=d.e8.pop();
if(c.dT){c.dn()}else{c.e8=am;
c.eX()}}if(c){e9();
d.renderfix()}}}function resetDirty(b){while(bh(b.e8)){var a=b.e8.pop();
a.e8=am}}function fa(){var d=this,c,e,b,a;
if(!d.c6||!d.c4){d.c6=new cb(ao,ao,ao);
d.c4=new cb(-ao,-ao,-ao);
c=d.fb(T);
if(!bh(c)){c=d.fb()}for(b=0,a=bh(c);
b<a;
b++){e=c[b];
fc(d,e)}}}function fc(a,b){fd(a,b.x);
fe(a,b.y);

ff(a,b.z)}function fd(b,a){if(a>b.c4.x){b.c4.x=a}if(a<b.c6.x){b.c6.x=a}}function fe(b,a){if(a>b.c4.y){b.c4.y=a}if(a<b.c6.y){b.c6.y=a}}function ff(b,a){if(a>b.c4.z){b.c4.z=a}if(a<b.c6.z){b.c6.z=a}}function eW(){if(!this.fg){var e=this,b=new cb(),d=e.fb(T),c,a;
if(!bh(d)){d=e.fb()}for(c=0,a=bh(d);
c<a;
c++){b.cm(d[c])}if(a>1){b.x/=a;
b.y/=a;
b.z/=a}e.fg=b}return this.fg}function eZ(){if(this.db){dn.apply(this)}for(var c=this.du(T),b=0,a=bh(c);
b<a;
b++){c[b].dn()}}function e0(){if(this.db){dv.apply(this)}for(var c=this.du(T),b=0,a=bh(c);
b<a;
b++){c[b].dv()}}function eY(){var a=e6(this.du(F));
e_(a)}function eP(c,b,f){for(var e=this.fb(),d=0,a=bh(e);
d<a;
d++){e[d].cm(c,b,f)}this.fh(a9);
e6(this.du(F))}function eQ(f,b){var e,d,a,c,g=this;
if(!b){b=g.dX().b5();
c=T}e=g.fb();
for(d=0,a=bh(e);
d<a;
d++){e[d].eE(f,b)}g.fh((c?a_:bb));
e6(g.du(F))}function eR(e,d,b){var f,c,a,g=this;
if(!b){b=g.dX().b5()}f=g.fb();
for(c=0,a=bh(f);
c<a;
c++){f[c].eF(e,d,b)}g.fh(bb);
e6(g.du(F))}function eU(f,c,b){for(var g=this,e=g.fb(),d=0,a=bh(e);
d<a;
d++){e[d].cu(f,c,b)}g.fh(bb);
e6(g.du(F))}function eT(e,b,d){var a,c;
if(a=b.cL(d)){c=d.cr(b);
c.eD(1/a);
this.cu(e,c,b)}}function fi(d,b){var e,c,a,f=this;
if(!b){b=f.dX().b5()}e=f.fb();
for(c=0,a=bh(e);
c<a;
c++){e[c].eD(d,b)}f.fh(bb);
e6(f.du(F))}function eV(c,b){if(!b){b=this.dX()}for(var e=this.fb(),d=0,a=bh(e);
d<a;
d++){e[d].eJ(c,b)}this.fh(a9);
e6(this.du(F))}function fj(){return 0}function fk(){return ao}function fl(){return this.c1.z}function fm(a){bW(a,this.fn)}function fo(){var b=this,a;
if(b.eg){for(a=bh(b.eg.dl)-1;
a>=0;
a--){b.fp(b.eg.dl[a])}for(a=bh(b.eg.dW)-1;
a>=0;
a--){b.fq(b.eg.dW[a])}}else{b.eg=new fr()}b.fs=new ft(aW);
b.fs.fu(b.eg);
b.fv=new b6();
b.fv.fw=T}function fx(){var a=this;
return !a.fs||!a.eg||(!a.fs.fy&&!bh(a.eg.dW)&&!bh(a.eg.dl))}function fz(){for(var c=this.fs.du(F),b=0,a=bh(c);
b<a;
b++){c[b].eX();
aW.fA.push(c[b].db)}}function fB(c,a){var b=this;
b.fy=new fC(c,a);
b.fy.dJ=T;
b.fs.fD(b.fy);
return b.fy}function fE(a){var b=this.fv.b4(a);
fF(b,a);
bR(b.dl,a.dl);
this.eg.fG(b);
return b}function fH(b){var c=b.dR,a=b;
if(!c){c=b;
a=b.fI}e3(c,this.eg.dW);
delete c.dR;
if(a){delete a.e8;
e7(a);
delete a.dR}}function fJ(a){var b=this.fv.b4(a);
fF(b,a);
this.eg.fK(b);
return b}function fL(c,b){for(var a=bh(c)-1;
a>=0;
a--){c[a].dJ=b}}function fF(c,a){c.dJ=T;
c.fI=a;
var b;
if((b=c.eg)&&a.eg){b.dJ=T;
b.fI=a.eg;
if(b=b.fM){b.dJ=T;
b.fI=a.eg.fM}}a.dR=c}function fN(b){var c=b.dR,a=b;
if(!c){c=b;
a=b.fI}e3(c,this.eg.dl);

delete c.dR;
if(a){delete a.e8;
e7(a);
delete a.dR}}function fO(b){for(var d,c=0,a=bh(b.dW);
c<a;
c++){d=this.fG(b.dW[c]);
d.dl=[]}for(c=0,a=bh(b.dl);
c<a;
c++){this.fK(b.dl[c])}}function fP(c){for(var b=0,a=bh(c.fQ);
b<a;
b++){this.fu(c.fQ[b])}}function fR(){var a=this;
a.fG=fE;
a.fq=fH;
a.fK=fJ;
a.fp=fN;
a.fu=fO;
a.fS=fP;
a.fT=fB;
a.eX=fz;
a.fU=fo;
a.fV=fx;
a.fU()}function e2(){return(this.fI?this.fI:this)}fW={H:{fX:1,m:1.00794,v:1,fY:T,fZ:1.007825,f0:{1:1.007825,2:2.0141018,3:3.0160493}},D:{fX:1,m:2.01402,v:1,fZ:2.014102},T:{fX:1,m:3.0160492,v:1,fZ:3.0160492},He:{fX:2,m:4.002602,fZ:4.002603,f0:{3:3.0160293,4:4.0026032}},Li:{fX:3,f1:T,m:6.941,f2:7,fZ:7.016005,f0:{5:5.0125378,6:6.0151223,7:7.016004}},Be:{fX:4,f1:T,m:9.012182,f2:6,fZ:9.012183,f0:{7:7.0169292,9:9.0121821,10:10.0135337}},B:{fX:5,m:10.811,v:3,f2:5,fZ:11.009305,f0:{10:10.012937,11:11.0093055}},C:{fX:6,m:12.011,v:4,fY:T,fZ:12,f0:{11:11.0114338,12:12,13:13.0033548,14:14.003242}},N:{fX:7,m:14.00674,v:5,fZ:14.003074,f0:{13:13.0057386,14:14.003074,15:15.0001089,17:17.0084497}},O:{fX:8,m:15.9994,v:6,fZ:15.994915,f0:{14:14.0085953,15:15.0030654,16:15.9949146,17:16.9991315,18:17.9991604,19:19.0035787,20:20.0040761,21:21.0086546}},F:{fX:9,m:18.9984032,v:7,fZ:18.998403,f0:{17:17.0020952,18:18.0009377,19:18.9984032,20:19.9999813,21:20.9999489}},Ne:{fX:10,m:20.1797,fZ:19.992439,f0:{19:19.0018798,20:19.9924402,21:20.9938467,22:21.9913855,23:22.9944673,24:23.9936151}},Na:{fX:11,f1:T,m:22.989768,f2:7,fZ:22.98977,f0:{21:20.9976551,22:21.9944368,23:22.9897697,24:23.9909633,25:24.9899544}},Mg:{fX:12,f1:T,m:24.305,f2:6,fZ:23.985045,f0:{22:21.9995741,23:22.9941248,24:23.9850419,25:24.985837,26:25.982593,27:26.9843407,28:27.9838767}},Al:{fX:13,f1:T,m:26.9811539,f2:5,fZ:26.981541,f0:{25:24.9904286,26:25.9868917,27:26.9815384,28:27.9819102,29:28.9804448}},Si:{fX:14,m:28.0855,v:4,fZ:27.976928,f0:{27:26.9867048,28:27.9769265,29:28.9764947,30:29.9737702,31:30.9753633,32:31.9741481}},P:{fX:15,m:30.973762,v:5,fZ:30.973763,f0:{29:28.9818014,30:29.9783138,31:30.9737615,32:31.9739072,33:32.9717253,34:33.9736364}},S:{fX:16,m:32.066,v:6,fZ:31.972072,f0:{31:30.9795544,32:31.9720707,33:32.9714585,34:33.9678668,35:34.9690321,36:35.9670809,37:36.9711257,38:37.9711634,39:38.9751353}},Cl:{fX:17,m:35.4527,v:7,fZ:34.968853,f0:{33:32.9774518,34:33.973762,35:34.9688527,36:35.9683069,37:36.9659026,38:37.9680106,39:38.9680077,40:39.9704156,41:40.9706502}},Ar:{fX:18,m:39.948,fZ:39.962383,f0:{36:35.9675463,37:36.9667759,38:37.9627322,39:38.9643134,40:39.9623831,41:40.9645008,42:41.9630464,43:42.9656707,44:43.9653653,45:44.968095}},K:{fX:19,f1:T,m:39.0983,f2:17,fZ:38.963708,f0:{38:37.9690801,39:38.9637069,40:39.9639987,41:40.961826,42:41.9624031,43:42.9607157,44:43.9615561,45:44.9606997,46:45.9619762}},Ca:{fX:20,f1:T,m:40.078,f2:16,fZ:39.962591,f0:{40:39.9625912,41:40.9622783,42:41.9586183,43:42.9587668,44:43.9554811,45:44.9561859,46:45.9536928,47:46.9545465,48:47.9525335,49:48.9556733}},Sc:{fX:21,f1:T,m:44.95591,f2:15,fZ:44.955914,f0:{43:42.961151,44:43.959403,45:44.9559102,46:45.9551703,47:46.952408,48:47.952235,49:48.9500241}},Ti:{fX:22,f1:T,m:47.867,f2:14,fZ:47.947947,f0:{44:43.9596902,45:44.9581243,46:45.9526295,47:46.9517638,48:47.9479471,49:48.9478708,50:49.9447921,51:50.946616,52:51.9468982}},V:{fX:23,f1:T,m:50.9415,f2:13,fZ:50.943963,f0:{47:46.9549069,48:47.9522545,49:48.9485169,50:49.9471628,51:50.9439637,52:51.9447797,53:52.9443425}},Cr:{fX:24,f1:T,m:51.9961,f2:12,fZ:51.94051,f0:{48:47.9540359,49:48.9513411,50:49.9460496,51:50.9447718,52:51.9405119,53:52.9406538,54:53.9388849,55:54.9408442,56:55.9406452}},Mn:{fX:25,f1:T,m:54.93805,f2:11,fZ:54.938046,f0:{51:50.9482155,52:51.9455701,53:52.9412947,54:53.9403632,55:54.9380496,56:55.9389094,57:56.9382875}},Fe:{fX:26,f1:T,m:55.845,f2:10,fZ:55.934939,f0:{52:51.9481165,53:52.9453123,54:53.9396148,55:54.938298,56:55.9349421,57:56.9353987,58:57.9332805,59:58.9348805,60:59.9340769,61:60.9367495}},Co:{fX:27,f1:T,m:58.9332,f2:9,fZ:58.933198,f0:{55:54.9420031,56:55.9398439,57:56.9362962,58:57.9357576,59:58.9332002,60:59.9338222,61:60.9324794,62:61.9340542}},Ni:{fX:28,f1:T,m:58.6934,f2:10,fZ:57.935347,f0:{56:55.9421363,57:56.9398005,58:57.9353479,59:58.9343516,60:59.9307906,61:60.9310604,62:61.9283488,63:62.9296729,64:63.9279696,65:64.930088,66:65.9291152}},Cu:{fX:29,f1:T,m:63.546,f2:7,fZ:62.929599},Zn:{fX:30,f1:T,m:65.39,f2:6,fZ:63.929145},Ga:{fX:31,m:69.723,f2:5,fZ:68.925581},Ge:{fX:32,m:72.61,fZ:73.921179},As:{fX:33,m:74.92159,fZ:74.921596},Se:{fX:34,m:78.96,fZ:79.916521},Br:{fX:35,m:79.904,v:7,fZ:78.918336},Kr:{fX:36,m:83.8,fZ:83.911506},Rb:{fX:37,f1:T,m:85.4678,f2:17,fZ:84.9118},Sr:{fX:38,f1:T,m:87.62,f2:16,fZ:87.905625},Y:{fX:39,f1:T,m:88.90585,f2:15,fZ:88.905856},Zr:{fX:40,f1:T,m:91.224,f2:14,fZ:89.904708},Nb:{fX:41,f1:T,m:92.90638,f2:13,fZ:92.906378},Mo:{fX:42,f1:T,m:95.94,f2:12,fZ:97.905405},Tc:{fX:43,f1:T,m:97.9072,f2:11},Ru:{fX:44,f1:T,m:101.07,f2:10,fZ:101.904348},Rh:{fX:45,f1:T,m:102.9055,f2:9,fZ:102.905503},Pd:{fX:46,f1:T,m:106.42,f2:8,fZ:105.903475},Ag:{fX:47,f1:T,m:107.8682,f2:7,fZ:106.905095},Cd:{fX:48,f1:T,m:112.411,f2:6,fZ:113.903361},In:{fX:49,f1:T,m:114.818,f2:5,fZ:114.903875},Sn:{fX:50,f1:T,m:118.71,fZ:119.902199},Sb:{fX:51,m:121.76,fZ:120.903824},Te:{fX:52,m:127.6,fZ:129.906229},I:{fX:53,m:126.90447,v:7,fZ:126.904477},Xe:{fX:54,m:131.29,fZ:131.904148},Cs:{fX:55,f1:T,m:132.90543,f2:17,fZ:132.905433},Ba:{fX:56,f1:T,m:137.327,f2:16,fZ:137.905236},La:{fX:57,f1:T,m:138.9055,f2:15,fZ:138.906355},Ce:{fX:58,f1:T,m:140.115,f2:15,fZ:139.905442},Pr:{fX:59,f1:T,m:140.90765,f2:15,fZ:140.907657},Nd:{fX:60,f1:T,m:144.24,f2:15,fZ:141.907731},Pm:{fX:61,f1:T,m:144.9127,f2:15},Sm:{fX:62,f1:T,m:150.36,f2:15,fZ:151.919741},Eu:{fX:63,f1:T,m:151.965,f2:15,fZ:152.921243},Gd:{fX:64,f1:T,m:157.25,f2:15,fZ:157.924111},Tb:{fX:65,f1:T,m:158.92534,f2:15,fZ:158.92535},Dy:{fX:66,f1:T,m:162.5,f2:15,fZ:163.929183},Ho:{fX:67,f1:T,m:164.93032,f2:15,fZ:164.930332},Er:{fX:68,f1:T,m:167.26,f2:15,fZ:165.930305},Tm:{fX:69,f1:T,m:168.9342,f2:15,fZ:168.934225},Yb:{fX:70,f1:T,m:173.04,f2:15,fZ:173.938873},Lu:{fX:71,f1:T,m:174.967,f2:15,fZ:174.940785},Hf:{fX:72,f1:T,m:178.49,f2:14,fZ:179.946561},Ta:{fX:73,f1:T,m:180.9479,f2:13,fZ:180.948014},W:{fX:74,f1:T,m:183.84,f2:12,fZ:183.950953},Re:{fX:75,f1:T,m:186.207,f2:11,fZ:186.955765},Os:{fX:76,f1:T,m:190.23,f2:10,fZ:191.961487},Ir:{fX:77,f1:T,m:192.217,f2:9,fZ:192.962942},Pt:{fX:78,f1:T,m:195.08,f2:8,fZ:194.964785},Au:{fX:79,f1:T,m:196.96654,f2:7,fZ:196.96656},Hg:{fX:80,f1:T,m:200.59,f2:6,fZ:201.970632},Tl:{fX:81,f1:T,m:204.3833,f2:5,fZ:204.97441},Pb:{fX:82,f1:T,m:207.2,f2:4,fZ:207.976641},Bi:{fX:83,f1:T,m:208.98037,f2:3,fZ:208.980388},Po:{fX:84,f1:T,m:208.9824},At:{fX:85,m:209.9871},Rn:{fX:86,m:222.0176},Fr:{fX:87,f1:T,m:223.0197},Ra:{fX:88,f1:T,m:226.0254},Ac:{fX:89,f1:T,m:227.0278},Th:{fX:90,f1:T,m:232.0381,fZ:232.038054},Pa:{fX:91,f1:T,m:231.03588},U:{fX:92,f1:T,m:238.0289,fZ:238.050786},Np:{fX:93,f1:T,m:237.0482},Pu:{fX:94,f1:T,m:244.0642},Am:{fX:95,f1:T,m:243.0614},Cm:{fX:96,f1:T,m:247.0703},Bk:{fX:97,f1:T,m:247.0703},Cf:{fX:98,f1:T,m:251.0796},Es:{fX:99,f1:T,m:252.083},Fm:{fX:100,f1:T,m:257.0915},Md:{fX:101,f1:T,m:256.094},No:{fX:102,f1:T,m:259.1009},Lr:{fX:103,f1:T,m:262.11},Rf:{fX:104,f1:T,m:261.11},Db:{fX:105,f1:T,m:268},Sg:{fX:106,f1:T,m:271},Bh:{fX:107,f1:T,m:270},Hs:{fX:108,f1:T,m:277},Mt:{fX:109,f1:T,m:276},Ds:{fX:110,f1:T,m:281},Rg:{fX:111,f1:T,m:272},Cn:{fX:112,f1:T},"%":{f3:T},M:{f3:T},X:{f3:T},Ln:{f3:T}};

function f4(){if(!this.eg){return -1}return bQ(this.eg.dW,this)}function f5(a){return bs(round(a/et,4,3),10)}function f6(){var e=0,g=this,d=bs("0",3),f=(g.dk!=am?g.dk+1:0),a=g.f7(),b=M.round(by(g.f8)),c=g.f9;
if(g.di&&c){e=M.round(g.di-c.m);
if(e<-3||e>4){e=0}}if(!c||a==c.v){a=0}else{if(a==0){a=15}}if(b!=0&&M.abs(b)<4){b=4-b}else{if(b!=4){b=0}}return"\n"+f5(g.c1.x)+f5(-g.c1.y)+f5(g.c1.z)+S+bu(g.dj,3,S)+bs(e,2)+bs(b,3)+d+bs(f,3)+d+bs(a,3)+br(d,6)}function f_(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}this.dj=a;
this.ga=am;
this.f9=fW[a]}function gb(b){if(!b){return}var e=0,d,a,g,f;
for(d=0,a=bh(b);
d<a;
d++){g=b.charAt(d);
if(g=="+"){e++}else{if(g=="-"){e--}}}f=bA(b);
if(f===""){return e}return f*e}function gc(b){if(b==H){return 1}if(b){if(b.charAt(0)==H){var a=bf(b.substr(1));
if(!isNaN(a)){return a}}}return am}function gd(p,r){var w=this,e,m,b,v,n,f,u,d,g,j,q,o,h=0,a=0,t,k,l=w.el;
if(l&&l.type==as){return}if(!r&&(e=ge(p))){if(l){return}m=w.eg;
b=m.fM;
v=w;
n=1;
u=e.gf();
d=u.eg;
if(bh(w.dl)>1){if(bh(u.dl)>1){v=new gg(gh(w.ef(),1));
if(w.dJ){v=gi.fG(v)}f=new gj(w,v,1,0);
if(w.dJ){f=gi.fK(f)}else{m.fG(v);
m.fK(f)}}else{n=2;
f=u.dl[0]}}else{f=w.dl[0]}d.cm(v.c1.cr(u.c1));
if(f){g=er(f.c0,f.c2)+((f.c2.bK(v)||f.c2.bK(v.fI))?af:0)-u.gk(1);
d.eE(g*ag,v.c1)}if(w.dJ){d.ei=am;
gi.fu(d);
u=u.dR}else{b.gl(m,d);
if(w.dy){st.gm().fu(d)}}if(n==2){m.gn(u,v)}else{if(!w.dJ){m.gn(v,u)}}}else{w.dh=0;
j="";
for(q=0,o=bh(p);
q<o;
q++){t=p.charAt(q);
if(t=="."){h++}else{if(t==":"){a++}else{j+=t}}}if(a==1){w.dh=1}else{if(h>0){w.dh=h+1}}if(k=a7.exec(j)){w.di=bx(bf(k[1]),0);
w.go(k[2]);
w.dk=gc(k[3]);
w.f8=gb(k[4])}else{if(!!bC("wildcards")){w.go(j)}}w.fh(bc)}}function gp(b){var c,f,d,a,e;
if(c=this.f9){if(a=this.di){if((f=c.f0)&&(f=f[a])){return f}e=c.fX;
f=a-e;
d=15.67*a-17.23*M.pow(a,2/3)-0.714*e*(e-1)*M.pow(a,-1/3)-23.2875*M.pow(f-e,2)/a;
if(!(a%2)){d+=11.2*M.pow(a,-0.5)*(e%2?-1:1)}return(939.553*f+938.259*e-d)/931.494061}else{return(b?c.fZ:c.m)}}}function gq(b,a){this.gr=a;
this.cG=er(b,a)}function gs(d,c){if(d.cG<c.cG){return -1}if(d.cG>c.cG){return 1}return 0}function gt(l,o){var k=(o?o.concat():[]),m,f=this.ef(),a=bh(f.dl),p,q,c,e,b,d,n,h=0,g;
for(c=0;
c<a;
c++){p=f.dl[c];
q=(p.c0.bK(f)?p.c2:p.c0);
k.push(new gq(f,q))}a=bh(k);
k.sort(gs);
if(l){m=f.c1.cG(l);
for(c=0;
c<a;
c++){b=(c+1)%a;
e=k[c].cG;
d=(k[b].cG+ak)%ak;
if(b==0&&(m<d||e<m)){m=0.5*(e+d+ak);
break}else{if(e<m&&m<d){m=0.5*(e+d);
break}}}}else{for(c=0;
c<a;
c++){b=(c+1)%a;
n=(720+k[b].cG-k[c].cG)%ak;
if(n>h){h=n;
g=c}}m=k[g].cG+0.5*h}return m}function gu(){var c=this.ef(),e,a,b,d=c.c1,f=d.z;
for(b=bh(c.dl)-1;
b>=0;
b--){e=c.dl[b];
a=(e.c0.bK(c)?e.c2:e.c0);
if(M.abs(a.c1.z-f)>0.05*d.cL(a.c1)){return F}}return T}function gv(b){var e=this,d=bh(e.dl),a,c;
if(b){if(d==2){for(c=0;
c<d;
c++){a=e.dl[c].gw(e);
if(!a.bK(b)){return a}}}}else{if(d==1){return e.dl[0].gw(e)}}return am}function gx(g,e){var f,d=this.ef(),c=bh(d.dl),h,i,b,a;
if(!c){if(e){f=d.c1.cG(e)}else{f=-30}}else{if(c==1){h=d.dl[0];
i=d.gy();
if(g+h.dm==4){f=er(d,i)+af}else{if(e){f=er(d,i);
f+=M.round((d.c1.cG(e)-f+720)/60)*60
}else{b=i.gy(d);
if(b){a=(er(i,d,b)+af)%ak}f=er(d,i)+ae*(a<af?1:-1)}}}else{f=d.gz(e)}}return f}function gA(){for(var b=0,c=0,a=bh(this.dl);
c<a;
c++){b+=this.dl[c].dm}return b}function gB(b){if(b){var c=this,a=c.ee();
c.f8=a+b;
c.fh(bc);
e7(c)}}function gC(){var b=this,a=$.inArray(b.dh,aw);
a++;
a%=bh(aw);
b.dh=aw[a];
b.fh(bc);
e7(b)}function gD(c,a){var b=this;
if(!a){a=[]}else{if(bP(a,b)){return}}a.push(b);
b.z=am;
if(c>bb){b.gE=am;
b.gF=am}a.pop()}function gG(){if(this.ga==am){if(!this.f9){return}return this.f9.v}else{return this.ga}}function gH(a){if(a==am){return ao}var d=this,c=d.gA(),b;
if(d.dh==1||d.dh==3){c+=2}else{if(d.dh==2){c++}}b=by(d.f8);
return(a-b<4?a-c-M.abs(b):8-a-c+b)}function gI(){var d=this,b=d.f7(),c,a;
if(b==am){d.gF=0;
d.gE=0}else{a=d.dk;
if(a==am){a=d.gE=d.gJ(b)}if(a<0&&d.f9){d.gE=0;
c=d.f9.fX;
if(c==5){d.gF=a}else{if(c>10){if(a<8-2*b){a=8-2*b-a}else{a%=2}}d.gF=-a}}else{d.gF=0}if(d.gE>4||d.gE>b+1){d.gE=0}}}function gK(){var a=this;
if(a.dk!=am){return a.dk}if(a.gE==am){a.gL()}return a.gE}function gM(){var a=this;
if(a.f8!=am){return a.f8}if(a.gF==am){a.gL()}return a.gF}function gN(b){if(this.fI){return this.fI.b5(b)}if(!b){b=new b6()}var c=this,a=new gg(c.c1.b5());
bL(b,c,a);
a.go(c.dj);
a.dk=c.dk;
a.dS=c.dS;
a.f8=c.f8;
a.dh=c.dh;
a.di=c.di;
a.ga=c.ga;
a.el=b.b4(c.el);
a.dy=c.dy;
a.dJ=c.dJ;
return a}function gO(){var b=this,a=0;
if(b.dj!=C){a+=2}if(b.di){a+=3}if(b.dh){a+=3}if(b.f8){a+=2}return a}function gP(){if(st.gQ||st.gR()){return}var c=this,b,a,d;
gi.fU();
switch(gS){case aH:b=gi.fG(c);
b.gd(gT());
gi.eX();
break;
case aI:case aJ:if(!gU&&!gV){d=gh(c,gW);
b=gi.fG(c);
a=gi.fG(new gg(d));
gi.fK(new gj(b,a,gW,gX));
a.gd(gT());
gi.eX()}break;
case aQ:if(gU){c.eg.fq(c)}break}}function gY(){gi.fU()}function cZ(){if(this.d3){return this.d3}if(this.eg){return this.eg.cZ()}}function gZ(d){if(d){for(var e,b=this.eg,c=0,a=bh(this.dl);
c<a;
c++){e=this.dl[c];
if((e.c0.bK(d)||e.c2.bK(d))&&(!b||bP(b.dl,e))){return e}}}}function g0(){return this.c1}function g1(a){if(!a||!this.dS){return[this.c1]}return[]}function g2(d,c){if(this.bK(d)){return}if(c){if(bP(c.dW,this)){return c}}else{c=new g3(T)}c.fG(this);
for(var b=0,a=bh(this.dl);
b<a;
b++){this.dl[b].g4(d,c)}return c}function g5(){if(!this.g6){this.g6=[];
var b=this.eg.dV(),c,a;
for(c=0,a=bh(b);
c<a;
c++){if(bP(b[c].dW,this)){this.g6.push(b[c])}}}return this.g6}function g7(){if(this.z==am){for(var d=this,b=d.c1.z,c=0,a=bh(d.dl);
c<a;
c++){b=M.max(d.dl[c].dt(),b)}d.z=b+0.000001}return this.z}function gg(b){var a=this;
e1.apply(a);
a.dj=C;
a.dl=[];
a.dS=F;
a.dh=0;
a.di=0;
a.c1=b;
a.dy=F;
a.dX=g0;
a.fb=g1;
a.g8=gZ;
a.dV=g5;
a.gd=gd;
a.go=f_;
a.getIndex=f4;

a.gz=gt;
a.g9=gu;
a.gy=gv;
a.gk=gx;
a.f7=gG;
a.gJ=gH;
a.gA=gA;
a.g_=gB;
a.ha=gC;
a.fh=gD;
a.gL=gI;
a.eu=gK;
a.ee=gM;
a.hb=gp;
a.hc=gO;
a.g4=g2;
a.getMolecule=hd;
a.he=f6;
a.eX=ed;
a.dt=g7;
a.b5=gN;
a.cZ=cZ;
a.hf=gP;
a.hg=gY}function hh(d){if(!d){d=new b6()}var e=this,b=new e.constructor(),c,a;
bL(d,e,b);
for(c=0,a=bh(e.dl);
c<a;
c++){e.dl[c].b5(d)}for(c=0,a=bh(e.hi);
c<a;
c++){e.hi[c].b5(d)}for(c=0,a=bh(e.dW);
c<a;
c++){b.fG(d.b4(e.dW[c]),T)}for(c=0,a=bh(e.hj);
c<a;
c++){b.hk(d.b4(e.hj[c]),T)}for(c=0,a=bh(e.dl);
c<a;
c++){b.fK(d.b4(e.dl[c]),T)}for(c=0,a=bh(e.hi);
c<a;
c++){b.hl(d.b4(e.hi[c]),T)}b.dj=e.dj;
b.hm=e.hm;
if(e.ey){for(c=0,a=bh(e.ey);
c<a;
c++){b.ey.push(e.ey[c].b5())}}b.hn=e.hn;
b.ew=e.ew;
return b}function ho(d){for(var c=this,b=0,a=bh(c.dW);
b<a;
b++){c.dW[b].dS=d}for(b=0,a=bh(c.dl);
b<a;
b++){c.dl[b].dS=d}for(b=0,a=bh(c.hi);
b<a;
b++){c.hi[b].dS=am}c.ew=!d;
e6(c.dW);
e6(c.dl);
e6(c.hi)}function hp(){for(var d=this,c,b=0,a=bh(d.dW);
b<a;
b++){d.dW[b].dS=T}for(b=0,a=bh(d.hj);
b<a;
b++){d.hj[b].dS=am}for(b=0,a=bh(d.dl);
b<a;
b++){c=d.dl[b];
c.dS=(c.c0.dS||c.c2.dS)&&!d.hq(c)}d.ew=F;
e6(d.dW);
e6(d.dl);
e6(d.hi)}function hr(){for(var c=this,b=0,a=bh(c.dW);
b<a;
b++){c.dW[b].dS=am}for(b=0,a=bh(c.dl);
b<a;
b++){c.dl[b].dS=am}c.ew=am;
e6(c.dW);
e6(c.dl);
e6(c.hi)}function hs(b){var a=b2(this.dW,b);
if(a){b.el=this}return a}function ht(a){if(this.type!=at){return b2(this.hj,a)}return F}function hu(a){return bP(this.hi,a)}function hv(b){if(bP(this.hi,b)){return F}var a=b2(this.dl,b);
if(a){b.el=this}return a}function hw(c,b,a,d){if(bP(a,c[b].c0)){d[2*b]=c[b].c0;
d[2*b+1]=c[b].c2}else{d[2*b]=c[b].c2;
d[2*b+1]=c[b].c0}}function createGroup(){var d=st.gm(),b,c,a;
if(!d.hx){return}a=d.dW[0].eg;
hy(T);
if(bh(d.hi)<=1){c=prompt(s("supaQ"),"")}else{c=prompt(s("multQ"),"")}hy(F);
if(c==null){return}hz();
b=a.hA(c,d.dW,d.dl,d.hi);
d.hB(b);
b.eX();
hC(aW);
return b}function hD(c){for(var e,f,g,b,d=0,a=bh(this.ey);
d<a;
d++){g=this.ey[d].dI;
b=g.x+c*g.y;
if(e==am||b>f){e=g;
f=b}g=this.ey[d].dH;
b=g.x+c*g.y;
if(b>f){e=g;
f=b}}return e}function hE(a){var d=a.dX(),h=d.b5(),g=d.b5(),f=a.c0.c1,e=a.c2.c1,c=hF*(e.x-f.x),b=hF*(e.y-f.y);
h.cm(b,-c);
g.cm(-b,c);
this.ey.push(new hG(h,g))}function hH(){this.ey=[];
for(var b=0,a=bh(this.hi);
b<a;
b++){this.hI(this.hi[b])}}function hJ(b){if($.isArray(b)){for(var c=0,a=bh(b);
c<a;
c++){this.hl(b[c])}}else{if(this.type!=as){if(bP(this.dW,b.c0)){this.hk(b.c0)}else{if(bP(this.dW,b.c2)){this.hk(b.c2)
}}}bW(b,this.dl);
b2(this.hi,b)}}function hK(d){var e=this,b=[],c=0,a=bh(e.hj);
if(d&&!e.ew&&a){for(;
c<a;
c++){b.push(e.hj[c].c1)}}else{for(a=bh(e.dW);
c<a;
c++){b.push(e.dW[c].c1)}}if(e.ey){for(c=0,a=bh(e.ey);
c<a;
c++){b.push(e.ey[c].dI,e.ey[c].dH)}}bS(b,e.fg);
return b}function hL(){var a=this;
if(!a.c6||!a.c4){fa.apply(a);
a.c6.x-=hM;
a.c6.y-=hM;
a.c4.x+=hM;
a.c4.y+=hM}}function hN(){if(st.gR()){return}switch(gS){case aQ:if(gU){this.eg.hO(this);
break}default:var a=this,d,c,b=a.cZ(),f=[],j,h,g=0,e=(d8?1:1/hP);
a.dU();
a.hQ=0;
hR(b.hS);
j=b.set();
j.push(b.text(2,2,"Ph").attr(ax,2).attr("fill-opacity",0.8),b.path("M2,2L4,2L5,3.5L4,5L2,5L1,3.5Z M2.5,2.5L4,2.5 M4.5,3.5L3.5,4.75 M2.5,4.75L1.5,3.5").attr(ay,"#f00").attr(aA,c7).attr(az,0.85),b.path("M1,0L2,2").attr(ay,hT).attr(aA,c7));
f.push(j.transform("t"+(a.c4.x)+","+(a.c6.y+g)).data(ap,a).mousedown(bg).mouseup(eC).click(hU));
h=j.getBBox();
a.hQ+=h.width*1.5*e;
g+=h.height*1.3*e;
if(a.type==ar){f.push(b.path(a.ew?"M0,4H4L2,2.5Z M0,0H4L2,1.5Z":"M0,1.5H4L2,0Z M0,2.5H4L2,4Z").transform("t"+(a.c4.x+e)+","+(a.c6.y+g)).attr(ay,hT).attr(aA,c7).attr(aE,"silver").data(ap,a).mousedown(bg).mouseup(eC).click(hV))}b.hS.push(b.rect(a.c6.x,a.c6.y,a.c4.x+a.hQ-a.c6.x,a.c4.y-a.c6.y).attr(hW).attr(az,0.85).data(ap,a).mouseout(hX));
for(d=0,c=bh(f);
d<c;
d++){b.hS.push(f[d])}b.hS.insertAfter(b.hY)}}function hV(c,a,d,b){if(!b){b=this.data(ap)}hz();
b.hZ(b.ew);
b.eg.fh(bb);
h0=am;
h1(aW);
h2(T);
b.eX();
hC(aW);
return bg(c)}function h3(h){var c=this,g=c.eg,b=bz(c.dj),f,i,l,j,d=st.gm(),a,k;
hy(T);
if(c.type==ar){b=prompt(s("supaQ"),b)}else{b=prompt(s("multQ"),b)}hy(F);
if(b==null){return}k=bf(b);
hz();
if(c.type==as||(c.type==at&&k<h4&&k>1)){if(c.type==as){f=c.hj.concat()}else{f=c.dW.concat()}i=c.dl.concat();
l=c.hi.concat();
if(j=c.dy){d.hO(c)}c.h5(l,i);
a=g.hA(b,f,i,l);
if(j){d.hB(a)}a.eX()}else{c.dj=b;
c.hm=k;
c.eX()}hC(aW)}function hU(c,a,d,b){if(!b){b=this.data(ap)}hz();
b.h5();
hC(aW);
return bg(c)}function hX(){}function h6(j,b,g){var e=j[bh(j)-1],d=0,c=bh(e.dl),h,f,a;
for(;
d<c;
d++){h=e.dl[d];
f=(h.c0.bK(e)?h.c2:h.c0);
if(bP(j,f)){continue}if(h.bK(b)){return h}if(bP(g,f)){j.push(f);
a=h6(j,b,g);
if(a){return a}j.pop()}}}function h7(p,m){var c=this,k=c.eg,o,n,h,f,e,b,g,a,d=st.gm(),l;
if(c.type==as){o=c.hj;
n=b0(c.dW,o);
if(!p){p=c.hi.concat()}if((b=bh(p))==2){for(e=0;
e<b;
e++){for(h=0,f=bh(o);
h<f;
h++){a=o[h];
g=h6([a],p[e],n);
if(!g){continue}l=g.dy;
k.fp(g,T);
if(bP(n,g.c0)){g.c0=a}else{g.c2=a}a.dl.push(g);
g.el=am;
k.fK(g);
if(m){m.push(g)}if(l){d.fK(g)}}}for(h=0,f=bh(n);
h<f;
h++){k.fq(n[h],T)}}}if(c.bK(h0)){h0=am;
h1(aW)}c.dn();
while(bh(c.dW)){g=c.dW.pop();
g.el=am;
g.dS=am;
e7(g)}while(bh(c.dl)){g=c.dl.pop();
g.el=am;
g.dS=am;
e7(g)}c.hj=[];
e3(c,c.h8.h9);
e3(c,k.h9);
d.hO(c);

if(m){bT(m,k.dl);
bU(m,p)}}function h_(){if(!this.eg){return -1}return bQ(this.eg.h9,this)}function ia(b){for(var a=bh(b)-1;
a>=0;
a--){b[a]=parseFloat(b[a])}this.ey.push(new hG(new cb(b[0],-b[1]),new cb(b[2],-b[3])))}function ib(){if(!this.ic){var b=new cb(),d,c,a=bh(this.ey);
if(a>1){for(c=0;
c<a;
c++){d=this.ey[c];
b.cm(d.dI);
b.cm(d.dH)}b.x/=a*2;
b.y/=a*2}this.ic=b}return this.ic}function ie(){return new hG(this.dI.b5(),this.dH.b5())}function hG(b,a){this.dI=b;
this.dH=a;
this.b5=ie}function ig(e,b){if(!b){b=[]}else{if(bP(b,this)){return}}b.push(this);
var d=this,c,a;
if(e==bb){d.fg=am;
d.ic=am}if(e>a9&&e<bc){d.c6=am;
d.c4=am;
for(c=0,a=bh(d.hi);
c<a;
c++){d.hi[c].fh(bb,b)}d.ih()}if(e!=a9){e=bb}for(c=0,a=bh(d.dW);
c<a;
c++){d.dW[c].fh(e,b)}for(c=0,a=bh(d.dl);
c<a;
c++){d.dl[c].fh(e,b)}b.pop()}function ii(){var a=this;
e1.apply(a);
a.dW=[];
a.hj=[];
a.dl=[];
a.hi=[];
a.hQ=0;
a.getIndex=h_;
a.fh=ig;
a.h5=h7;
a.fG=hs;
a.hk=ht;
a.hq=hu;
a.fK=hv;
a.hl=hJ;
a.dX=eW;
a.dU=hL;
a.fb=hK;
a.b5=hh;
a.cZ=cZ;
a.hf=hN;
a.hg=hX;
a.eB=h3;
a.eX=ev;
a.dt=fk}function ij(){ii.apply(this);
this.type=ar;
this.ih=ik;
this.hZ=ho}function il(){var a=this;
ii.apply(a);
a.type=as;
a.ey=[];
a.eA=hD;
a.im=ia;
a.hI=hE;
a.ih=hH;
a.ex=ib;
a.hZ=hp}function io(){il.apply(this);
this.type=at;
this.hZ=hr}function ip(e){if(this.fI){return this.fI.b5(e)}if(!e){e=new b6()}var f=this,d,c,a,b;
if(e.fw){if(d=f.c0.dR){c=d}if(d=f.c2.dR){a=d}}if(!c){c=e.b4(f.c0)}if(!a){a=e.b4(f.c2)}b=new gj(c,a,f.dm,f.dZ);
bL(e,f,b);
b.dS=f.dS;
b.el=e.b4(f.el);
b.dy=f.dy;
return b}function iq(){if(!this.fg){this.fg=cs(this.c0.c1,this.c2.c1)}return this.fg}function ir(f,c){if(!c){c=[]}else{if(bP(c,this)){return}}c.push(this);
if(f==bb){this.fg=am}if(f<bc){var b=this.eg,d,a,e;
if(b){for(d=0,a=bh(b.h9);
d<a;
d++){e=b.h9[d];
if(bP(e.hi,this)){e.fh(bb,c)}}}}c.pop()}function it(){var b=this,a=b.dm;
a=(bk(a8,a)||a);
if(!b.c0||!b.c2||b.c0.bK(b.c2)){return""}return"\n"+bs(b.c0.getIndex()+1,3)+bs(b.c2.getIndex()+1,3)+bs(a,3)+bs(b.dZ,3)+br(bs("0",3),3)}function iu(){if(!this.g6){var d=this,c,b,a;
if(!d.c0.h8){d.eg.iv(T)}c=d.c0.h8.dV();
d.g6=[];
for(b=0,a=bh(c);
b<a;
b++){if(bP(c[b].dl,d)){d.g6.push(c[b])}}}return this.g6}function iw(){var a=0;
if(this.dZ){a+=4}switch(this.dm){case 2:a+=2;
break;
case 3:a--;
break}return a}function ix(b){for(var d,c=0,a=bh(b.dl);
c<a;
c++){d=b.dl[c];
if(d.dm==1){d.dm=2}else{d.dm=1}e7(d)}}function iy(){if(this.dm>2){return}var k=this.dV(),l,h=[],d,a,g,f,e,c,b;
for(g=0,f=bh(k);
g<f;
g++){d=k[g];
a=bh(d.dl);
if(a%4==2){l=F;
for(e=1;
e<a;
e++){b=d.dl[e].dm;

c=d.dl[e-1].dm;
if(c+b!=3||c<1||c>2||b<1||b>2){l=T;
break}}if(!l){h.push(d)}}}if(!bh(h)){return}d=h[0];
a=bh(d.dl);
for(g=1,f=bh(h);
g<f;
g++){if(bh(h[g].dl)<a){d=h[g];
a=bh(d.dl)}}return d}function iz(e,d){if(d){var a=3*ep,c=e.cL(d.c0.c1,T),b=e.cL(d.c2.c1,T);
if(c<a&&c<b){return d.c0}else{if(b<a){return d.c2}}}return am}function iA(b){var c=this,a;
if(c.el&&c.el.type==as){return}if(gX!=0&&gX==c.dZ){a=c.c0;
c.c0=c.c2;
c.c2=a}else{if(gX!=0||gW!=1){c.dm=gW;
c.dZ=gX}else{if(c.dZ!=0){c.dZ=0}else{c.dm%=3;
c.dm++}}}c.c0.fh(bc);
c.c2.fh(bc);
if(!b){e7(c);
e7(c.c0);
e7(c.c2)}}function iB(){if(!this.eg){return -1}return bQ(this.eg.dl,this)}function iC(a){if(!a||!this.dS){return[this.c0.c1,this.c2.c1]}return[]}function iD(b,a){if(a){if(bP(a.dl,this)){return a}}else{a=new g3(T)}a.fK(this);
this.c0.g4(b,a);
this.c2.g4(b,a);
return a}function iE(){var b=this,a=b.eg;
if(b.c0.fI){a=b.c0.fI.eg}else{if(b.fI){a=b.fI.eg}}return a}function iF(){return bi(this.c0.c1.z,this.c2.c1.z)}function iG(a){var b=this;
return(b.c0.bK(a)?b.c2:b.c0)}function iH(){return this.c2.c1.cr(this.c0.c1)}function iI(a){return this.c0.bK(a)||this.c2.bK(a)}function gj(c,b,a,d){var e=this;
e1.apply(e);
e.c0=c;
e.c2=b;
e.dm=a;
e.dZ=d;
e.dy=F;
e.getIndex=iB;
e.fh=ir;
e.iJ=iA;
e.dX=iq;
e.fb=iC;
e.dV=iu;
e.iK=iy;
e.iL=ix;
e.iM=iI;
e.hc=iw;
e.g4=iD;
e.getMolecule=hd;
e.he=it;
e.eX=dQ;
e.dt=iF;
e.b5=ip;
e.gw=iG;
e.iN=iH;
e.cZ=cZ;
e.ef=e2;
e.c3=iE;
e.dY=cY}function iO(g){g.sort(iP);
for(var b=[],d,c=[],e,f=0,a=bh(g);
f<a;
f++){e=g[f];
d=e.dW;
if(!iQ(d)&&!bY(c,d)){b.push(e);
b1(c,d)}}return b}function iQ(b){for(var d,c=0,a=bh(b);
c<a;
c++){d=b[c];
if(d.f9&&d.f9.f1){return T}}return F}function iP(e,c){var f=(e.dW?bh(e.dW):0),d=(c.dW?bh(c.dW):0);
if(f<d){return -1}if(f>d){return 1}return 0}function iR(e,c){var d=bh(e.dV()),f=bh(c.dV()),g,h;
if(d<f){return 1}if(d>f){return -1}g=bh(e.dl),h=bh(c.dl);
if(g<h){return 1}if(g>h){return -1}return 0}function iS(c){var e=this.dW,b=[],d,a,f;
if(c){bR(b,this.dl);
bR(b,e)}else{for(d=0,a=bh(e);
d<a;
d++){f=e[d];
b.push(f);
b1(b,f.dl);
b2(b,f.el)}}return b}function iT(){if(!this.iU){for(var e=this,c=e.dX(),d=e.dW,b=bh(d)-1,a=d[0].c1.cr(c).ci(d[b].c1.cr(c));
b>0;
b--){a.cm(d[b].c1.cr(c).ci(d[b-1].c1.cr(c)))}if(c.eK(a.cE(c),d[0].c1,d[1].c1)>0){a.eD(-1)}e.iV=(e.iU=a.ct()).b5();
e.iV.cm(c)}}function iW(a){var b=this;
b.iX();
return ad-b.fg.cj(a.c1,b.iV)}function iY(){for(var d=0,e=this.dl,b=bh(e),a,c=e[b-1].dm;
d<b;
d++){a=e[d].dm;
if(a==3||(a==2&&c==2)){return T}c=a}}function iZ(){for(var b=0,c=this.dl,a=bh(c);
b<a;
b++){if(c[b].dm!=1){return F}}return T}function i0(){if(!this.fg){var b=new cb(),e=this.dW,d=0,c,a;
for(c=0,a=bh(e);
c<a;
c++){b.cm(e[c].c1);

d++}if(d>1){b.x/=d;
b.y/=d;
b.z/=d}this.fg=b}return this.fg}function i1(e){var c=this,b=[],d=[],h,k,g,f,a;
for(k=0,g=bh(c.dW);
k<g;
k++){h=c.dW[k];
if(!e||!h.dS){b.push(h.c1)}b2(d,h.el)}for(k=0,g=bh(d);
k<g;
k++){h=d[k];
if(h.ey){for(f=0,a=bh(h.ey);
f<a;
f++){b.push(h.ey[f].dI,h.ey[f].dH)}}if(!e){bS(b,h.fg);
bS(b,h.c6);
bS(b,h.c4)}}if(!e){bS(b,c.fg);
bS(b,c.c6);
bS(b,c.c4)}return b}function i2(f){if(!(f instanceof i3)){return F}var k=this.dW,a=bh(k),g,e,h,d,c,b;
if(a!=bh(f.dW)){return F}g=bQ(f.dW,k[0]);
if(g==-1){return F}e=bQ(f.dW,k[1]);
if(e==-1){return F}h=e-g;
if(M.abs(h)==a-1){h=-1}if(M.abs(h)!=1){return F}for(d=2,c=a;
d<c;
d++){b=(c+d*h+g)%c;
if(!k[d].bK(f.dW[b])){return F}}return T}function i4(d,b){if(!b){b=[]}else{if(bP(b,this)){return}}if(d!=ba){b.push(this);
this.iU=am;
if(d==bb){this.fg=am}if(d!=a9){d=bb}for(var c=0,a=bh(this.dW);
c<a;
c++){this.dW[c].fh(d,b)}for(c=0,a=bh(this.dl);
c<a;
c++){this.dl[c].fh(d,b)}b.pop()}}function i5(){var a=this.dW,b=a.concat(),c;
b.sort(iR);
c=bQ(a,b[0]);
bX(a,c);
if(bQ(b,a[1])>bQ(b,a[bh(b)-1])){a.reverse();
bX(a,-1)}}function i3(a,c){var b=this;
b.bI=bD();
b.dW=a;
b.dl=c;
b.i6=i5;
b.du=iS;
b.fh=i4;
b.dX=i0;
b.iX=iT;
b.i7=iW;
b.i8=iY;
b.i9=iZ;
b.fb=i1;
b.bK=i2}function i_(b){var a=b2(this.dW,b);
if(a){b.h8=this}return a}function ja(a){return b2(this.dl,a)}function jb(){for(var b=[],c=0,a=bh(this.dW);
c<a;
c++){b.push(this.dW[c].c1.b5())}return b}function jc(c){var b=0,a=bh(this.dW);
if(bh(c)!=a){alert("Error")}for(;
b<a;
b++){this.dW[b].c1=c[b].b5()}}function jd(g,e,j){var a=bh(e),c=e[a-1],l,f,k,d,b,h;
if(a<=je){for(d=0,b=bh(c.dl);
d<b;
d++){l=c.dl[d];
f=(c.bK(l.c0)?l.c2:l.c0);
if(a>=2&&f.bK(e[a-2])){continue}h=-1;
j[a-1]=l;
if(a>=2){h=bQ(e,f)}if(h==-1){e[a]=f;
jd(g,e,j);
e.length=a}else{k=new i3(e.slice(h),j.slice(h));
b2(g,k)}}}j.length=a-1;
return g}function jf(){var c=this;
if(!c.g6){c.g6=[];
for(var c=this,b=0,a=bh(c.dl);
b<a;
b++){c.dl[b].g6=am}if(bh(c.dW)){jd(c.g6,[c.dW[0]],[])}}return c.g6}function jg(){var a=this;
eO.apply(a);
a.dW=[];
a.h9=[];
a.dl=[];
a.fh=jh;
a.dV=jf;
a.du=ji;
a.fb=jj;
a.eD=jk;
a.dU=fa;
a.jl=jm;
a.ct=jn;
a.jo=jp;
a.fG=i_;
a.fK=ja;
a.jq=jb;
a.jr=jc}function js(t,n,b,h,f,k){if(f){n=f.c1}if(k){b=k.c1}if(!n||!b){return F}var a=et*1.4,u=b.cL(n),o=M.min(M.round(u/a/M.cos(jt*ag)),ju),d,g=jt,l=[],j=[],r,q,c,m,p;
if(o<=0){return F}d=n.cG(b);
if(k){if(o>1){g=M.acos(bB(u/o/a,-0.9,0.9))/ag}}gi.fU();
if(o==1){if(f&&(c=f.g8(k))){if(!h){c=gi.fK(c)}c.iJ();
gi.eX();
return T}else{d+=g}}else{if(o%2){d+=g/(o-1)}}l[0]=M.cos((d-g)*ag);
l[1]=M.cos((d+g)*ag);
j[0]=M.sin((d-g)*ag);
j[1]=M.sin((d+g)*ag);
if(k){o--}if(h){m=st.gm();
if(!t.ctrlKey){m.jv()}if(f){r=f;
h=f.eg}else{r=new gg(n.b5());
h.fG(r);
m.fG(r)}}else{if(f){r=gi.fG(f)}else{r=gi.fG(new gg(n.b5()))}aW.jw.push(aW.text(b.x,b.y+30/hP,o+(f?0:1)).attr(ax,2+20/hP))
}if(!f){r.gd(gT(),T)}for(p=0;
p<o;
p++){q=r.b5();
if(p==0){q.gd(gT(),T)}q.c1.x+=a*l[p%2];
q.c1.y+=a*j[p%2];
if(!h){q=gi.fG(q)}c=new gj(r,q,1,0);
if(h){h.fG(q);
h.fK(c);
m.fK(c);
m.fG(q)}else{c=gi.fK(c)}r=q}if(k){if(h){c=h.fM.jx(r,k,1,0);
m.fK(c)}else{q=gi.fG(k);
c=gi.fK(new gj(r,q,1,0))}}gi.eX();
return T}function jy(d){if(!d){d=new b6()}var e=this,b=new fr(),c,a;
bL(d,e,b);
b.jz=2;
for(c=0,a=bh(e.h9);
c<a;
c++){b.hB(d.b4(e.h9[c]),T)}for(c=0,a=bh(e.dl);
c<a;
c++){b.fK(d.b4(e.dl[c]),T)}for(c=0,a=bh(e.dW);
c<a;
c++){b.fG(d.b4(e.dW[c]),T)}b.ei=d.b4(e.ei);
b.jz=1;
b.iv();
return b}function jh(e,b){if(!b){b=[]}else{if(bP(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a_){d.fg=am;
d.fn=am}if(e>a9&&e<bc){d.c6=am;
d.c4=am}if(e!=ba){if(e!=a9){e=bb}for(c=0,a=bh(d.dW);
c<a;
c++){d.dW[c].fh(e,b)}for(c=0,a=bh(d.dl);
c<a;
c++){d.dl[c].fh(e,b)}if(d.h9){for(c=0,a=bh(d.h9);
c<a;
c++){d.h9[c].fh(e,b)}}if(d.jA){for(c=0,a=bh(d.jA);
c<a;
c++){d.jA[c].fh(e,b)}}if(d.g6){for(c=0,a=bh(d.g6);
c<a;
c++){d.g6[c].fh(e,b)}}}if(d.fM){d.fM.fh(e,b)}else{if(d.eg){d.eg.fh(e,b)}}b.pop()}function jB(f){if(!bh(this.dW)){return}this.dU();
if(f.x>this.c6.x&&f.x<this.c4.x){var e=this,c=new jC(e),d,a,b;
if(!e.jA){e.iv()}if(bh(e.dW)<2){return}for(d=0,a=bh(e.jA);
d<a;
d++){b=e.jA[d];
b.dU();
if(0.5*(b.c6.x+b.c4.x)>f.x){c.jD.push(b)}else{c.jE.push(b)}}return c}}function jk(d,b){if(b){b=this.dX()}for(var e=this.fb(),c=0,a=bh(e);
c<a;
c++){e[c].eD(d,b)}}function jn(){if(bh(this.dW)>1){var h=this,e=0,g=0,d,a,c,f,b;
if(a=bh(h.dl)){for(d=0;
d<a;
d++){f=h.dl[d];
e+=f.c0.c1.cL(f.c2.c1);
g++}}else{for(d=0,a=bh(h.dW);
d<a;
d++){b=h.dW[d];
for(c=0;
c<d;
c++){e+=b.c1.cL(h.dW[c].c1);
g++}}}if(e>0){h.eD(c5*g/e)}}this.dU()}function jF(c,d){var b=c-this.c6.x,a=by(d)-0.5*(this.c6.y+this.c4.y);
this.cm(b,a)}function jG(d,b){var e=this,c,a;
if(e.bK(d)){return}for(c=0,a=bh(d.dW);
c<a;
c++){e.fG(d.dW[c])}for(c=0,a=bh(d.dl);
c<a;
c++){e.fK(d.dl[c])}for(c=0,a=bh(d.h9);
c<a;
c++){e.hB(d.h9[c])}if(e.g6&&d.g6){bR(e.g6,d.g6)}else{e.jH()}e.iv();
if(b||eh=="tmpl"){e.ei=d.ei}e.fh(bb)}function jI(c,b){var d=this,a;
if(b2(d.dW,c)){c.eg=d;
c.dT=am;
c.e8=am;
if(!b){e7(c);
a=d.jJ();
a.fh(ba);
if(a.fI){a.fI.fh(ba)}}return T}return F}function jK(h,c,g,m){var u=this,l,p,n,o,t,d,f,e=[],k=[],a=[],q=[],b,r=bh(m);
if(r<=1){l=new ij();
if(r){l.hk(m[0].c0.dy?m[0].c0:m[0].c2)}}else{if((n=bf(h))<h4&&n>1){l=new il();
u.fp(m[0],T);
u.fp(m[1],T);
bR(e,c);
bR(k,g);
bU(k,m);
hw(m,0,e,a);
hw(m,1,e,a);
for(p=0;
p<n;
p++){if(p>0){b=new b6();
q[p]=b}for(o=0,t=bh(k);
o<t;
o++){d=k[o];
if(p==0){l.fK(d);
b2(e,d.c0);
b2(e,d.c2)}else{f=b.b4(d);
l.fK(f);
u.fK(f,T)}}for(o=0,t=bh(e);
o<t;
o++){d=e[o];
if(p==0){l.fG(d);
l.hk(d)}else{f=b.b4(d);
l.fG(f);
u.fG(f,T)}}}for(p=0;
p<=n;
p++){if(p==0){f=new gj(a[1],a[0],m[0].dm,m[0].dZ);
m[0]=f}else{if(p==n){f=new gj(q[p-1].b4(a[2]),a[3],m[1].dm,m[1].dZ);

m[1]=f}else{if(p==1){f=new gj(a[2],q[p].b4(a[0]),m[1].dm,0)}else{f=new gj(q[p-1].b4(a[2]),q[p].b4(a[0]),m[1].dm,0)}}}l.fK(f);
u.fK(f,T)}}else{l=new io();
if(n){l.hn=""}else{l.hn="HT"}}}l.hl(m);
if(l.type!=as){for(o=0,t=bh(g);
o<t;
o++){l.fK(g[o])}for(o=0,t=bh(c);
o<t;
o++){l.fG(c[o])}}l.dj=h;
l.hm=n;
l.ih();
u.hB(l);
l.hZ(T);
return l}function jL(c,b){if(b2(this.h9,c)){c.eg=this;
var a;
if(c.dW[0]&&(a=c.dW[0].h8)){c.h8=a;
b2(a.h9,c)}c.dT=am;
c.e8=am;
if(!b){e7(c)}return T}return F}function jM(d,c){if(d.bK(c)){return}e7(c);
this.fh(bc);
if(bP(this.dW,c)){e3(d,this.dW)}else{bV(this.dW,d,c);
e3(d)}var f=this,a,e,b;
for(a=bh(d.dl)-1;
a>=0;
a--){e=d.dl[a];
e7(e);
if(e.c0.bK(d)){e.c0=c;
e7(e.c2)}else{if(e.c2.bK(d)){e.c2=c;
e7(e.c0)}}b2(c.dl,e)}c.fh(bc);
if(!d.dJ){b=st.gm();
bV(b.dW,d,c);
c.dy=d.dy}if(d.bK(f.ei)){f.ei=c}f.jH();
f.iv();
if(d.bK(ek)||c.bK(ek)){h2()}}function jN(d,h){var g=this,b,f,c=st.gm(),e,a=d.h8;
g.fh(bb);
e3(d,g.dW);
for(b=bh(d.dl)-1;
b>=0;
b--){f=d.dl[b];
if(f){g.fp(f,h)}}g.jO(d);
bW(d,c.dW);
if(d.bK(g.ei)){g.ei=am}if(g){if(a){bW(d,a.dW);
if(!bh(a.dW)){e3(a,g.jA)}}if(!bh(g.dW)&&(e=g.fM)){e.jP(g)}}if(d.bK(ek)){ek=am;
h2()}}function jQ(d){var e=this;
e.fh(bb);
d.dn();
e3(d,e.h9);
var a,c,b=st.gm();
for(a=bh(d.dl)-1;
a>=0;
a--){c=d.dl[a];
if(c){e.fp(c)}}for(a=bh(d.dW)-1;
a>=0;
a--){c=d.dW[a];
if(c){e.fq(c)}}e.jO(d);
bW(d,b.h9);
if(d.bK(h0)){h0=am;
h2()}}function jR(e,d){var f=this,b=e.c0,a=e.c2,c;
if(!b||!a){return F}if(b2(f.dl,e)){e.eg=f;
e.dT=am;
e.e8=am;
b2(e.c0.dl,e);
b2(e.c2.dl,e);
if(f.jz==1){c=e.c0.h8;
if(!c){if(!e.c2.h8){f.iv()}else{c=e.c2.h8;
e.h8=c;
e.c0.h8=c;
b2(c.dl,e);
b2(c.dW,e.c0)}}else{if(!e.c2.h8){e.h8=c;
e.c2.h8=c;
b2(c.dl,e);
b2(c.dW,e.c2)}else{if(!c.bK(e.c2.h8)){f.iv()}else{f.jH();
b2(c.dl,e)}}}}e.c0.fh(bc);
e.c2.fh(bc);
if(!d){e6(e.c0.dl);
e6(e.c2.dl);
e7(e.c0);
e7(e.c2)}return T}return F}function jS(c,b){if(bP(this.dl,b)){e3(c,this.dl)}else{bV(this.dl,c,b);
e3(c)}if(bP(c.c0.dl,b)){bW(c,c.c0.dl)}else{bV(c.c0.dl,c,b)}if(bP(c.c2.dl,b)){bW(c,c.c2.dl)}else{bV(c.c2.dl,c,b)}e7(b);
c.c0.fh(bc);
c.c2.fh(bc);
e7(c.c0);
e7(c.c2);
e6(c.c0.dl);
e6(c.c2.dl);
this.fh(bc);
var a=st.gm();
bV(a.dl,c,b);
b.dy=c.dy;
this.jH();
this.iv()}function jT(){for(var c=this,b=0,a=bh(c.dl);
b<a;
b++){c.dl[b].g6=am}for(b=0,a=bh(c.dW);
b<a;
b++){c.dW[b].g6=am}if(c.jA){for(b=0,a=bh(c.jA);
b<a;
b++){c.jA[b].g6=am}}c.g6=am}function jU(f,h){var g=this,d=st.gm(),c,a,e,b=f.c0.h8;
if(!b){b=f.c2.h8}e3(f,g.dl);
bW(f,f.c0.dl);
bW(f,f.c2.dl);
f.c0.fh(bc);
f.c2.fh(bc);
e7(f.c0);
e7(f.c2);
e6(f.c0.dl);
e6(f.c2.dl);
g.fh(bb);
if(h){if(b){bW(f,b.dl)}}else{g.iv();

g.jH()}g.jO(f);
d.fp(f);
for(c=0,a=bh(g.h9);
c<a;
c++){e=g.h9[c];
if(bP(e.hi,f)){if(e.type!=ar){bW(f,e.hi)}else{e.h5()}}}}function jV(e,b){e.h8=b;
b.dW.push(e);
if(b2(b.h9,e.el)){e.el.h8=b}var c,a,d;
for(c=0,a=bh(e.dl);
c<a;
c++){d=e.dl[c];
b2(b.dl,d);
if(!d.c0.h8){jV(d.c0,b)}else{if(!d.c2.h8){jV(d.c2,b)}}}}function jW(d){if(d||gi.fV()){var e=this;
e.jA=[];
for(var b,c=0,a=bh(e.dW);
c<a;
c++){e.dW[c].h8=am}for(c=0,a=bh(e.dW);
c<a;
c++){if(!e.dW[c].h8){b=new jg();
e.jA.push(b);
b.eg=e;
jV(e.dW[c],b)}}}}function er(b,a,c){if(c){return b.c1.cG(a.c1,c.c1)}else{return b.c1.cG(a.c1)}}function jX(b,a,c){if(c){return b.c1.cj(a.c1,c.c1)}else{return b.c1.cj(a.c1)}}function gh(l,q,n,m){var o,b=et*1.4,c,d,r,p=[],h,g,f,a=3*jY,k=l.c1;
if(n){n.z=k.z}if(n&&m&&m.ctrlKey){if(m.shiftKey){return n}o=k.cG(n);
c=cU(k,o,b)}else{if(n&&m&&m.shiftKey){b=k.cL(n)}if((f=bh(l.dl))>1&&f<4&&q==1){for(h=0;
h<f;
h++){g=l.dl[h];
if(g.dm>1){h=f+1;
break}r=g.gw(l);
for(g=h+1;
g<f;
g++){if(M.abs(aj-k.cj(r.c1,l.dl[g].gw(l).c1))>6){h=f+1;
break}}}if(h==f){h=l.dl[0].gw(l).c1;
g=l.dl[1].gw(l).c1;
c=k.eH(h,g,b,0.5*aj);
r=k.eH(h,g,b,-0.5*aj);
f=l.eg;
if(n){h=n.cL(c);
g=n.cL(r)}else{h=f.jl(c);
g=f.jl(r)}if(g<h||(g==h&&k.eI(r)>k.eI(c))){c=r}f.jZ(l,c)}}if(!c){o=l.gk(q,n);
do{c=cU(k,o,b);
d=l.eg.fM.j0(c,a,a);
if(!d||!bh(d)){break}for(h=0;
h<bh(d);
h++){p.push(new gq(l,d[h]))}o=l.gz(n,p)}while(bh(p)<10);
if(f>2||!l.g9()){a=0;
for(h=f-1;
h>=0;
h--){d=l.dl[h].gw(l);
a+=(d.c1.z-k.z)/(M.abs(o-er(l,d))+1)}c=cT(k,o,(a>0?-30:30),b)}}}return c}function j1(c,a,b){if(by(b)!=0){return aq+c+bs("1",3)+S+bs(a+1,3)+S+bs(M.round(b),3)}else{return""}}function j2(){var c=this,f,e,d,b,k,g,h=[],a=ab+"\n"+Number(new Date())+"\n"+navigator.userAgent+"\n"+bs(bh(c.dW),3)+bs(bh(c.dl),3);
if(eh=="rxn"){a+="  0  0  0  0  0  0  0  0  0 V2000"}else{a+="  0  0  0  0  0  0  0  0999 V2000"}for(f=0,e=bh(c.dW);
f<e;
f++){a+=c.dW[f].he()}for(f=0,e=bh(c.dl);
f<e;
f++){a+=c.dl[f].he()}for(f=0,e=bh(c.dW);
f<e;
f++){a+=j1("CHG",f,c.dW[f].ee());
a+=j1("RAD",f,c.dW[f].dh);
a+=j1("ISO",f,c.dW[f].di)}if(eh=="tmpl"&&c.ei){a+=aq+"ATT"+bs("1",3)+S+bs(c.ei.getIndex(),3)+S+a0.val()+S+a1.val()}for(f=0,e=bh(c.h9);
f<e;
f++){k=c.h9[f];
if(!(b=bh(k.dW))){continue}a+=aq+"STY"+bs("1",3)+S+bs(f+1,3)+S+k.type;
if(k.type==at&&k.hn){a+=aq+"SCN"+bs("1",3)+S+bs(f+1,3)+S+k.hn}for(d=0;
d<b;
d++){a+=(d%15?"":aq+"SAL "+bs(f+1,3)+bs(M.min(b-d,15),3))+bs((k.dW[d].getIndex()+1),4)}if(k.type==as){for(d=0,b=bh(k.hj);
d<b;
d++){a+=(d%15?"":aq+"SPA "+bs(f+1,3)+bs(M.min(b-d,15),3))+bs((k.hj[d].getIndex()+1),4)}}if(k.ey){for(d=0,b=bh(k.ey);
d<b;
d++){g=k.ey[d];
a+=aq+"SDI "+bs(f+1,3)+bs(4,3)+f5(g.dI.x)+f5(-g.dI.y)+f5(g.dH.x)+f5(-g.dH.y)}}for(d=0,b=bh(k.hi);
d<b;
d++){a+=(d%15?"":aq+"SBL "+bs(f+1,3)+bs(M.min(b-d,15),3))+bs((k.hi[d].getIndex()+1),4)}a+=aq+"SMT "+bs(f+1,3)+S+bz(k.dj);
if(k.ew){h.push(k)}}for(d=0,b=bh(h);
d<b;
d++){a+=(d%15?"":aq+"SDS EXP"+bs(M.min(b-d,15),3)+S)+bs(h[d].getIndex()+1,3)}for(f=0,e=bh(c.j3);
f<e;
f++){a+="\n"+c.j3[f]}a+=aq+"END\n";
return a}function j4(t){var h=new fr(),a=t.split("\n"),p=0,m=bh(a),o,u,n,y,q={},c,d,b,x,w,f,g,l,v;

h.jz=0;
do{if(p<m){p++}else{return am}}while(a[p]!=am&&!bp(a[p],"V2000"));
c=bm(a[p],[3,3]);
for(o=0,u=bf(c[0]);
o<u;
o++){p++;
d=bm(a[p],[10,10,10,1,3,2,3,3,3,3,3,3,3,3,3,3]);
b=new gg(new cb(parseFloat(d[0]),-parseFloat(d[1]),parseFloat(d[2])));
l=bf(d[6]);
if(l!=0){b.f8=4-l}b.go(d[4]);
b.dk=bf(d[8])-1;
if(b.dk<0){b.dk=am}b.ga=bf(d[10]);
if(b.ga>=15){b.ga=0}else{if(b.ga==0){b.ga=am}}if(d[5]!="0"&&b.f9){b.di=M.round(b.f9.m)+bf(d[5])}h.fG(b)}for(o=0,u=bf(c[1]);
o<u;
o++){p++;
d=bm(a[p],[3,3,3,3,3,3,3]);
x=h.dW[bf(d[0])-1];
w=h.dW[bf(d[1])-1];
if(!x||!w||x.bK(w)){continue}l=bf(d[2]);
if(a8[l]!=am){l=a8[l]}f=new gj(x,w,l,bf(d[3]));
h.fK(f)}while(p<m){p++;
d=bn(a[p]);
switch(d[1]){case"CHG":u=by(bf(d[2]));
try{for(o=0;
o<u;
o++){l=bf(d[2*o+4]);
if(!isNaN(l)){b=h.dW[bf(d[2*o+3])-1];
b.f8=l}}}catch(r){}break;
case"ISO":u=by(bf(d[2]));
try{for(o=0;
o<u;
o++){l=bf(d[2*o+4]);
if(!isNaN(l)){b=h.dW[bf(d[2*o+3])-1];
b.di=l}}}catch(r){}break;
case"RAD":u=by(bf(d[2]));
try{for(o=0;
o<u;
o++){l=bf(d[2*o+4]);
if(!isNaN(l)){b=h.dW[bf(d[2*o+3])-1];
b.dh=l}}}catch(r){}break;
case"ATT":try{h.ei=h.dW[bf(d[3])];
h.a0=bz(d[4]).split(",");
h.a1=bz(d[5])}catch(r){}break;
case"STY":u=3+2*by(bf(d[2]));
try{for(o=3;
o<u;
o+=2){l=d[o+1].toUpperCase();
v=bf(d[o]);
if(l=="GEN"){l=at}if(l==ar){g=new ij()}else{if(l==as){g=new il()}else{if(l==at){g=new io()}else{continue}}}h.hB(g);
q[v]=g}}catch(r){}break;
case"SCN":u=3+2*by(bf(d[2]));
try{for(o=3;
o<u;
o+=2){v=bf(d[o]);
g=q[v];
if(g.type==at){g.hn=d[o+1].toUpperCase()}}}catch(r){}break;
case"SDI":v=bf(d[2]);
try{g=q[v];
if(g&&g.im){g.im(d.slice(4))}}catch(r){}break;
case"SAL":v=bf(d[2]);
try{g=q[v];
if(g){for(o=4,u=bh(d);
o<u;
o++){g.fG(h.dW[bf(d[o])-1])}}}catch(r){}break;
case"SPA":v=bf(d[2]);
try{g=q[v];
if(g){for(o=4,u=bh(d);
o<u;
o++){g.hk(h.dW[bf(d[o])-1])}}}catch(r){}break;
case"SBL":v=bf(d[2]);
try{g=q[v];
if(g){for(o=4,u=bh(d);
o<u;
o++){f=h.dl[bf(d[o])-1];
g.hl(f)}}}catch(r){}break;
case"SDS":l=a[p].substr(13);
try{for(o=0,u=bh(l);
o<u;
o+=3){v=bf(bl(l.substr(o,3)));
g=q[v];
if(g){g.hZ(F)}}}catch(r){}break;
case"SMT":v=bf(d[2]);
try{g=q[v];
if(g){g.dj=d[3].replace(/^[\s\^]+|[\s\^]+$/g,"");
g.hm=bf(d[3]);
if(g.hm){g.hn=""}}}catch(r){}break;
case"END":p=m;
break;
default:h.j3.push(a[p])}}for(p=0,m=bh(h.dW);
p<m;
p++){b=h.dW[p];
b.gL();
if(b.f8==b.gF){b.f8=am}}for(p=0,m=bh(h.h9);
p<m;
p++){g=h.h9[p];
for(o=0,u=bh(g.dW);
o<u;
o++){b=g.dW[o];
for(n=0,y=bh(b.dl);
n<y;
n++){g.fK(b.dl[n])}}if(g.type==ar&&!bh(g.hi)){b1(g.hj,g.dW)}if(g.type!=as){for(o=0,u=bh(g.hj);
o<u;
o++){b=g.hj[o];
for(n=0,y=bh(b.dl);
n<y;
n++){f=b.dl[n];
if(!bP(g.dW,(f.c0.bK(b)?f.c2:f.c0))){bW(f,g.dl)}}}}if(g.ew==am){g.hZ(T)}}h.jz=1;
h.iv();
return h}function j5(){if(!this.g6){if(!this.jA){this.iv()}this.g6=[];
for(var b=0,a=bh(this.jA);
b<a;
b++){bR(this.g6,this.jA[b].dV())}}return this.g6}function j6(){var a=this;
if(a.d3){return a.d3}if(a.fM){return a.fM.cZ()}}function ji(b){var c=this,a;
if(!c.fn){a=[];
bR(a,c.dl);
bR(a,c.dW);
bR(a,c.h9);
c.fn=a}return c.fn}function jm(f,a){for(var d=0,e,b=this.dW,c=bh(b)-1;
c>=0;
c--){e=j7-b[c].c1.cL(f,a);
if(e>0){d+=j8*e*e}}return d}function j9(c,h){var e,b,g,d=h,a=this.jl(h,T),f=0;

if(a>0){e=h.b5();
b=h.b5();
while(f++<10){e.eE(ag,c.c1);
if((g=this.jl(e,T))<a){a=g;
d=e.b5()}b.eE(-ag,c.c1);
if((g=this.jl(b,T))<a){a=g;
d=b.b5()}if(a==0){break}}f=h.cL(d);
h.x=d.x;
h.y=d.y}return f}function j_(){var d=this,c,b,a,e;
if(!d.c6||!d.c4){fa.apply(d);
for(b=0,a=bh(d.h9);
b<a;
b++){c=d.h9[b];
if(c.type==ar){e=0.4*ka*bh(c.dj);
fe(d,c.fg.y-e);
fe(d,c.fg.y+e)}}}}function jj(e){var h=this,b=[],g,d,a,c,f;
for(d=0,a=bh(h.dW);
d<a;
d++){g=h.dW[d];
if(!e||!g.dS){b.push(g.c1)}}if(!e){if(h.jA){for(d=0,a=bh(h.jA);
d<a;
d++){bS(b,h.jA[d].fg)}}if(h.g6){for(d=0,a=bh(h.g6);
d<a;
d++){bS(b,h.g6[d].fg)}}}for(d=0,a=bh(h.h9);
d<a;
d++){g=h.h9[d];
if(g.ey){for(c=0,f=bh(g.ey);
c<f;
c++){b.push(g.ey[c].dI,g.ey[c].dH)}}if(!e){bS(b,g.fg);
bS(b,g.c6);
bS(b,g.c4)}else{if(g.type==ar){bS(b,g.dX())}}}if(!e){bS(b,h.fg);
bS(b,h.c6);
bS(b,h.c4)}return b}function kb(b,a){this.gr=b;
this.kc=a}function kd(){for(var b=[],e,d,f,c=0,a=bh(this.dW);
c<a;
c++){e=this.dW[c];
if((d=e.f9)&&d.f2){f=d.f2+e.ee()-e.gA();
if(f>0){b.push(new kb(e,f))}}}return b}function ke(){if(!this.fM){return -1}return bQ(this.fM.fQ,this)}function hd(){return this.eg}function kf(){return(this.fM?this.fM:this)}function jC(a){this.eg=a;
this.jE=[];
this.jD=[]}function fr(){var a=this;
eO.apply(a);
a.dW=[];
a.h9=[];
a.dl=[];
a.j3=[];
a.jz=1;
a.iv=jW;
a.dV=j5;
a.fh=jh;
a.jH=jT;
a.j2=j2;
a.kg=kd;
a.eD=jk;
a.dU=j_;
a.jl=jm;
a.jZ=j9;
a.ct=jn;
a.jF=jF;
a.fG=jI;
a.hB=jL;
a.hA=jK;
a.gn=jM;
a.fq=jN;
a.hO=jQ;
a.fK=jR;
a.kh=jS;
a.fp=jU;
a.fu=jG;
a.ki=jB;
a.jo=kj;
a.du=ji;
a.jO=fm;
a.fb=jj;
a.getIndex=ke;
a.b5=jy;
a.jJ=kf;
a.ef=e2;
a.cZ=j6}function kk(d){if(!d){d=new b6()}var e=this,b=new ft(e.d3),c,a;
bL(d,e,b);
for(c=0,a=bh(e.fQ);
c<a;
c++){b.fu(e.fQ[c].b5(d))}for(c=0,a=bh(e.kl);
c<a;
c++){b.km(e.kl[c].b5(d),T)}b.kn=e.kn;
if(e.fy){b.fy=e.fy.b5(d);
b.fy.fM=b}b.ko=e.ko.b5(d);
return b}function kp(b){if(!b){b=new b6()}var c=this,a=new kq(c.c1.x,c.c1.y);
bL(b,c,a);
a.dy=c.dy;
return a}function kr(b){if(!b){b=new b6()}var c=this,a=new fC(c.dI.b5(),c.dH.b5());
bL(b,c,a);
a.dy=c.dy;
a.fM=b.b4(c.fM);
return a}function ks(){return cs(this.dI,this.dH)}function kt(a){a.dn();
return bW(a,this.fQ)}function ku(a,c,b){var d=this;
if(eh=="rxn"||!bh(d.fQ)){if(b2(d.fQ,a)){a.fM=d;
if(c){d.kv()}}}else{d.fQ[0].fu(a,b)}}function kw(){this.kx();

this.ky();
this.kz()}function kA(){if(eh!="rxn"){return}var c=this,f,e,g,a=c.fQ,b,d,h,k,j;
for(f=bh(a)-1;
f>=0;
f--){b=a[f];
if(!bh(b.dW)){this.jP(b)}}a.sort(kB);
if(c.fy){g=c.fy.dX()}for(f=0,e=bh(a)-1;
f<e;
f++){b=a[f];
k=a[f+1];
d=b.dX();
j=k.dX();
if(g&&g.x>d.x&&g.x<j.x){c.kn=f+1}else{h=c.kC(d);
if(!h||h.c1.x>=j.x){b.dU();
k.dU();
c.kD(0.5*(b.c4.x+k.c6.x),0.5*(j.y+d.y))}}}}function kE(l,k,d){if(l&&k){if(d){var c=this,b=l.dX(),j=k.dX(),e=M.min(b.x,j.x),a=M.max(b.x,j.x),g,f,h;
for(g=bh(c.kl)-1;
g>=0;
g--){f=c.kl[g].c1;
if(e<f.x&&f.x<a){c.kF(c.kl[g])}}if(c.fy){h=c.fy.dX();
if(e<h.x&&h.x<a){c.kG()}}}l.fu(k);
bW(k,this.fQ);
this.ky()}}function kH(){var a=this,j=a.kl.concat(),e,g,c,f,b={},d={},h;
if(a.fy){j.push(a.fy)}j.sort(kI);
for(e=bh(j)-1;
e>=0;
e--){g=j[e];
f=g.dX();
h=this.kJ(f);
if(!(h=this.kJ(f))&&g instanceof kq){a.kF(g,T)}else{b[g.bI]=h;
if(!(h=this.kK(f))&&g instanceof kq){a.kF(g,T)}d[g.bI]=h}}for(e=bh(j)-2;
e>=0;
e--){g=j[e];
c=j[e+1];
h=b[g.bI];
if(h&&h.bK(b[c.bI])&&d[g.bI]&&d[g.bI].bK(d[c.bI])){if(c instanceof kq){a.kF(c,T)}else{a.kF(g,T)}}}}function kL(f,j,g){for(var a,h=ao,b,c,e=0,d=bh(this.fQ);
e<d;
e++){b=this.fQ[e].dX();
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cL(b,T);
if(c<h){a=this.fQ[e];
h=c}}}return a}function kM(a){return this.kN(a,-1,0)}function kO(a){return this.kN(a,1,0)}function kP(f,j,g){for(var a,h=ao,b,c,e=0,d=bh(this.kl);
e<d;
e++){b=this.kl[e].c1;
if((b.x-f.x)*j>0||(b.y-f.y)*g>0){c=f.cL(b,T);
if(c<h){a=this.kl[e];
h=c}}}return a}function kQ(a){return this.kR(a,-1,0)}function kS(a){return this.kR(a,1,0)}function kT(c){var k=c.eg,l=new fr(),b,h,m,g,f,e,a,d=st.gm();
this.fQ.splice(bQ(this.fQ,k)+1,0,l);
l.fM=this;
l.jA=[];
this.ky();
for(g=0,f=bh(c.jD);
g<f;
g++){b=c.jD[g];
for(e=0,a=bh(b.dW);
e<a;
e++){h=b.dW[e];
bW(h,k.dW);
if(!bP(l.dW,h)){l.fG(h)}}for(e=0,a=bh(b.dl);
e<a;
e++){m=b.dl[e];
bW(m,k.dl);
if(!bP(l.dl,m)){l.fK(m)}}bW(b,k.jA);
b2(l.jA,b);
delete k.g6;
k.fh(bb);
d.fh(bc)}}function kU(e,b){var c=this,d,a;
if(!b){d=c.kJ(e.c1),a=c.kK(e.c1);
c.gl(d,a,F)}e.dn();
e3(e,c.kl);
c.jO(e);
if(!b){c.ky()}}function kV(c,a){if(eh!="rxn"){return}var b=this;
b.kl.push(c);
c.fM=b;
if(!a){e7(c);
b.fh(ba)}return T}function kW(b,a,d){var c;
if(b instanceof cb){c=new kq(b.x,b.y)}else{c=new kq(b,a)}this.km(c,d);
if(!d){this.kX(c.c1)}return c}function dC(b,a,d,c){if(!c){c=this.data(ap)}kY=c;
switch(gS){case aL:case aM:case aH:case aI:c.db.attr("cursor","move");
break;
case aQ:if(gU){c.fM.kF(c);
kY=am;
kZ=T}break}}function dD(b,a,d,c){kY=am}function dL(c,a,d,b){if(!b){b=this.data(ap)}k0=b;
switch(gS){case aL:case aM:case aH:case aI:b.db.attr("cursor","move");
break;
case aQ:if(gU){b.fM.kG(b);
k0=am}break}}function dM(c,a,d,b){k0=am}function k1(h){for(var f=this,e,b,g=ao,d,c=0,a=bh(f.fQ);
c<a;
c++){b=f.fQ[c].ki(h);

if(b){d=h.cL(f.fQ[c].dX(),T);
if(d<g){e=b;
g=d}}}if(e){f.k2(e)}f.ky()}function k3(b){var c=this,a=c.fy;
if(!a){return F}if(b){c.kD(cs(a.dI,a.dH))}c.jO(a);
a.dn();
delete c.fy}function k4(b,a,c){if(eh!="rxn"){return}if(!(b instanceof cb)){b=new cb(b,0)}if(!a){a=b.b5();
a.x+=k5}this.fD(new fC(b,a));
if(!c){this.kX(cs(b,a))}}function k6(a){if(eh!="rxn"){return}var b=this;
if(b.fy){b.kG(T)}b.fy=a;
b.fy.fM=this;
b.fh(ba)}function k7(d,c,b,e){if(b==am){b=gW}if(e==am){e=gX}var a=d.eg,f;
if(!this.bK(a.fM)){return}if(!a.bK(c.eg)){this.gl(a,c.eg,T)}f=new gj(d,c,b,e);
a.fK(f);
return f}function k8(m,g){var e=m.k9,a=m.k_,h=e.eg,b=m.la,d,c,f,k,j,l,i;
if(!this.bK(h.fM)){return}d=(m.eJ?a.c2:a.c0);
c=(m.eJ?a.c0:a.c2);
if(e.dm!=2||a.dm!=2){k=e.iK();
if(k||e.dm!=a.dm){j=a.iK();
if(e.dm!=2&&k){e.iL(k)}if(a.dm!=2&&j){a.iL(j)}}}if(!e.c0.h8.bK(a.c0.h8)){b.eE((er(e.c0,e.c2)-er(d,c))*ag,a.dX());
b.cm(e.c0.c1.cr(d.c1));
l=e.c0.c1.cL(e.c2.c1);
i=d.c1.cL(c.c1);
if(l>0&&i>0&&l!=i){b.eD(l/i,e.c0.c1)}}if(!h.bK(a.eg)){if(b){bW(a.eg,b.fQ)}this.gl(h,a.eg,T)}f=(g[e.c0]||g[e.c2]||g[d]||g[c]);
if(f==2||(!f&&e.hc()+e.c0.hc()+e.c2.hc()>a.hc()+d.hc()+c.hc())){h.gn(d,e.c0);
g[e.c0]=2;
h.gn(c,e.c2);
g[e.c2]=2;
h.kh(a,e)}else{h.gn(e.c0,d);
g[d]=1;
h.gn(e.c2,c);
g[c]=1;
h.kh(e,a)}if(b){b.fp(a);
b.fq(d);
b.fq(c)}}function lb(d,a,h){var i=d.k9,e=d.k_,j=i.eg,f=d.la,c,l;
if(!this.bK(j.fM)){return}if(a){if(!i.h8){j.iv()}if(!i.h8.bK(e.h8)){f.cm(i.c1.cr(e.c1));
var b=i.gJ(i.f7()),g=i.gA(),m=e.gJ(e.f7()),k=e.gA();
if(b<k&&m<g&&(g>1||k>1)){fL(f.dW,T);
c=new gg(gh(i,1));
l=new gj(i,c,1,0);
j.fG(c);
j.fK(l);
h=1;
i=c;
fL(f.dW,F);
f.cm(c.c1.cr(e.c1))}else{if(m<g){h=2}else{if(b<k){h=1}}}}}if(!j.bK(e.eg)){if(f){bW(e.eg,f.fQ)}this.gl(j,e.eg,T)}if(h==2||(!h&&i.hc()>e.hc())){j.gn(e,i)}else{j.gn(i,e)}if(f){f.fq(e)}}function kB(d,c){d.dU();
c.dU();
if(d.c6.x<c.c6.x){return -1}if(d.c6.x>c.c6.x){return 1}if(d.c6.y<c.c6.y){return -1}if(d.c6.y>c.c6.y){return 1}return 0}function kI(d,c){var e=d.dX(),f=c.dX();
if(e.x<f.x){return -1}if(e.x>f.x){return 1}if(e.y<f.y){return -1}if(e.y>f.y){return 1}return 0}function lc(){if(eh!="rxn"){return}this.kn=0;
var d=this,c,b,a;
if(d.fy){c=d.fy.dX()}for(b=0,a=bh(d.fQ);
b<a;
b++){if(c&&d.fQ[b].dX().x>=c.x){break}d.kn++}}function ld(){if(!this.fQ||bh(this.fQ)==0){return""}if(eh=="rxn"){for(var d=this,a,b,c=bh(d.fQ)-1;
c>=0;
c--){if(!bh(d.fQ[c].dW)){d.fQ.splice(c,1)}}d.fQ.sort(kB);
d.ky();
b="$RXN\n\n"+ab+S+Number(new Date())+"\n\n"+bs(d.kn,3)+bs(bh(d.fQ)-d.kn,3)+"\n";
for(c=0,a=bh(d.fQ);
c<a;
c++){b+="$MOL\n";
b+=d.fQ[c].j2()}return b}else{return this.fQ[0].j2()}}function le(a){this.lf(a);
this.eX()}function lg(m){m=bq(m);

if(bo(m,"$RXN")){var c=this,k=m.split("$MOL\n"),h=k.shift(),g,f,o,d,a,l,n,j,b=0,e=0;
for(g=0,f=bh(k);
g<f;
g++){k[g]=ac(k[g])}o=h.split("\n");
d=ac(o[bh(o)-2]);
c.kn=bf(d.substr(0,3));
a=bf(d.substr(3,3));
l=bf(d.substr(6,3));
if(l>0){n=k.splice(c.kn+a);
k.splice(c.kn,0,n);
c.kn+=l}for(g=0,f=bh(k);
g<f;
g++){j=j4(k[g]);
if(!bh(j.dW)){if(e<c.kn){c.kn--}continue}if(e==c.kn){c.lh(b,am,T);
b+=k5+d4}else{if(e>0){c.kD(b,0,T);
b+=dx+d4}}j.ct();
j.jF(b);
c.fu(j);
b+=(j.c4.x-j.c6.x)+d4;
e++}if(g==c.kn){c.lh(b)}}else{this.kn=1;
j=j4(m);
j.ct();
this.fu(j);
if(eh=="tmpl"&&this.d3==aW){if($.isArray(j.a0)){a0.val(j.a0.join(","))}if(j.a1!=am){a1.val(j.a1)}}}}function li(){var d=this;
if(!d.c6||!d.c4){d.c6=new cb(ao,ao);
d.c4=new cb(-ao,-ao);
for(var c=0,b=bh(d.fQ);
c<b;
c++){var a=d.fQ[c];
a.dU();
fc(d,a.c4);
fc(d,a.c6)}}}function lj(d,a){if(!a){a=[]}else{if(bP(a,this)){return}}a.push(this);
if(d>a9&&d<bc&&d!=ba){var c=this,b;
if(c.dI.x>c.dH.x){b=c.dI;
c.dI=c.dH;
c.dH=b}}a.pop()}function lk(e,b){if(!b){b=[]}else{if(bP(b,this)){return}}var d=this,c,a;
b.push(d);
if(e>a_){delete d.fn}if(e>a9&&e<bc){d.ll()}d.fQ.sort(kB);
if(e!=a9&&e!=ba){e=bb}for(c=0,a=bh(d.fQ);
c<a;
c++){d.fQ[c].fh(e,b)}d.ky();
b.pop()}function lm(){delete this.c6;
delete this.c4}function ln(){return this.d3}function lo(a){this.d3=a;
this.dv()}function lp(c){var e=this,b,d,a;
if(!e.fn){b=[];
for(d=0,a=bh(e.fQ);
d<a;
d++){bR(b,e.fQ[d].du(c))}bR(b,e.kl);
if(e.fy){b.push(e.fy)}b.sort(e5);
e.fn=b}return e.fn}function lq(d){for(var e=this,b=[],c=0,a=bh(e.fQ);
c<a;
c++){bR(b,e.fQ[c].fb(d))}for(c=0,a=bh(e.kl);
c<a;
c++){b.push(e.kl[c].c1)}if(e.fy){b.push(e.fy.dI);
b.push(e.fy.dH)}return b}function lr(){for(var b=[],c=0,a=bh(this.fQ);
c<a;
c++){bR(b,this.fQ[c].dW)}return b}function ls(){for(var b=[],c=0,a=bh(this.fQ);
c<a;
c++){bR(b,this.fQ[c].dl)}return b}function lt(r,q,b){if(!r){return}if(q==am){q=jY}var h=r.x-q,c=r.x+q,g=r.y-q,a=r.y+q,f=r.z-b,t=r.z+b,e=[],m,l,k,d,p,o,n;
for(k=0,d=bh(this.fQ);
k<d;
k++){p=this.fQ[k];
for(m=0,l=bh(p.dW);
m<l;
m++){o=p.dW[m];
n=o.dX();
if(!o.dJ&&!o.dS&&h<n.x&&n.x<c&&g<n.y&&n.y<a&&(b==am||(f<n.z&&n.z<t))){e.push(o)}}}return e}function lu(o,n){if(!o){return}if(n==am){n=lv}var f=o.x-n,b=o.x+n,e=o.y-n,a=o.y+n,d,k,h,g,c,l,p,m;
for(g=0,c=bh(this.fQ);
g<c;
g++){l=this.fQ[g];
for(k=0,h=bh(l.dl);
k<h;
k++){p=l.dl[k];
if(!p.dJ&&!p.dS&&f<M.max(p.c0.c1.x,p.c2.c1.x)&&M.min(p.c0.c1.x,p.c2.c1.x)<b&&e<M.max(p.c0.c1.y,p.c2.c1.y)&&M.min(p.c0.c1.y,p.c2.c1.y)<a){m=o.eM(p.c0.c1,p.c2.c1);
if(m<n){d=p;
n=m}}}}return d}function lw(n,m){if(!n){return}if(m==am){m=jY}var f=n.x-m,b=n.x+m,e=n.y-m,a=n.y+m,d=[],k,h,g,c,l,o;
for(g=0,c=bh(this.fQ);
g<c;
g++){l=this.fQ[g];
for(k=0,h=bh(l.h9);
k<h;
k++){o=l.h9[k];
o.dU();
if(f<o.c4.x+o.hQ&&o.c6.x<b&&e<o.c4.y&&o.c6.y<a){d.push(o)}}}return d}function lx(b,a){return ly(b,this.j0(b,a))
}function lz(b,a){return ly(b,this.lA(b,a))}function ly(g,b){if(!b||!bh(b)){return}var d=b[0],f=d.dX().cL(g,T),e,c,a;
for(c=1,a=bh(b);
c<a;
c++){e=b[c].dX().cL(g,T);
if(e<f){d=b[c];
f=e}}return d}function lB(){return this.c1}function lC(a){return[this.c1]}function lD(a){return[this.dI,this.dH]}function ft(b,c){var a=this;
eO.apply(a);
a.d3=b;
a.fQ=[];
a.kl=[];
a.kn=0;
a.ko=new g3();
a.lE=lr;
a.lF=lx;
a.lG=lu;
a.lH=lz;
a.j0=lt;
a.lA=lw;
a.lI=ls;
a.fh=lk;
a.dU=li;
a.ll=lm;
a.lJ=kw;
a.kx=kA;
a.ky=lc;
a.kz=kH;
a.lK=ld;
a.lL=le;
a.lf=lg;
a.jx=k7;
a.lM=lb;
a.lN=k8;
a.km=kV;
a.kD=kW;
a.kF=kU;
a.fD=k6;
a.lh=k4;
a.kG=k3;
a.fu=ku;
a.jP=kt;
a.gl=kE;
a.kX=k1;
a.k2=kT;
a.kN=kL;
a.kJ=kM;
a.kK=kO;
a.kR=kP;
a.lO=kQ;
a.kC=kS;
a.jo=lP;
a.du=lp;
a.jO=fm;
a.fb=lq;
a.cm=eP;
a.b5=kk;
a.ef=e2;
a.cZ=ln;
a.lQ=lo;
if(c){a.lf(c)}}function fC(c,a){var b=this;
e1.apply(b);
if(c.x>a.x){b.dI=a;
b.dH=c}else{b.dI=c;
b.dH=a}b.dy=F;
b.fh=lj;
b.dX=ks;
b.fb=lD;
b.eX=dE;
b.dt=fj;
b.b5=kr;
b.cZ=j6}function kq(a,c){var b=this;
e1.apply(b);
b.c1=new cb(a,c);
b.dy=F;
b.fh=ik;
b.dX=lB;
b.fb=lC;
b.eX=dw;
b.dt=fj;
b.b5=kp;
b.cZ=j6}function lR(){var c=this,h=st.ds(),a=h.fQ,g,d,b,f,e,k;
for(d=0,b=bh(a);
d<b;
d++){g=a[d];
for(f=0,e=bh(g.dW);
f<e;
f++){c.fG(g.dW[f])}for(f=0,e=bh(g.dl);
f<e;
f++){c.fK(g.dl[f])}for(f=0,e=bh(g.h9);
f<e;
f++){c.hB(g.h9[f])}}k=h.fy;
if(k){c.fD(k)}for(d=0,b=bh(h.kl);
d<b;
d++){c.km(h.kl[d])}}function lS(d){for(var c,b=0,a=bh(this.dW);
b<a;
b++){c=this.dW[b];
c.gd(d);
e7(c)}}function lT(){for(var c,b=0,a=bh(this.h9);
b<a;
b++){c=this.h9[b];
c.h5();
this.hO(c)}}function lU(){var c=this,a=st.ds(),b;
while(bh(c.h9)){b=c.h9.pop();
b.eg.hO(b)}while(bh(c.dl)){b=c.dl.pop();
b.eg.fp(b)}while(bh(c.dW)){b=c.dW.pop();
b.eg.fq(b)}if(c.fy){a.kG();
c.kG()}while(bh(c.kl)){a.kF(c.kl.pop())}}function lV(){var a=this;
return !bh(a.dW)&&!bh(a.h9)&&!bh(a.dl)&&!bh(a.kl)&&!a.fy}function lW(){var a=this;
while(bh(a.h9)){a.hO(a.h9[0])}while(bh(a.dl)){a.fp(a.dl[0])}while(bh(a.dW)){a.fq(a.dW[0])}a.kG();
while(bh(a.kl)){a.kF(a.kl[0])
}}function lX(){var c=this,l=new b6(),g,f,d,b,e,m,k,h=[],a=[];
lY=c.b5(l,T);
for(g=0,f=bh(c.dl);
g<f;
g++){b=c.dl[g];
b2(h,b.c0);
b2(h,b.c2)}for(g=0,f=bh(c.hi);
g<f;
g++){b=c.hi[g];
b2(h,b.c0);
b2(h,b.c2)}for(g=0,f=bh(h);
g<f;
g++){b=h[g];
e=l.b4(b);
lY.fG(e,T);
m=b.eg;
k=l.bN[m.bI];
if(!k){k=new fr();
l.bN[m.bI]=k;
a.push(k)}k.fG(e,T)}if(lY.fQ){bR(lY.fQ,a)}else{lY.fQ=a}for(g=0,f=bh(c.dW);
g<f;
g++){b=c.dW[g];
e=l.b4(b);
for(d=bh(b.dl)-1;
d>=0;
d--){if(!bP(c.dl,b.dl[d])){e=l.b4(b);
bW(l.b4(b.dl[d]),e.dl);
e.fh(bb)}}}for(g=0,f=bh(lY.dW);
g<f;
g++){lY.dW[g].dy=am}for(g=0,f=bh(lY.dl);
g<f;
g++){lY.dl[g].dy=am}for(g=0,f=bh(lY.hi);
g<f;
g++){lY.hi[g].dy=am}for(g=0,f=bh(lY.h9);
g<f;
g++){lY.h9[g].dy=am}lY.dv()}function lZ(){var d=this.l0(),b,c,a;
for(c=0,a=bh(d);
c<a;
c++){if(b=d[c].ei){return b}}}function l1(){var c=this,b,a;
if(!c.fQ){c.fQ=[];
for(b=0,a=bh(c.dl);
b<a;
b++){b2(c.fQ,c.dl[b].eg)}for(b=0,a=bh(c.dW);
b<a;
b++){b2(c.fQ,c.dW[b].eg)}for(b=0,a=bh(c.h9);
b<a;
b++){b2(c.fQ,c.h9[b].eg)}}return c.fQ}function l2(){var c=this,b,a;
if(!c.jA){c.jA=[];
for(b=0,a=bh(c.dl);
b<a;
b++){b2(c.jA,c.dl[b].c0.h8);
b2(c.jA,c.dl[b].c2.h8)}for(b=0,a=bh(c.dW);
b<a;
b++){b2(c.jA,c.dW[b].h8)}for(b=0,a=bh(c.h9);
b<a;
b++){b2(c.jA,c.h9[b].h8)}}return c.jA}function l3(){this.copy();
this.l4()}function l5(b,a){var d=this,c=b.el;
if(c&&!bP(d.h9,c)){return d.hB(c,a)}else{b2(d.dW,b);
if(!d.l6){d.fh(bb);
b.dy=T;
if(!a){e7(b)}}return T}}function l7(a){var b=this;
if(bW(a,b.dW)&&!b.l6){b.fh(bb);
a.dy=F;
b.jO(a);
e7(a)}}function l8(d,c){b2(this.h9,d);
for(var e=this,b=0,a=bh(d.dW);
b<a;
b++){e.fG(d.dW[b],c)}for(b=0,a=bh(d.dl);
b<a;
b++){e.fK(d.dl[b],c)}for(b=0,a=bh(d.hi);
b<a;
b++){e.fK(d.hi[b],c)}if(!e.l6){e.fh(bb);
d.dy=T;
if(!c){e7(d)}}return T}function l9(c){var d=this,b,a;
if(bW(c,d.h9)&&!d.l6){d.fh(bb);
c.dy=F;
d.jO(c);
e7(c)}for(b=0,a=bh(c.dW);
b<a;
b++){d.fq(c.dW[b])}for(b=0,a=bh(c.dl);
b<a;
b++){d.fp(c.dl[b])}for(b=0,a=bh(c.hi);
b<a;
b++){d.fp(c.hi[b])}}function l_(c,a){var d=this,b=c.el;
if(b&&!bP(d.h9,b)){return d.hB(b)}else{if(b2(d.dl,c)){if(!d.l6){d.fh(bb);
c.dy=T;
if(!a){e7(c)}}return T}return F}}function ma(a){var b=this;
if(bW(a,b.dl)&&!b.l6){b.fh(bb);
a.dy=F;
b.jO(a);
e7(a)}}function mb(b){for(var c=0,a=bh(b.dW);
c<a;
c++){this.fG(b.dW[c])}for(c=0,a=bh(b.dl);
c<a;
c++){this.fK(b.dl[c])}}function mc(b,a){this.fy=b;
if(!this.l6){this.fh(bb);
b.dy=T;
if(!a){e7(b)}}return T}function md(){var a=this;
if(a.fy){if(!a.l6){a.fh(bb);
a.fy.dy=F;
e7(a.fy)}a.fy=am}}function me(b,a){if(b2(this.kl,b)){if(!this.l6){this.fh(bb);
b.dy=T;
if(!a){e7(b)}}return T}return F}function mf(a){if(bW(a,this.kl)&&!this.l6){this.fh(bb);

a.dy=F;
e7(a)}}function mg(o,n,l){l=by(l);
var c=this,k=st.ds(),a=k.fQ,h,e,b,g,d,m,f;
for(e=0,b=bh(a);
e<b;
e++){h=a[e];
for(g=0,d=bh(h.dW);
g<d;
g++){f=h.dW[g];
if(!f.dS&&f.c1.cN(o,n,l)){c.fG(f)}}for(g=0,d=bh(h.dl);
g<d;
g++){f=h.dl[g];
if(!f.dS&&f.dX().cN(o,n,l)){c.fK(f)}}for(g=0,d=bh(h.h9);
g<d;
g++){f=h.h9[g];
if(!f.ew&&f.dX().cN(o,n,l)){c.hB(f)}}}m=k.fy;
if(m){if(m.dI.cN(o,n,l)||m.dH.cN(o,n,l)){c.fD(m)}}for(e=0,b=bh(k.kl);
e<b;
e++){f=k.kl[e];
if(f.c1.cN(o,n,l)){c.km(f)}}}function mh(n,m){var c=this,k=st.ds(),a=k.fQ,h,e,b,g,d,l,f;
for(e=0,b=bh(a);
e<b;
e++){h=a[e];
for(g=0,d=bh(h.dW);
g<d;
g++){f=h.dW[g];
if(!f.dS&&f.c1.cP(n,m)){c.fG(f)}}for(g=0,d=bh(h.dl);
g<d;
g++){f=h.dl[g];
if(!f.dS&&f.dX().cP(n,m)){c.fK(f)}}for(g=0,d=bh(h.h9);
g<d;
g++){f=h.h9[g];
if(!f.ew&&f.dX().cP(n,m)){c.hB(f)}}}l=k.fy;
if(l){if(l.dI.cP(n,m)||l.dH.cP(n,m)){c.fD(l)}}for(e=0,b=bh(k.kl);
e<b;
e++){f=k.kl[e];
if(f.c1.cP(n,m)){c.km(f)}}}function mi(c){var f=this,b,e,d,a;
if(!f.fn){b=[];
for(d=0,a=bh(f.dW);
d<a;
d++){e=f.dW[d];
b.push(e);
if(!c){b1(b,e.dl)}}for(d=0,a=bh(f.dl);
d<a;
d++){e=f.dl[d];
b2(b,e);
if(!c){if(b2(b,e.c0)){b1(b,e.c0.dl)}if(b2(b,e.c2)){b1(b,e.c2.dl)}}}for(d=0,a=bh(f.h9);
d<a;
d++){e=f.h9[d];
b.push(e)}bS(b,f.fy);
bR(b,f.kl);
f.fn=b}return f.fn}function mj(d){var c=this,b=[],k=[],g,l,m,h,f,e,a;
for(h=0,f=bh(c.dW);
h<f;
h++){g=c.dW[h];
if(!d||!g.dS){k.push(g);
b.push(g.c1)}}for(h=0,f=bh(c.dl);
h<f;
h++){g=c.dl[h];
if((!d||!g.dS)&&!bP(c.dW,g.c0)&&!bP(c.dW,g.c2)){k.push(g.c0);
k.push(g.c2);
b.push(g.c0.c1,g.c2.c1)}}for(h=0,f=bh(c.h9);
h<f;
h++){g=c.h9[h];
if(g.ey){for(e=0,a=bh(g.ey);
e<a;
e++){b.push(g.ey[e].dI,g.ey[e].dH)}}if(!d){bS(b,g.fg);
bS(b,g.c6);
bS(b,g.c4)}if(d&&!g.ew&&bh(g.hj)){for(e=0,a=bh(g.hj);
e<a;
e++){l=g.hj[e];
if(!bP(k,l)){b.push(l.c1)}}}else{for(e=0,a=bh(g.dW);
e<a;
e++){l=g.dW[e];
if(!bP(k,l)){b.push(l.c1)}}}}m=c.fy;
if(m){b.push(m.dI,m.dH)}for(h=0,f=bh(c.kl);
h<f;
h++){b.push(c.kl[h].c1)}if(!d){bS(b,c.fg)}return b}function mk(k,h){if(!k){k=new b6()}h=(h==am?this.l6:h);
var d=this,c=new g3(h),b,f,a=[],g,e,l,j;
bL(k,d,c);
for(g=0,e=bh(d.h9);
g<e;
g++){b=d.h9[g];
f=k.b4(b);
c.hB(f,T);
l=b.eg;
j=k.bN[l.bI];
if(!j){j=new fr();
k.bN[l.bI]=j;
a.push(j)}j.hB(f,T)}for(g=0,e=bh(d.dl);
g<e;
g++){b=d.dl[g];
f=k.b4(b);
c.fK(f,T);
l=b.eg;
j=k.bN[l.bI];
if(!j){j=new fr();
k.bN[l.bI]=j;
a.push(j)}j.fK(f,T)}for(g=0,e=bh(d.hi);
g<e;
g++){b=d.hi[g];
f=k.b4(b);
b2(c.hi,f);
l=b.eg;
j=k.bN[l.bI];
if(!j){j=new fr();
k.bN[l.bI]=j;
a.push(j)}j.fK(f,T)}for(g=0,e=bh(d.dW);
g<e;
g++){b=d.dW[g];
f=k.b4(b);
c.fG(f,T);
l=b.eg;
j=k.bN[l.bI];
if(!j){j=new fr();
k.bN[l.bI]=j;
a.push(j)}j.fG(f,T)}if(d.fy){c.fD(k.b4(d.fy),T)}for(g=0,e=bh(d.kl);
g<e;
g++){c.km(k.b4(d.kl[g]),T)}if(c.fQ){bR(c.fQ,a)}else{c.fQ=a}for(g=0,e=bh(c.fQ);
g<e;
g++){j=c.fQ[g];
j.g6=am;
j.iv()}if(d.fg){c.fg=d.fg.b5()}c.hx=d.hx;
c.dv();
return c}function ml(h,b){var g=this,f,e=st.ds(),d,c,a;

if(!b){b=[]}else{if(bP(b,g)){return}}b.push(g);
if(h>a_){if(h!=ba){g.fQ=am;
g.jA=am}g.fg=am;
g.fn=am}if(h!=ba){f=g.l0();
for(c=0,a=bh(f);
c<a;
c++){f[c].fh(bb,b)}if(d=g.fy){d.fh(h,b)}}e.fh(h,b);
b.pop()}function mm(d,a,b,c){this.la=b;
this.k9=d;
this.k_=a;
this.cL=c}function mn(h,k){var b=[],l=h.lE(),m,g,f,d,e,a,c;
bU(l,this.dW);
for(e=0,a=bh(l);
e<a;
e++){c=l[e];
if(!c.el){for(g=0,f=bh(this.dW);
g<f;
g++){d=this.dW[g];
if(!d.el){m=c.c1.cL(d.c1,T);
if(m<=k){b.push(new mm(c,d,this,m));
break}}}}}return b}function mo(m,n){var e=this,d=[],p=m.lI(),b,a,o,l,k,g,h,c,f;
bU(p,e.dl);
for(h=0,c=bh(p);
h<c;
h++){f=p[h];
if(f.c0.el||f.c2.el){continue}for(l=0,k=bh(e.dl);
l<k;
l++){g=e.dl[l];
if(g.c0.el||g.c2.el){continue}if((b=f.c0.c1.cL(g.c0.c1,T))<=n&&(a=f.c2.c1.cL(g.c2.c1,T))<=n){d.push(new mm(f,g,e,0.5*(b+a)));
break}if((b=f.c0.c1.cL(g.c2.c1,T))<=n&&(a=f.c2.c1.cL(g.c0.c1,T))<=n){o=new mm(f,g,e,0.5*(b+a));
o.eJ=T;
d.push(o);
break}}}return d}function mp(b,a){if(!a){a=this.dX().b5()}fi.apply(this,arguments)}function g3(a){var b=this;
eO.apply(b);
b.l6=a;
b.dW=[];
b.h9=[];
b.dl=[];
b.hi=[];
b.kl=[];
b.fh=ml;
b.fV=lV;
b.l4=lU;
b.jv=lW;
b.cut=l3;
b.copy=lX;
b.l0=l1;
b.mq=l2;
b.mr=lZ;
b.ms=lS;
b.ungroupGroups=lT;
b.du=mi;
b.jO=fm;
b.fb=mj;
b.eD=mp;
b.mt=mn;
b.mu=mo;
b.addAll=b.bR=lR;
b.addRectSelection=mg;
b.mv=mh;
b.fG=l5;
b.fq=l7;
b.hB=l8;
b.hO=l9;
b.fK=l_;
b.fp=ma;
b.km=me;
b.kF=mf;
b.fD=mc;
b.kG=md;
b.fu=mb;
b.b5=mk}function mw(){var b="",A=fW[H].m,f=fW[H].fZ,n=st.gm(),a=bh(n.dW),c={},o="",l=0,r=0,y={},u="",k=0,v=0,z,m,w,h,t,p,q,x,e=st.ds().lE(),d,g;
n.hi=[];
n.hx=T;
for(t=0,p=bh(e);
t<p;
t++){d=e[t];
if(!d.dy){z=d.el;
m=(z&&z.type==at&&z.hm)||1;
if(y){k+=m*d.hb(F);
v+=m*d.hb(T);
y[d.dj]=by(y[d.dj])+m;
h=d.eu();
y[H]=by(y[H])+(m*h);
k+=m*A*h;
v+=m*f*h}if(z){if(z.type==at&&!z.hm){k=am;
v=am;
y=am;
u=s("poly");
break}}}}for(t=0,p=a;
t<p;
t++){d=n.dW[t];
z=d.el;
m=(z&&z.type==at&&z.hm)||1;
if(c){l+=m*d.hb(F);
r+=m*d.hb(T);
c[d.dj]=by(c[d.dj])+m;
h=d.eu();
c[H]=by(c[H])+(m*h);
l+=m*A*h;
r+=m*f*h}if(w){if(!w.bK(d.h8)){n.hx=F}}else{w=d.h8}if(z){n.hx=F;
if(z.type==at&&!z.hm){l=am;
r=am;
c=am;
o=s("poly")}}for(q=0,x=bh(d.dl);
q<x;
q++){if(!d.dl[q].dy){n.hi.push(d.dl[q])}}}for(t=0,p=bh(n.dl);
t<p;
t++){g=n.dl[t];
if(w){if(!w.bK(g.c0.h8)){n.hx=F}}else{w=g.c0.h8}if(g.el){n.hx=F}if(!g.c0.dy||!g.c2.dy){n.hi.push(g)}}n.hx=(n.hx&&a>0&&bh(n.hi)<=2);
if(c){o=mx(c)}if(y){u=mx(y)}my($("#bondRotate"),bh(n.hi)==1);
my($("#groupSelection"),n.hx);
my($("#ungroupSelection"),bh(n.h9));
if(a){b+=s("sele")+":&nbsp;"+o+mz(l,r);
if(u){b+=S+s("rem")+":&nbsp;"+u+mz(k,v)}}$("#info").html(b);
mA("change")}function mz(b,a){if(b>0){return"&nbsp;("+round(b,2,3)+"/"+round(a,4,3)+")"
}return""}function mx(h){var f,b,a=[C,H],d,e,g,c="";
bj(h);
for(f=0,b=bh(a);
f<b;
f++){d=a[f];
e=h[d];
if(e>0){c+=d;
if(e>1){c+=aF+e+aG}}}for(d in h){e=h[d];
g=fW[d];
if((!g||!g.fY)&&e>0){c+=d;
if(e>1){c+=aF+e+aG}}}return c}function ds(){var a=this;
if(a.mB){return a.mB}a.mC=bB(a.mC,0,bh(a.mD)-1);
return a.mD[a.mC]}function gm(){return this.ds().ko}function gR(){return this.mE}function mF(a){this.mE=a}function mG(){if(this.mE){this.mE.mH=am;
this.mE.mI=am;
this.mE=am}}function mJ(){if(this.mK()){this.mL(-1)}}function mM(){return this.mC>0}function mN(){if(this.mO()){this.mL(1)}}function mL(a){this.mP();
resetDirty(aW);
this.mC+=a;
mQ(aW);
mR(this.ds()).eX();
mw()}function mR(a){a.dU();
$("#threed").fadeTo(500,(a.c4.z-a.c6.z)>0?1:0);
return a}function mS(){return this.mC<bh(this.mD)-1}function mT(){var a=bh(this.mD)-mU;
if(a>0){this.mD.splice(0,a);
this.mC-=a}}function mV(){var a=this;
a.mT();
a.mD.splice(a.mC,0,st.ds().b5(new b6(T)));
a.mC++;
a.mD.length=a.mC+1}function mW(a){var b=this;
b.mT();
b.mC++;
b.mD[b.mC]=mR(a);
b.mD.length=b.mC+1}function mX(){var b=this,a=b.mD[b.mC];
b.mD[b.mC]=a.b5(new b6(T));
b.mB=a}function mY(){return !!this.mB}function mP(){var a=this;
if(a.mB){a.mB.dn();
a.mB=am;
a.mG();
a.ds().eX()}}function mZ(){var a=this;
if(a.mB){a.mW(a.mB);
a.mB=am;
a.mG();
mw()}}function m0(){var a=this;
a.mD=[];
a.mD[0]=new ft(aW);
a.mC=0;
a.gQ=F;
a.mX=mX;
a.mY=mY;
a.mP=mP;
a.mZ=mZ;
a.ds=ds;
a.gm=gm;
a.gR=gR;
a.mF=mF;
a.mG=mG;
a.mT=mT;
a.mV=mV;
a.mW=mW;
a.undo=mJ;
a.mK=mM;
a.redo=mN;
a.mO=mS;
a.mL=mL}function m1(a){$("#"+a).click()}function activateTool(d,b){m2();
m3(gS,b);
if(gS!=b){m4=F;
var a=F;
switch(b){case aR:case aS:m5();
a=T;
break;
case aU:case aV:a=T;
break;
case aM:m4=T;
break}if(!a){$(m6).css({border:"",d4:""});
$(d).css({border:"1.5px solid black",d4:"0.5px"});
m6=d}gS=b}else{if(gV&&b==aQ){var c=st.gm();
if(!c.fV()){m7()}}}h2()}function useAtom(a){m8(a);
$("#atom").click()}function m3(b,a){switch(b){case aR:case aS:gU=F;
st.mP();
break}}function m9(){m_(m6)}function m_(a){if(a){$(a).trigger("click",{na:T})}}function nb(a){nc=a.ctrlKey;
return bg(a)}function nd(c){if(!st.gQ){var a=new FileReader(),b;
a.onload=function(e){var d=e.target.result;
if(nc){activateTool(am,aR);
ne(new ft(aW,d))}else{lL(d)}};
if(c.dataTransfer){b=c.dataTransfer.files
}else{if(c.target){b=c.target.files}}if(b){a.readAsText(b[0],"iso-8859-1");
return bg(c)}}}function nf(b,a){if(b&&(!a||!a.na)){ng=b.target}}function nh(a){ng=am}function ni(d){if(!d||!d.data||!d.data.na){nf(d);
var c=$(ng).parent().children(au),a=aW.height,b=c.height();
c.fadeIn(50).css("z-index",10000);
c.css(c.offset().top+b>a?{position:"absolute",top:(a-b-25)+"px"}:{position:am,top:am})}}function nj(a){setTimeout(function(){if(!a){nh()}var b=$(au).filter(":visible");
if(bh(b)){if(ng){b=b.not($(ng).parent().children())}if(bh(b)){if(nk){b.hide()}else{b.fadeOut(100)}}}if(gV&&!bh(b)){ni()}},100)}function nl(a){if(a.target.tagName.toLowerCase()=="img"){a4.prop("src",a.target.src);
a5=T;
nm()}}function m5(){a5=F;
nn()}function nm(){if(a5){a4.show()}}function nn(){if(a5){a4.hide()}}function no(){var b=navigator.userAgent.toLowerCase(),a="";
if(/android|blackberry|kindle|mobile|phone/.test(b)){a="mobile"}else{if(/windows|macintosh|linux/.test(b)){a="desktop"}else{if(/Pad|Tablet/.test(navigator.userAgent)){a="mobile"}else{if(/CrOS|Mac/.test(navigator.userAgent)){a="desktop"}else{a=(np()?"mobile":"desktop")}}}}return a}function np(){return"ontouchstart" in document.documentElement}function setBond(a,b){gW=a;
gX=b}function hz(){h1(aW);
st.mV()}function hC(a){h2(T);
e_(a);
mw()}function nq(h){for(var b=aZ.val(),g,d,c="",f=0,a=bh(b);
f<a;
f++){g=b.charCodeAt(f);
if((!d&&g>96&&g<123)||(g==104&&b!="Ph"&&b!="Rh"&&b!="Th")){g-=32}d|=(g>64&&g<91);
c+=String.fromCharCode(g)}if(b!=c){m8(c)}}function nr(d){if(ns){hy(F);
return}if(nt(d)){return T}nu=T;
var c=d.which,b,a;
if(nv(aZ,d)&&c!=13){if(!d.shiftKey&&((((a=aZ.val())==""||!isNaN(bf(a)))&&c>64&&c<91)||(c==72&&a!="P"&&a!="R"&&a!="T"))){m8(a+String.fromCharCode(c));
return F}return T}b=(d.altKey?0.2:1);
switch(c){case 37:nx(-b,0);
break;
case 38:nx(0,-b);
break;
case 39:nx(b,0);
break;
case 40:nx(0,b);
break;
case 74:case 36:nx(0,0,b);
break;
case 75:case 35:nx(0,0,-b);
break;
case 33:ny();
nz();
break;
case 34:nA();
nz();
break}nj();
return bg(d)}function nv(a,b){return a&&b&&a.is(b.target)}function nt(a){return nv(a0,a)||nv(a1,a)||getSelection().toString()}function nB(a){return(nv(aZ,a)||nt(a)?T:bg(a))}function hy(a){if(a){ns=T}else{clearTimeout(nC);
nC=setTimeout(function(){ns=F},500)}}function nD(h){if(st.gQ||ns){ns=F;
return}if(nt(h)){return T}if(nv(aZ,h)){if(h.which==27||h.which==113){aZ.blur()}if(h.which!=13){return T}}var f=h.which,a,d=h.ctrlKey,b=h.altKey,g=(!d&&!h.shiftKey&&!b),c=st.gm();
switch(f){case 13:if(ek){hz();
ek.gd(gT());
e7(ek);
hC(aW)}else{if(!c.fV()){hz();
c.ms(gT());
hC(aW)}}break;
case 27:ek=am;
h0=am;
if(gU){nE=T;
gU=F;
st.mP();
h1(aW)}else{st.mG();
clearSelection()}m9();
break;
case 46:if(c.fV()){m1("deleteButton")}else{m7()}break;
case 49:case 97:m1("single");
break;
case 50:case 98:m1(d?"clean2D":"double");
break;
case 51:case 99:m1(d?"clean3D":"triple");

break;
case 65:if(d){hz();
c.bR();
hC(aW)}else{m1(aH)}break;
case 67:if(d){copy()}else{if(g){a=T}}break;
case 68:m1("singleDown");
break;
case 69:m1(aL);
break;
case 71:if(d){if(h.shiftKey){doUngroup()}else{createGroup()}}break;
case 76:if(g){a="Cl"}break;
case 77:m1("singleEither");
break;
case 66:case 70:case 72:case 73:case 78:case 80:if(g){a=T}break;
case 79:if(d&&b){$("#fileUpload").click()}else{if(g){a=T}}break;
case 81:m1(aM);
break;
case 82:if(g){a="Br"}break;
case 83:if(d&&b){saveFile()}else{if(g){a=T}}break;
case 84:m1("3d_rotate");
break;
case 85:if(d){doUngroup()}else{m1("singleUp")}break;
case 86:if(d){paste()}else{m1(aN)}break;
case 87:m1(aJ);
break;
case 88:if(d){cut()}break;
case 89:if(d){st.redo()}break;
case 90:if(d){st.undo()}break;
case 107:case 171:case 187:if(ek){hz();
ek.g_(1);
e7(ek);
hC(aW)}break;
case 109:case 173:case 189:if(ek){hz();
ek.g_(-1);
e7(ek);
hC(aW)}break;
case 110:case 190:if(ek){hz();
ek.ha();
e7(ek);
hC(aW)}break;
case 113:aZ.focus().select();
break}if(a){if(a===T){a=String.fromCharCode(f)}m8(a);
if(ek){hz();
ek.gd(gT());
e7(ek);
hC(aW)}}return bg(h)}function nF(b){var a=1/hP;
return new cb((b.x-0.5*nG.x)*a+nH.x,(b.y-0.5*nG.y)*a+nH.y)}function nI(a){var b=aX.offset();
return nF(new cb(a.pageX-b.left,a.pageY-b.top))}function nJ(b,a){if(a){nK=[];
nL="M"+b;
nM={x:b.x,y:b.y,x2:b.x,y2:b.y}}else{nL+="L"+b;
nM.x=M.min(nM.x,b.x);
nM.x2=M.max(nM.x2,b.x);
nM.y=M.min(nM.y,b.y);
nM.y2=M.max(nM.y2,b.y)}nK.push(b)}function nN(){return(ek?ek.eg:(nO?nO.eg:(h0?h0.eg:am)))}function m2(){ek=nO=h0=kY=k0=am}function nP(b){if(parent){parent.postMessage("focused","*")}if(gU||b.which!=1||st.gR()){return}nj();
nQ(b);
gU=T;
nE=F;
nR=ek;
nS=nO;
nT=h0;
nU=k0;
nV=kY;
nW=F;
var d=nI(b),a,c;
nJ(d,T);
if(!st.gQ){switch(gS){case aL:case aM:case aU:case aJ:case aH:case aI:case aQ:case aK:st.mX();
break;
case aN:case aO:case aP:a=st.gm();
st.mX();
if(a.fV()){a=new g3(T);
if(c=nN()){a.fu(c)}else{a.bR()}}m2();
st.mF(a);
break}}if(!st.gQ){return bg(b)}}function nX(c,d,b,a){if(d8){nY(c,d,b,a)}else{nZ+=b;
n0+=a;
if(n1){clearTimeout(n1)}n1=setTimeout(function(){nY(c,d,nZ,n0);
nZ=0;
n0=0},500)}return bg(c)}function nY(d,h,c,a){var g=nI(d),f,j,k,b,i;
if(st.gQ||d.ctrlKey){if(a<0){zoomOut()}else{zoomIn(cs(g,nH))}}else{if(d.shiftKey){f=(d.altKey?0.5:2.5);
if(d.ctrlKey){nx(-a*f,c*f)}else{nx(c*f,-a*f)}}else{if(!(j=st.gR())){hz();
j=st.gm();
if(j.fV()){j=new g3(T);
j.bR()}}f=-M.PI*a/(d.altKey?af:12);
if(gS==aP){i=j.hi[0];
k=(i.c0.dy?i.c0:i.c2);
b=(i.c0.dy?i.c2:i.c0);
j.eS(f,k.c1.b5(),b.c1)}else{k=j.mr();

j.eE(f,(k?k.c1.b5():am))}}}m2();
h1(aW);
h2();
n2()}function n3(y){nj();
if(st.gQ&&y.which!=1){n4()}else{if(y.which==1&&!nE){nQ(y);
var f=n5,q=nK[0],b=st.ds(),z,n,t,c,w,u,l,o,x,d,j,r,h,k,g,p,m,v={},a=(st.gQ?aV:gS);
if((nW||!y.ctrlKey)&&(z=st.gR())){t=z.mu(b,n6);
for(w=0,u=bh(t);
w<u;
w++){b.lN(t[w],v)}c=z.mt(b,n6);
for(w=0,u=bh(c);
w<u;
w++){b.lM(c[w],u==1)}n=z.l0();
n7(n);
for(w=0,u=bh(n);
w<u;
w++){b.fu(n[w])}b.lJ();
z.fh(a9);
st.mZ()}else{if(!nW&&y.ctrlKey&&(l=(ek||nO))){switch(a){case aQ:b.jP(l.eg);
st.mZ();
break;
default:o=st.gm();
if(!y.shiftKey){o.jv()}o.fu(l.eg);
st.mZ()}}else{switch(a){case aV:if(nW){zoomBox(q,f)}else{zoomIn(f)}break;
case aN:case aO:case aP:st.mZ();
break;
case aL:case aM:if(!z){o=st.gm();
if(!y.shiftKey){o.jv()}x=0;
if(!nW){x=3;
if(nO){o.fK(nO)}if(k0){o.fD(k0)}if(kY){o.km(kY)}}if(a==aL){o.addRectSelection(q,f,x)}else{nJ(f);
nJ(q);
o.mv(nK,nM)}}st.mZ();
break;
case aT:if(!h0){hz();
d=b.kD(f);
e7(d);
hC(aW)}break;
case aU:if(h0){st.mP()}else{if(!nW){f.x+=k5}b.lh(q,f);
e7(b);
st.mZ();
m9()}break;
case aJ:if(nO&&!ek&&!nW){nO.iJ();
st.mZ()}else{r=F;
if(nR){j=nR.eg;
if(!nR.el&&nR.bK(ek)){k=new gg(gh(nR,1));
g=new gj(nR,k,1,0);
j.fG(k);
j.fK(g);
k.gd(gT());
e7(nR);
h1(aW);
st.mZ();
break}}else{if(eh=="rxn"||!bh(b.fQ)){j=new fr();
b.fu(j);
r=T}else{j=b.fQ[0]}}if((!nR||!nR.el)&&(!ek||!ek.el)&&js(y,q,f,j,nR,ek)){if(r){b.kx();
b.ky()}st.mZ()}else{st.mP()}}break;
case aH:if(ek){ek.gd(gT());
e7(ek);
st.mZ();
break}case aI:if(nO&&!ek&&!nW){nO.iJ();
st.mZ()}else{if(h0){st.mP()}else{if((nS&&!nR)||(nR&&nR.el)||(ek&&ek.el)){st.mP()}else{p=gT();
gi.fU();
h=nR;
k=ek;
if(h&&k&&!k.bK(h)){if(g=h.g8(k)){g.iJ()}else{h.eg.fM.jx(h,k)}}else{if(k&&k.bK(h)){nW=F;
k=am}if(!nW){f=am}r=F;
m=[];
if(eh!="rxn"){j=b.fQ[0]}else{if(h){j=h.eg}else{if(k){j=k.eg}}}if(!j){j=new fr();
b.fu(j);
r=T}if(!h){h=new gg(q.b5());
j.fG(h);
m.push(h)}if(!k&&(nW||nR||(a==aI&&p==C))){k=new gg(gh(h,gW,f,y));
j.fG(k);
m.push(k)}j.fK(new gj(h,k,gW,gX));
for(w=0,u=bh(m);
w<u;
w++){m[w].gd(p)}if(r){b.kx();
b.ky()}}st.mZ();
gU=F;
h1(aW);
h2(T)}}}break;
case aQ:if(h0){h0.eg.hO(h0);
h0=am}else{if(ek){ek.eg.fq(ek);
ek=am}if(nO){nO.eg.fp(nO);
nO=am}if(k0){k0.fM.kG(k0);
k0=am}if(kY){kY.fM.kF(kY);
kY=am}}st.mZ();
break;
case aK:if(ek){j=ek.eg;
if(j&&!ek.bK(j.ei)){e7(j.ei);

j.ei=ek;
e7(ek);
st.mZ()}else{st.mP()}}break}}}gU=F;
if(a==aR){if(n8){n9(y,y.pageX,y.pageY)}else{m9()}}n2()}}}function n_(g,i){var a={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},d=g.originalEvent,f=d.changedTouches,b=a[d.type],h,c;
if(b){if(i||bh(f)==1){h=f[0];
c=document.createEvent("MouseEvent");
c.initMouseEvent(b,true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c);
d.preventDefault();
if(b=="mouseup"&&!nW){c=document.createEvent("MouseEvent");
c.initMouseEvent("click",true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);
h.target.dispatchEvent(c)}return T}return F}}function hR(a){if(a){a.remove();
a.clear()}}function h1(a){if(!a){return}hR(a.jw);
if(!h0){hR(a.hS)}if(!ek){hR(a.fA)}}function h2(e){var d=st.ds(),a=d.lF(n5),c=d.lH(n5),b;
if(ek&&(e||!ek.bK(a))){ek.hg();
e7(ek);
mA("outAtom",ek)}if(h0&&(e||!h0.bK(c))){h0.hg()}if(!a){ek=am;
b=d.lG(n5);
if(nO&&(e||!nO.bK(b))){mA("outBond",nO)}if(b&&(e||!b.bK(nO))){mA("overBond",b)}nO=b;
if(b){e7(b)}}else{if(e||!a.bK(ek)){ek=a;
if(nO){e7(nO);
mA("outBond",nO);
nO=am}ek.hf();
e7(ek);
mA("overAtom",ek)}}if(!c){h0=am}else{if(e||!c.bK(h0)){h0=c;
h0.hf()}}}function mA(a,b){$(window).trigger(a,{obj:b})}function nQ(b){nc=b.ctrlKey;
var a=b.clientX,c=b.clientY;
if(gV){a3.css({left:a-4,top:c-4})}a4.css({left:a+30,top:c+30});
n5=nI(b);
h1(aW);
if(!ek){gi.fU()}h2()}function oa(b,a,c){if(d8){ob(b,a,c)}else{clearTimeout(oc);
oc=setTimeout(function(){ob(b,a,c)},250)}}function ob(h,p,n){nQ(h);
aX.css("cursor","");
var o,c,j,l,b,q,t,m,d,a,r,g,f,k=(st.gQ?aV:gS);
if(gU){o=n5;
c=nK[0];
j=st.ds();
if(m4){nJ(o)}if(!nW){nW=(o.cL(c)>od);
if(nW){switch(k){case aL:case aM:if((nR&&nR.dy)||(nS&&nS.dy)||(nU&&nU.dy)||(nV&&nV.dy)){l=st.gm()}else{l=new g3(T);
if(nR){l.fG(nR)}else{if(nS){l.fK(nS)}else{if(nT){l.hB(nT);
h0=am;
h1(aW)}else{if(nU){l.fD(nU)}else{if(nV){l.km(nV)}}}}}}if(!l.fV()){st.mF(l)}break}}}if(l=st.gR()){switch(k){case aN:case aP:if(nW){b=by(l.mI);
q=M.atan2(o.y-c.y,o.x-c.x);
if(k==aP){r=l.hi[0];
t=(r.c0.dy?r.c0:r.c2);
m=(r.c0.dy?r.c2:r.c0);
l.eS(q-b,t.c1.b5(),m.c1)}else{l.eE(q-b,c)}l.mI=q;
l.eX();
aW.jw.push(aW.path("M"+c+"L"+o).attr(ay,"#f00").attr(aA,c7),aW.text(o.x,o.y+30/hP,round(q*ah,1)+"").attr(ax,2+20/hP))}break;
case aO:if(nW){b=(l.mH||c);
l.mH=o;
q=(h.altKey?0.01:0.1);
l.eF(q*(b.y-o.y),q*(o.x-b.x),l.dX())}break;
default:oe(c,o,j,aW)}}else{switch(k){case aV:case aL:of(aW,c,o);
break;
case aM:aW.jw.push(aW.path(nL+"Z").attr(og));
break;
case aJ:if((!nR||!nR.el)&&(!ek||(!ek.el&&!ek.bK(nR)))){js(h,c,o,am,nR,ek)
}break;
case aH:case aI:if(nW&&!nS&&(!nR||!nR.el)&&(!ek||(!ek.el&&!ek.bK(nR)))){gi.fU();
t=nR;
m=ek;
d=[];
if(t&&(r=t.g8(m))){r=gi.fK(r);
r.iJ()}else{a=gT();
if(!t){t=gi.fG(new gg(c.b5()));
d.push(t)}if(!m){m=gi.fG(new gg(gh(t,gW,o,h)));
d.push(m)}gi.fK(new gj(t,m,gW,gX));
for(g=0,f=bh(d);
g<f;
g++){d[g].gd(a)}}gi.eX()}break;
case aU:if(nW){gi.fT(c,o);
gi.eX()}break;
case aQ:if(ek){ek.eg.fq(ek);
ek=am}if(nO){nO.eg.fp(nO);
nO=am}break}}}else{if(nO){switch(k){case aH:aX.css("cursor","move");
break;
case aI:e7(nO);
var r=gi.fK(nO);
r.iJ();
gi.eX();
break}}}switch(k){case aL:case aM:if(ek||nO){aX.css("cursor","move")}break}n2()}function of(d,c,e){var b=M.min(c.x,e.x),a=M.min(c.y,e.y);
d.jw.push(d.rect(b,a,M.abs(e.x-c.x),M.abs(e.y-c.y)).attr(og))}function oe(b,j,g,c){var h=st.gR(),m,l,d,a,n,k,f,e;
if(!h||st.gQ){return}m=(h.mH||b);
l=j.cr(m);
h.cm(l.x,l.y);
h.mH=j;
if(g){d=h.mt(g,1.5*n6);
for(f=0,e=bh(d);
f<e;
f++){a=d[f];
n=a.k_.c1;
k=a.k9.c1;
c.jw.push(c.ellipse(n.x,n.y,n6,n6).attr(oh).attr(aE,a.cL<n6?oi:oj));
c.jw.push(c.ellipse(k.x,k.y,n6,n6).attr(oh).attr(aE,a.cL<n6?oi:oj))}}}function ok(c,d,b){var a="templates/"+b+".mol";
jQuery.get(a,{},function(e){d.push(new ol(a,e,c));
ok(c,d,b+1)},"text")}function om(){var a=$("#builtinTemplates").remove(".template");
if(!bC("noTemplates")){ok(a[0],oo.server,0)}}function addTemplate(b,e){var d,a,c=$(e?"#tmpl"+e:"#serverTemplates"),f=oo.server;
if(!c.length){$("<tr>").append($("<td>").addClass("menuWithPopup").mouseleave(nj).click(nj).append(c=$("<div id="+bw("tmpl"+e)+' class="menuPopup templatesMenu">'+getImgSt("del")+' class="button" style="float:right" onClick="hideMenu();"/></div>').css({opacity:0.85}).mouseleave({obj:this},op).click(nh)).append($(getImgSt(e)+' class="button"/>').mouseenter(ni).click(nf))).insertBefore("#groupSelection")}if($.isArray(b)){for(d=0,a=bh(b);
d<a;
d++){f.push(oq(b[d],c))}}else{f.push(d=oq(b,c));
return d}}function oq(a,b){try{a=pako.ungzip(atob(a),{to:"string"})}catch(c){}return new ol(am,a,b)}function ge(b){if(!b){return}b=b.charAt(0).toUpperCase()+b.substr(1);
for(var d,c=0,a=bh(oo.server);
c<a;
c++){d=oo.server[c];
if(d.ei&&$.inArray(b,d.or)!=-1){return d}}}function os(){if(this.url){jQuery.get(this.url,{},function(a){this.fM=new ft(this.db,a);
this.eX()},"text")}}function ot(){var a=this,f=a.fM,c,b,e,g,j=ka,h=ka,d=a.ou.parent(".templatesMenu");
for(c=0,b=bh(f.fQ);
c<b;
c++){e=f.fQ[c];
if(!a.ei){a.ei=e.ei}if(!a.tooltip){a.tooltip=e.a1}if(!$.isArray(a.or)){a.or=e.a0}}g=bz(a.tooltip);
if(a.or&&bh(a.or)){g+=" ("+a.or.join(",")+")"}a.ou.attr("title",g);
f.dU();
j+=M.max(ov-f.c4.x+f.c6.x,0);
h+=M.max(ov-f.c4.y+f.c6.y,0);
a.db.setViewBox(f.c6.x-j,f.c6.y-h,f.c4.x-f.c6.x+2*j,f.c4.y-f.c6.y+2*h);
d.show();
f.eX();
d.hide()}function n7(c){for(var b=0,a=bh(c);

b<a;
b++){e7(c[b].ei);
c[b].ei=am}}function ow(b,a,c){n8=F;
ox=b.data.obj;
n9(b,a,c);
op();
setTimeout(nj,700)}function oy(b,a,c){n8=T}function n9(b,a,c){oz();
oa(b,a,c)}function oz(){activateTool(am,aR);
ne(ox.fM.b5(),ox.ei)}function ne(c,b){st.mX();
var e=c.fQ,g=st.ds(),d,a,f=new g3(T);
c.lQ(aW);
for(d=0,a=bh(e);
d<a;
d++){g.fu(e[d],F,T);
f.fu(e[d])}gU=T;
nK[0]=(b?b.c1:f.dX());
st.mF(f)}function oA(c){var b=c.data.obj,a=$(b.ou[0].firstChild).clone().attr("width",oB).attr("height",oB);
$("#overlay").empty().append(a).show().mouseenter(function(){$(".templatesMenu").hide()})}function op(){var a=$("#overlay");
if(be){a.hide()}else{a.fadeOut()}}function gf(){var a=new b6();
this.fM.b5(a);
return a.b4(this.ei)}function ol(b,a,c){var f=this,e,d=(gV?33:50);
f.url=b;
f.ou=$("<div>").css({display:"inline-block"}).addClass("button template").appendTo(c).click({obj:f},ow).dblclick({obj:f},oy).mouseenter({obj:f},oA);
f.db=new Raphael(f.ou[0],oC,oD);
bH.apply(f.db);
mQ(f.db);
f.fM=new ft(f.db,a);
if(e=f.fM.fQ[0]){e=bz(e.a1).substr(0,12);
f.ou.append($("<div>").css({position:"absolute",top:0,height:"100%",padding:"25% 3px","background-color":"white",opacity:0.3,"font-size":(bh(e)>6?d:d*2)+"%"}).text(e))}f.gf=gf;
f.reload=os;
f.eX=ot;
f.eX()}var isReady=F,lang=bx(bC("lang"),"en"),bF=["en","de"],langDef={},oE=(typeof nw!="undefined"),oF=!!bC("embedded"),d8=Raphael.svg,gV=(no()=="mobile"),iconSize=(gV?35:20),nk=(be||$.browser.opera),nH=new cb(),hP,oG=1000,oH=0.001,oI=0.25,h4=16,nG,st,lY,gi,gS,gW=1,gX=0,eh=bx(bC("mode"),"mol"),eq=!!bC("debug"),nE=F,nc,n5,ng,ek,h0,nO,kY,k0,gU=F,ns=F,nC,oc,n1,nZ=0,n0=0,nW,m4=F,nK=[],nL="",nM={},nR,nT,nS,nV,nU,oJ=4,od=3,m6,ox,n8=F;
bE();
var mU=30,je=12,ju=30,oC=50,oD=50,et=10,c5=et*1.4,dd=2,c9=1.5,c8=0.06,da=0.01,d4=1.5*et,dx=7,k5=55,dF=7,dG=0.2,hF=0.5,n6=0.25*et,oK=0.1,es=0.38,c7=(d8?0.333333333:1),dB=1,ep=0.02*et,eo=6,hM=et*0.5,jY=et*0.25,lv=2,jt=30,oB,hT="#000",dA=hT,dc=(eq?"gray":"#fff"),ej="#f00",dz="#0f0",dK="#666",en="#00f",em="#f00",oi="#0f0",oj="#f00",oh={"stroke-width":0,"fill-opacity":0.4},og={stroke:dz,fill:dz,"fill-opacity":0.2},hW={stroke:"deepskyblue",fill:"deepskyblue","fill-opacity":0.2,"stroke-width":c7},oo={server:[]},ka=0.45*et,ov=3.5*ka,oL=c5/720,oM=0.2,j8=0.3,j7=0.6*c5,oN=0.3*c5,oO=400,oP=80,oQ=0.6,oR=0.1;

function gT(){var a=aZ.val();
if(!a){a=C}return a}function m8(a){aZ.val(a)}function nz(){var a=1/hP;
if(aW){aW.setViewBox(nH.x-0.5*a*nG.x,nH.y-0.5*a*nG.y,nG.x*a,nG.y*a)}if(!d8){st.ds().eX()}}function oS(a){nH=a;
nz()}function oT(a){if(!a){return oJ}return M.max(M.min(a,oG),oH)}function n4(f){var c=st.ds(),b,e,a,d;
if(bh(c.lE())>0){c.dU();
b=c.c6.x-d4;
e=c.c6.y-d4;
a=c.c4.x+d4;
d=c.c4.y+d4;
hP=oT(M.min(nG.x/(a-b),nG.y/(d-e)));
if(f&&hP>f){hP=f}}else{hP=oJ}oS(new cb(0.5*(b+a),0.5*(e+d)))}function zoomBox(a,b){hP=M.min(oG,nG.x/M.abs(b.x-a.x),nG.y/M.abs(b.y-a.y));
oS(cs(a,b))}function zoomIn(a){ny();
if(a){oS(a)}else{nz()}if(!st.gQ){m9()}}function ny(){if(hP<oG){hP/=1-oI}}function zoomOut(){if(gS==aV){m9()}nA();
nz()}function nA(){if(hP>oH){hP*=1-oI}}function nx(b,a,f){var e=b*et/hP,d=a*et/hP,c=st.gm();
if(st.gQ||c.fV()){nH.x+=e;
nH.y+=d;
if(f&&!st.gQ){hz();
st.ds().cm(0,0,f);
hC(aW)}nz()}else{hz();
c.cm(e,d,f);
hC(aW)}h2()}function eC(a){if(!gU){return bg(a)}}function ik(){}function oU(){if(!aX){aX=$("#svgParent")}if(aW){aW.canvas.style.display="none"}nG=new cb(aX.width(),aX.height());
if(aW){aW.canvas.style.display="";
aW.setSize((d8?"100%":nG.x),nG.y)}else{aW=new Raphael("svgParent",(d8?"100%":nG.x),nG.y);
bH.apply(aW);
aW.oV=T;
st=new m0();
mQ(aW);
gi=new fR();
aW.canvas.onselectstart=bg;
aX.mousedown(nP).mousemove(oa).mouseup(n3).mousewheel(nX).mouseover(nm).mouseout(nn).bind("touchstart",n_).bind("touchmove",n_).bind("touchend",n_)}nz()}function clearSelection(){hz();
st.gm().jv();
hC(aW)}function m7(){hz();
st.gm().l4();
hC(aW)}function cut(){hz();
st.gm().cut();
hC(aW)}function copy(){st.gm().copy()}function paste(){activateTool(am,aS);
st.mX();
var d=lY.b5(am,T),c,a,b=d.l0(),e=st.ds();
for(c=0,a=bh(d.kl);
c<a;
c++){e.km(d.kl[c])}for(c=0,a=bh(b);
c<a;
c++){e.fu(b[c])}gU=T;
nK[0]=d.dX();
st.mF(d);
h2()}function flip(a){hz();
var b=st.gm();
if(b.fV()){b.bR();
b.eJ(a,nH);
b.jv()}else{b.eJ(a)}hC(aW)}function doUngroup(){var a=st.gm();
if(h0){hz();
h0.h5();
hC(aW)}else{if(!a.fV()){hz();
a.ungroupGroups();
hC(aW)}}}function clearReaction(){lL("")}function mQ(a){a.clear();
a.jw=a.set();
a.hS=a.set();
a.fA=a.set();
a.hY=a.path("M0,0");
a.e8=[]}function saveFile(){oW(open("data:chemical/x-mdl-molfile;fileName="+(eh=="rxn"?"reaction.rxn":"molecule.mol")+";content-disposition=attachment,"+encodeURIComponent(lK()),"Download"))}function saveSVG(){if(aW&&aW.canvas){var c=st.ds(),b,a;

c.dU();
b=c.c4.x-c.c6.x+2*d4;
a=c.c4.y-c.c6.y+2*d4;
aW.setSize(b,a);
aW.setViewBox(c.c6.x-d4,c.c6.y-d4,b,a);
oW(open("data:application/octet-stream;fileName=structure.svg;content-disposition=attachment,"+encodeURIComponent(aW.canvas.outerHTML),"Download"));
oU()}}function oW(a){setTimeout(function(){a.close()},500)}function n2(){e_(aW)}function lK(){st.mP();
return st.ds().lK()}function lL(b){if(!aW){oU()}mQ(aW);
var a=new ft(aW,b);
st.mW(a);
if(d8){a.eX()}hC(aW);
n4(3)}function getReadOnly(){return st.gQ}function setReadOnly(b){if(st.gQ!=b){st.gQ=b;
var a=$("#leftCol");
if(b){a.attr("data-width",a.attr("width"));
a.attr("width",1);
$(".toolbar").hide();
gi.fU();
st.mP();
m2();
h1(aW);
n2();
m5()}else{a.attr("width",a.attr("data-width"));
$(".toolbar").show();
a5=T}}}function getDisplayAtomNumbers(){return st.df}function setDisplayAtomNumbers(a){if(st.df!=a){st.df=a;
st.ds().eX()}}function highlightAtom(e,b,a){if(a==am){a=T}var d=st.ds().fQ[by(b)],c;
if(d){c=d.dW[e];
if(c){c.dg=a;
c.eX()}}}function unhighlightAtoms(b){var a=st.ds(),e,d,c;
if(b!=am){e=a.fQ[by(b)];
for(c=bh(e.dW)-1;
c>=0;
c--){d=e.dW[c];
if(d.dg){d.dg=F;
d.eX()}}}else{for(c=bh(a.fQ)-1;
c>=0;
c--){unhighlightAtoms(c)}}}function highlightBond(c,b,a){if(a==am){a=T}var d=st.ds().fQ[by(b)],e;
if(d){e=d.dl[c];
if(e){e.dg=a;
e.eX()}}}function unhighlightBonds(b){var a=st.ds(),d,e,c;
if(b!=am){d=a.fQ[by(b)];
for(c=bh(d.dl)-1;
c>=0;
c--){e=d.dl[c];
if(e.dg){e.dg=F;
e.eX()}}}else{for(c=bh(a.fQ)-1;
c>=0;
c--){unhighlightBonds(c)}}}function unhighlightAll(a){unhighlightAtoms(a);
unhighlightBonds(a)}function showURL(a){var c=$("#infoArea"),b=(gV?1.8:1);
if(!a){c.hide();
oU()}else{if(c.firstChild||(nG.x>600*b&&nG.y>400*b)||!open(a)){c.show().height("50%");
$("#infoContent").html("<iframe src="+bw(a)+' width="99%" height="'+(be?0.5*nG.y:"95%")+'"/>');
oU()}}}function getMode(){return eh}function getParams(){return"?lang="+lang+"&mode="+eh+"&embedded="+(oF||"")}function my(b,a){be?(a?b.show():b.hide()):(a?b.slideDown():b.slideUp())}function getImgSt(a){return'<img src="icons/'+a+(d8?'.svg" width="'+iconSize+'" height="'+iconSize+'"':'.png"')}$(window).load(function(){aY=$("html");
aZ=$("#newAtomSym");
a0=$("#templateShortcuts");
a1=$("#templateName");
a2=$(".templatesMenu").css({opacity:0.85}).mouseleave({obj:this},op);
a4=$("#editIcon");
$("#fileUpload").change(nd);
$.event.props.push("dataTransfer");
aY.bind("drop",nd).bind("dragover",nb).bind("dragend",bg).keydown(nr).keyup(nD);
$("#info").bind("contextmenu",stopPropagation);
if(oE){aY.bind("contextmenu",bg)}if(!eq){$("body").bind("contextmenu",bg)}aY.onscroll=bg;
if(gV){aY.bind("input",nq)}window.onresize=oU;
var a=M.min(aY.width(),aY.height());
hP=oT(0.01*a);
oB=M.min(600,a)+an;
oU();
var b=aX.offset();
$("#overlay").css({left:b.left+an,top:b.top+an});
if(eh=="rxn"){$(".modeRxn").show()}else{if(eh=="tmpl"){$(".modeTmpl").show()}else{$(".modeMol").show()}}if(!be&&!oF){$(".modeFile").show()}if(oF){$("#copyright").hide();
$("#info").css("font-size","7pt")
}if(bC("readonly")){setReadOnly(T)}else{$(av+" > img").mouseenter(ni).click(nf);
$(av).mouseleave(nj).click(nj);
$(au).click(nh);
$(".tool").click(nl);
$("td.separator + td").addClass("afterSeparator");
setTimeout(function(){om()},50);
bG();
m_(".defaultTool");
if(!bC("nofocus")){aZ.focus().blur()}}$.rule(au).css("left",(iconSize+6)+"px");
if(gV){a3=$("#touchCursor").show();
$.rule("input,.button").css("font-size","20pt");
aZ.click(function(){this.select()})}isReady=T});
function cleanStructure(d){st.mP();
var e,c=st.gm(),f=[],b,a;
hz();
if(c.fV()){f.push(st.ds())}else{f=c.mq()}for(b=0,a=bh(f);
b<a;
b++){e=f[b];
e.jo(d);
e.eX()}hC(aW);
n4(3);
if(ox&&gS==aR){oz()}}function lP(e){var g=this,f=g.fQ,b,d,a,c=0,h;
g.kG(F);
for(d=bh(g.kl)-1;
d>=0;
d--){g.kF(g.kl[d],T)}for(d=bh(f)-1;
d>=0;
d--){b=f[d];
if(!bh(b.dW)){bW(b,g.fQ);
if(d<g.kn){g.kn--}}}h=g.kn;
for(d=0,a=bh(f);
d<a;
d++){b=f[d];
b.jo(e);
if(d==h){g.lh(c,am,T);
c+=k5+d4}else{if(d>0){g.kD(c,0,T);
c+=dx+d4}}b.dU();
b.jF(c);
c+=(b.c4.x-b.c6.x)+d4}if(d==h){g.lh(c)}g.kn=h;
n4(3);
m2()}function kj(d){if(!this.jA){this.iv()}for(var e=this,c=e.kg(),b=0,a=bh(e.jA);
b<a;
b++){e.jA[b].jo(d,c)}}function jp(c,b){var d=this,a=d.dX().b5();
new oX(d,c,b);
d.cm(a.cr(d.dX()))}function oY(){var e=this,c=e.h8,g,h,f=e.oZ(),l=e.o0(),b=e.o1(),j,d,a,i=oQ,k=c.jq();
while((e.o2=f+l+b)>oR){if(g==1||(!g&&b>f)){e.o3(i);
h=1}else{e.o4(i);
h=2}j=e.oZ();
d=e.o0();
a=e.o1();
if(j+d+a<e.o2){f=j;
l=d;
b=a;
k=c.jq();
i*=0.98}else{c.jr(k);
if(M.abs(i)<0.05){break}if(g){i*=0.5;
g=0}else{i*=-0.8;
if(h==1){g=2}else{g=1}}}}}function o5(){var d=this,b=!d.o6,c=d.h8,l,g,f,k,e,a,n,m,h,o=0;
d.o7=[];
for(l=0,g=bh(c.dW);
l<g;
l++){k=c.dW[l];
for(f=0;
f<l;
f++){e=c.dW[f];
a=k.c1.cL(e.c1,b);
if((n=j7*(b?1:2)-a)>0){m=j8*n*n;
d.o7.push(new o8(k,e,a,n,m));
o+=m}}if(b){o+=M.abs(k.c1.z)}}for(l=0,g=bh(c.dl);
l<g;
l++){k=c.dl[l];
h=c5;
if(k.dm==0){h*=1.3}a=k.c0.c1.cL(k.c2.c1,b);
if(a!=h){d.o7.push(k)}k.o9=h;
k.bh=a;
n=M.abs(h-a);
m=(a>oN?n:n*oO);
k.o_=m;
o+=m}return o}function pa(){var r=this,f=!r.o6,k=r.h8,n,l,m,p,b,c,u,t,a,v,e,h,g,q,o=0;
for(n=0,l=bh(k.dl);
n<l;
n++){c=k.dl[n];
u=c.c0;
t=c.c2;
a=t.c1.cr(u.c1,f);
if(!a.x&&!a.y&&!a.z){o+=oP;
continue}e=a.ct();
g=am;
for(m=0,p=bh(k.dW);
m<p;
m++){b=k.dW[m];
if(!b.bK(u)&&!b.bK(t)){v=b.c1.cr(u.c1,f);
if((q=oN-e.ci(v).bh())>0){if((h=a.cf(v))>=0&&h<=(g||(g=a.cf(a)))){o+=oP*q*q}}}}}return o}function pb(){var e=this,b,a,d,f,c=0;
for(b=0,a=bh(e.pc);
b<a;
b++){d=e.pc[b];
d.pd();
f=oL*(oM*d.cL*d.cL+M.abs(d.cL));
d.o_=f;
c+=f}return c}function pe(){for(var f=this,d=0,c,a,e=[],b;
d<3;
d++){f.pf[d].pd()}f.cL=0;
if(a=f.pg){for(d=0;
d<3;
d++){e[d]=[];
for(c=0;
c<3;
c++){e[d][c]=(f.pf[d].ph?M.abs(a[c]-f.pf[d].pg):0)}}b=pi(e);
for(d=0;
d<3;
d++){for(c=0;
c<3;
c++){if(f.pf[d].ph){if(c!=b[d]){e[d][c]=ao}}else{e[d][c]=M.abs(a[c]-f.pf[d].pg)}}}b=pi(e);

for(d=0;
d<3;
d++){f.cL+=(f.pf[d].pg=e[d][b[d]])}}}function pi(e){for(var g=0,b=bh(e),j=[],h=[],f,a,l,d;
g<b;
g++){h[g]=0;
j[g]=g}d=pj(e,j);
l=j.slice();
g=1;
while(d>0&&g<b){if(h[g]<g){f=g%2&&h[g];
a=j[g];
j[g]=j[f];
j[f]=a;
++h[g];
g=1;
if(pj(e,j)<d){l=j.slice()}}else{h[g]=0;
++g}}return l}function pj(e,d){for(var b=0,c=0,a=bh(d);
b<a;
b++){c+=e[b][d[b]]}return c}function pk(){var d=this,b=d.pl,c=d.pm,a=d.gr;
d.pn=(d.po.o6?jX(a,c,b):er(a,c,b));
d.cL=d.pn-d.pg}function pp(){var c=this,b=c.gr,a=bh(b.dl);
if(a>3||a==b.gA()){if(a<5){c.pg=[aj,aj,aj]}else{if(a==5){c.pg=[ad,ad,ae]}else{if(a==6){c.pg=[ad,ad,ad]}else{if(a==7){c.pg=[72,ad,ad]}else{if(a==8){c.pg=[0.5*aj,ad,ad]}}}}}}else{c.pg=[ae,ae,ae]}}function pq(b){var h=this,a=h.po,f=h.gr,d=bh(f.dl),e=f.gA(),c=f.dj,g;
if(e==4&&d==2){h.pg=af}else{if((a.o6?d==e:d==4)&&(c=="P"||c=="S")){h.pg=ad}else{if(a.o6&&(c=="P"||c=="S"||d==e)){h.pg=aj}else{if(d==6||(d>3&&h.pn<90)){h.pg=60}else{if((g=a.pr)&&bh(g)&&d==3&&(c=="N"||c=="P")){h.pg=(b?210:(a.o6?90:75))}else{if(d==2&&h.pn>af){h.pg=240}else{h.pg=ae}}}}}}}function ps(d,c){if(d.o_==c.o_){return 0}if(d.o_==undefined||d.o_<c.o_){return 1}return -1}function pt(l){var n=this.o7,k=this.o6,j,g,h,f,e,a,c,b,r,q,p=0,d,o,m;
if(g=bh(n)){l=M.abs(l);
n.sort(ps);
for(j=0;
j<g;
j++){h=n[j];
if(h.o_<0.1){break}if(j/g<M.random()){a=h.bh;
c=h.c0;
b=h.c2;
r=l*(b.c1.x-c.c1.x)*(h.o9-a)/a;
q=l*(b.c1.y-c.c1.y)*(h.o9-a)/a;
if(k){p=l*(b.c1.z-c.c1.z)*(h.o9-a)/a}o=bh(c.dl);
m=bh(b.dl);
d=o+m;
o/=d;
m/=d;
if(!(h instanceof gj)||bh(h.dV())==0){f=c.g4(b);
f.fp(h);
e=b.g4(c);
e.fp(h)}else{f=c.c1;
e=b.c1}f.cm(-r*m,-q*m,-p*m);
e.cm(r*o,q*o,p*o)}}if(!k){l=0.9-l;
for(n=this.h8.fb(),j=g-1;
j>=0;
j--){n[j].z*=l}}this.h8.ct()}}function pu(b,a){return(M.abs(b.cL)<31-M.abs(a)*50?0:(b.cL>0?-1:1))}function pv(w){var A=this.pc,x=this.pw,E,z,D,K,B,r,a,b,l,J,g=[],G,v,e,o,n,h,f,m=[],q=(w>0?1:0),t,I,u,L,d,p,y,N,c;
x.sort(ps);
for(E=0,z=bh(x);
E<z;
E++){f=F;
r=x[E];
b=r.gr;
a=b.c1;
u=d=p=0;
L=a.eK(r.px[0].c1,r.px[1].c1,r.px[2].c1);
for(D=0;
D<3;
D++){l=r.dl[D];
L/=l.c0.c1.cL(l.c2.c1)+Number.py}if(t=(M.abs(L)<0.0001)){e=0;
for(D=0;
D<3;
D++){N=r.pf[D].pn;
e+=N;
if(N>u){u=r.pf[D].pn;
L=D}}e=(e<358);
u=pu(r.pf[L],w)}for(D=0;
D<3;
D++){d+=(J=pu(r.pf[D],w));
if(J==0){p++;
if(!t){L=D}}}if(p<3){y=[];
for(D=0;
D<3;
D++){l=r.dl[D];
if(bh(l.dV())){N=new g3(T);
N.fK(l);
N.fG(l.gw(b));
f=T}else{N=l.g4(b)}y.push(N)}if(t){c=r.pf[L];
if(M.abs(d)>1&&e){o=a.eG(c.pm.c1,c.pl.c1);
n=a.cE(o);
l=0;
for(D=0;
D<3;
D++){l+=(D==L?1:-1)*r.pf[D].cL;
g[D]=0}for(D=0;
D<3;
D++){if(D!=L){I=r.pf[D].cL+0.3*l;
for(B=0;
B<3;
B++){if(D!=B){g[B]+=(a.eK(r.dl[B].gw(b).c1,r.dl[D].gw(b).c1,n)>0?1:-1)*I}}}}for(D=0;
D<3;
D++){y[D].cu(g[D]*ag,o,a)}}if(d<0||(e&&u<d-u)||(r.pf[L].pn>175&&r.pf[L].cL>0)){I=0;
for(B=0;
B<3;
B++){if(!e||L!=B){I-=r.pf[B].cL}}c=a.eG(c.pm.c1,c.pl.c1,r.px[L].c1);
for(B=0;
B<3;
B++){y[B].cu(bB((B==L?0.5:-0.25)*I*w,-30,30)*ag,c,a)}}}if(M.abs(d)>(t?2:1)){I=0;
c=a.eL(r.px[0].c1,r.px[1].c1,r.px[2].c1);
for(D=0;
D<3;
D++){for(B=0;

B<3;
B++){if(D!=B){I-=r.pf[B].cL}}y[D].cu(bB(I*M.abs(w),-30,30)*ag,c[D],a)}}else{if(p==1&&(!t||u==0)){for(B=0;
B<3;
B++){if(L!=B){if((h=r.pf[B].cL)>0){o=B}else{n=B}I+=M.abs(h)}}if(o+n){c=a.eG(r.px[n].c1,r.px[o].c1);
y[L].cu(bB(0.5*I*M.abs(w),-30,30)*ag,c,a)}}}}if(f){for(B=0;
B<3;
B++){c=this.pz[r.px[B].bI];
for(D=0,K=bh(c);
D<K;
D++){c[D].pd()}}}else{for(B=0;
B<3;
B++){r.pf[B].pd()}}}if(bh(A)){A.sort(ps);
w=M.abs(w);
m=[];
for(E=0,z=bh(A);
E<z;
E++){r=A[E];
if(r.o_<1){break}if(E/z<M.random()&&(E+q)%2){b=r.gr;
a=b.c1;
o=r.pm;
n=r.pl;
h=bh(o.dl);
f=bh(n.dl);
e=h+f;
c=a.eG(n.c1,o.c1);
if(K=bh(r.pA)){for(D=0;
D<K;
D++){G=r.pA[D];
v=G.g4(b);
v.cu(w/oQ/K*r.cL*ag*(G.iM(n)?1:-1),c,a)}}else{if(!bP(m,b)&&!bP(m,o)&&!bP(m,n)){m.push(b,o,n);
o.c1.cu(r.cL*w*f/e*ag,c,a);
n.c1.cu(r.cL*-w*h/e*ag,c,a)}}}this.h8.ct()}}}function pB(p){var o=this.pc,h,f,e,c,g,k,b,t,d,r,q,m,l,a=[],n=(p>0?1:0);
p=M.abs(p);
if(f=bh(o)){o.sort(ps);
for(h=0;
h<f;
h++){g=o[h];
if(g.o_<1){break}if(h/f<M.random()&&(h+n)%2){k=g.gr.c1;
m=g.pm;
l=g.pl;
r=bh(m.dl);
q=bh(l.dl);
d=r+q;
if(c=bh(g.pA)){for(e=0;
e<c;
e++){b=g.pA[e];
t=b.g4(g.gr);
t.eE(p/oQ/c*g.cL*ag*(b.bK(g.dl[0])?1:-1),k)}}else{if(!bP(a,g.gr)&&!bP(a,m)&&!bP(a,l)){a.push(g.gr,m,l);
m.c1.eE(g.cL*p*q/d*ag,k);
l.c1.eE(g.cL*-p*r/d*ag,k)}}}}this.h8.ct()}}function o8(b,a,c,e,d){this.c0=b;
this.c2=a;
this.o9=j7;
this.bh=c;
this.cL=e;
this.o_=d}function pC(a,d,c,b){var e=this;
bH.apply(e);
e.po=a;
e.gr=d;
e.pm=c;
e.pl=b;
e.dl=[d.g8(c),d.g8(b)];
e.pD=pE;
e.pd=pk;
e.pF=pq;
e.pd()}function pG(a,e,d,c,b){var f=this;
bH.apply(f);
f.gr=e;
f.px=[d,c,b];
f.dl=[e.g8(d),e.g8(c),e.g8(b)];
f.pf=[a.pH(e,c,b),a.pH(e,d,b),a.pH(e,d,c)];
f.pD=pI;
f.pd=pe;
f.pF=pp}function pJ(g,f,d){for(var h=this,c=h.pz[g.bI],b,e=0,a=bh(c);
e<a;
e++){b=c[e];
if((f.bK(b.pm)&&d.bK(b.pl))||(f.bK(b.pl)&&d.bK(b.pm))){break}}if(e==a){b=new pC(h,g,f,d)}return b}function pK(h,b,a,j){var e=this,c=e.pL[h.bI],g,f,d;
if(c){for(g=0,f=bh(c);
g<f;
g++){d=c[g];
if(bP(d.px,b)&&bP(d.px,a)&&bP(d.px,j)){break}}}else{c=[];
e.pL[h.bI]=c}if(g==f){d=new pG(e,h,b,a,j);
c.push(d);
e.pw.push(d);
d.pD()}return d}function pI(){for(var a=0;
a<3;
a++){this.pf[a].pD()}this.pF()}function pE(k){var b=this,f=b.po,g=b.dl,e=bh(g)-1,d,c,h,j,a=(b.pn<af||bh(b.gr.dl)>2);
if(!b.pA){if(a){b.pA=[];
for(;
e>=0;
e--){if(!bh(g[e].dV())){b.pA.push(g[e])}}f.pz[b.gr.bI].push(b)}j=bZ(f.g6,g[0].dV(),g[1].dV());
if(d=bh(j)){for(e=0;
e<d;
e++){c=j[e];
h=f.pM[c.bI];
if(!h){h=[];
f.pM[c.bI]=h}if(a){h.push(b)}if(!c.pg){k=bh(c.dW);
c.pg=(f.o6&&!c.i8()&&(k==8||(k==6&&c.i9()))?aj:pN(k))}}b.pg=(a?j[0].pg:ak-j[0].pg);
b.ph=T}else{b.pF(k)}}return !!d}function pN(a){return af-ak/a
}function pO(d,c){if(d.pn<c.pn){return 1}if(d.pn>c.pn){return -1}return 0}function pP(){var p,l,h,b,g,f,d,e=this,c=e.h8,t,u,r,q,o,a,w,v;
for(p=0,l=bh(c.dW);
p<l;
p++){t=c.dW[p];
u=t.dl;
a=[];
e.pz[t.bI]=[];
b=bh(u);
if(e.o6&&b>2){for(h=0;
h<b;
h++){r=u[h];
for(g=h+1;
g<b;
g++){q=u[g];
for(f=g+1;
f<b;
f++){o=u[f];
for(d=f+1;
d<b;
d++){if(u[d].iN().eN(r.iN(),q.iN(),o.iN())){d=-1;
break}}if(d>0){e.pQ(t,r.gw(t),q.gw(t),o.gw(t))}}}}}else{if(b>1){for(h=0;
h<b;
h++){a.push(new gq(t,u[h].gw(t)))}a.sort(gs);
v=T;
for(h=0;
h<b;
h++){g=(h+1)%b;
w=e.pH(t,a[h].gr,a[g].gr);
if(!w.pD(v)){v=F}}}}b1(e.pc,e.pz[t.bI])}}function pR(){for(var d,a,g=this.h8.dW,h,f,n,k,m,b,l,e=0,c=bh(g);
e<c;
e++){h=g[e];
n=this.pz[h.bI];
if((a=bh(n))>2){m=0;
k=0;
if(!this.o6||a<4){b=ak}else{if(a<7){b=aj}else{if(a<11){b=96}else{if(a<16||a>21){b=ad}else{b=82.29}}}b*=a}for(d=0;
d<a;
d++){f=n[d];
if(f.ph){m+=f.pg}else{k+=f.pg}}k+=m;
if(this.o6?k>b:k!=b){if(m<b){l=(b-m)/(k-m);
for(d=0;
d<a;
d++){f=n[d];
if(!f.ph){f.pg*=l}}}else{l=b/k;
for(d=0;
d<a;
d++){f=n[d];
f.pg*=l}}}}}}function pS(){for(var d=this.h8.dl,c,b=0,a=bh(d);
b<a;
b++){c=d[b];
c.o9=am;
c.bh=am;
c.o_=am}d=this.g6;
a=bh(d);
for(b=0;
b<a;
b++){d[b].pg=am}}function pT(d){if(bh(d.dW)<10){var b=this,h=d.dW,k,f,a=d.pg,m=b.pM[d.bI],g,e=bh(m),p,n=0,o=0,j,c,l;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.pg-a)<oK){n++}else{o+=a-p.pg}}if(o){j=o/n;
for(g=0;
g<e;
g++){p=m[g];
if(M.abs(p.pg-a)<oK){p.pg+=j}}}d.i6();
e=bh(h);
if(b.o6){d.iX();
if(a==aj){a=pN(e);
if(e==8){k=[[p=15,p,-p,-p,p,p,-p,-p,3]]}else{k=[[p=(aj-ad)*0.5,p,-p,p,p,-p,2],[p,-p,p,-p,p,-p,1]]}}if(k){f=ao;
while(j=k.pop()){o=j.pop();
for(;
o>=0;
o--){c=0;
for(g=0;
g<e;
g++){c+=M.abs(d.i7(h[g])-j[g])}if(c<f){f=c;
n=j.slice()}if(f==0){break}if(o>0){bX(j)}}}j=n}a=af-a;
k=h[0];
n=k.c1;
n.cm(d.iU.ca(-d.iU.cf(n.cr(d.fg))));
n.eD(0.5*c5/M.sin(0.5*a*ag)/n.cL(d.fg),d.fg);
for(g=1;
g<e;
g++){k=h[g];
k.c1=n.b5();
k.c1.cu(a*g*ag,d.iU,d.fg)}if(j){for(g=0;
g<e;
g++){k=h[g].c1;
k.cu(-j[g]*ag,d.iU.ci(k.cr(d.fg)).ct(),d.fg)}}}else{for(g=1;
g<e;
g++){k=h[g];
f=h[g-1];
if(g==1){c=er(f,k);
k.c1=cU(f.c1,c,c5)}else{p=bZ(m,b.pz[k.bI]);
if(bh(p)==1){p=p[0];
if(!l){l=(h[2].c1.ez(h[0].c1,h[1].c1)?1:-1)}c+=(af-p.pg)*l;
k.c1=cU(f.c1,c,c5)}}}}}}function pU(){for(var c=this,b=0,a=bh(c.g6);
b<a;
b++){c.pV(c.g6[b])}}function oX(a,j,e){var b=this,g=[],f,h,l,d,c,k=1;
b.h8=a;
b.o6=j;
b.pc=[];
b.pw=[];
b.pz={};
b.pL={};
b.pM={};
b.pr=e;
b.pW=pP;
b.oZ=o5;
b.o0=pa;
b.o1=pb;
b.o4=pt;
b.o3=(j?pv:pB);
b.pX=pU;
b.pV=pT;
b.pY=pR;
b.jo=oY;
b.pZ=pS;
b.pH=pJ;
b.pQ=pK;
for(d=bh(a.h9)-1;
d>=0;
d--){c=a.h9[d];
if(c.type==as){f=c.hj.slice();
h=c.dl.slice();
l=c.hi.slice();
c.h5(l,h);
g.push({dj:c.dj,dW:f,dl:h,hi:l})
}}b.g6=iO(a.dV());
b.pW();
do{b.pX();
b.pY();
b.jo();
k--}while(k>0&&b.o2>oR);
b.pZ();
for(d=bh(g)-1;
d>=0;
d--){c=g[d];
a.eg.hA(c.dj,c.dW,c.dl,c.hi)}a.fh(bb)}hideMenu=nj;
getMolRxnfile=lK;
setMolRxnfile=lL;
centerView=oS;
zoomFit=n4;
redrawChanged=n2;
delSelection=m7;
Point3D=cb;
p0=ft;
Molecule=fr;
Atom=gg;
Bond=gj;
Selection=g3;
